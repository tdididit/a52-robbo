mads 2.0.0 build 19 (6 Oct 15)
Source: a52-robbo.asm
     1 				; Atari 5200 Robbo
     2 				; Written by Sebastian Kotek (tdididit@gmail.com)
     3 				;
     4 				; Assemble with MADS 2.0.0
     5 				;
     6 				  		      icl 'inc/a5200.h'
Source: a5200.h
     1 				; OS EQUATES
     2 				; ----------
     3 				; DISPLAY LIST EQUATES
     4 				;
     5 = 0080			ADLI     =   $80
     6 = 0040			AVB      =   $40
     7 = 0040			ALMS     =   $40
     8 = 0020			AVSCR    =   $20
     9 = 0010			AHSCR    =   $10
    10 = 0001			AJMP     =   $01
    11 = 0000			AEMPTY1  =   $00
    12 = 0010			AEMPTY2  =   $10
    13 = 0020			AEMPTY3  =   $20
    14 = 0030			AEMPTY4  =   $30
    15 = 0040			AEMPTY5  =   $40
    16 = 0050			AEMPTY6  =   $50
    17 = 0060			AEMPTY7  =   $60
    18 = 0070			AEMPTY8  =   $70
    19 				;
    20 				; OS VARIABLES FOR 5200
    21 				;
    22 				; PAGE 0
    23 				;
    24 = 0000			POKMSK   =   $00
    25 = 0001			RTCLOKH  =   $01
    26 = 0002			RTCLOKL  =   $02
    27 = 0003			CODFLG   =   $03
    28 = 0004			ATRACT   =   $04
    29 = 0005			SDLSTL   =   $05
    30 = 0006			SDLSTH   =   $06
    31 = 0007			SDMCTL   =   $07
    32 = 0008			PCOLR0   =   $08
    33 = 0009			PCOLR1   =   $09
    34 = 000A			PCOLR2   =   $0A
    35 = 000B			PCOLR3   =   $0B
    36 = 000C			COLOR0   =   $0C
    37 = 000D			COLOR1   =   $0D
    38 = 000E			COLOR2   =   $0E
    39 = 000F			COLOR3   =   $0F
    40 = 0010			COLOR4   =   $10
    41 = 0011			POT0     =   $11
    42 = 0012			POT1     =   $12
    43 = 0013			POT2     =   $13
    44 = 0014			POT3     =   $14
    45 = 0015			POT4     =   $15
    46 = 0016			POT5     =   $16
    47 = 0017			POT6     =   $17
    48 = 0018			POT7     =   $18
    49 				;
    50 				; PAGE 2
    51 				;
    52 = 0200			VIMIRQ   =   $0200 ; Immediate IRQ vector
    53 = 0202			VVBLKI   =   $0202 ; Immediate VBI vector
    54 = 0204			VVBLKD   =   $0204 ; Deffered VBI vector
    55 = 0206			VDLI     =   $0206 ; DLI vector
    56 = 0208			VKEYBD   =   $0208 ; Keyboard IRQ vector
    57 = 020A			VKEYPAD  =   $020A ; Keypad routine continuation
    58 = 020C			VBREAK   =   $020C ; BREAK key IRQ vector
    59 = 020E			VBRK     =   $020E ; BRK instruction IRQ vector
    60 = 0210			VSERIN   =   $0210 ; Serial Input Data Ready IRQ vector
    61 = 0212			VSEROR   =   $0212 ; Serial Output Data Needed IRQ vector
    62 = 0214			VSEROC   =   $0214 ; Serial Output Finished IRQ vector
    63 = 0216			VTIMR1   =   $0216 ; POKEY Timer 1 IRQ vector
    64 = 0218			VTIMR2   =   $0218 ; POKEY Timer 2 IRQ vector
    65 = 021A			VTIMR4   =   $021A ; POKEY Timer 4 IRQ vector
    66 				;
    67 				; PAL COMPATIBILITY
    68 				;
    69 = BFE7			PALCOMP  =   $BFE7
    70 				;
    71 				; HARDWARE REGISTERS
    72 				;
    73 				; GTIA
    74 				;
    75 = C000			HPOSP0   =   $C000
    76 = C000			M0PF     =   $C000
    77 = C001			HPOSP1   =   $C001
    78 = C001			M1PF     =   $C001
    79 = C002			HPOSP2   =   $C002
    80 = C002			M2PF     =   $C002
    81 = C003			HPOSP3   =   $C003
    82 = C003			M3PF     =   $C003
    83 = C004			HPOSM0   =   $C004
    84 = C004			P0PF     =   $C004
    85 = C005			HPOSM1   =   $C005
    86 = C005			P1PF     =   $C005
    87 = C006			HPOSM2   =   $C006
    88 = C006			P2PF     =   $C006
    89 = C007			HPOSM3   =   $C007
    90 = C007			P3PF     =   $C007
    91 = C008			SIZEP0   =   $C008
    92 = C008			M0PL     =   $C008
    93 = C009			SIZEP1   =   $C009
    94 = C009			M1PL     =   $C009
    95 = C00A			SIZEP2   =   $C00A
    96 = C00A			M2PL     =   $C00A
    97 = C00B			SIZEP3   =   $C00B
    98 = C00B			M3PL     =   $C00B
    99 = C00C			SIZEM    =   $C00C
   100 = C00C			P0PL     =   $C00C
   101 = C00D			GRAFP0   =   $C00D
   102 = C00D			P1PL     =   $C00D
   103 = C00E			GRAFP1   =   $C00E
   104 = C00E			P2PL     =   $C00E
   105 = C00F			GRAFP2   =   $C00F
   106 = C00F			P3PL     =   $C00F
   107 = C010			GRAFP3   =   $C010
   108 = C010			TRIG0    =   $C010
   109 = C011			GRAFM    =   $C011
   110 = C011			TRIG1    =   $C011
   111 = C012			COLPM0   =   $C012
   112 = C012			TRIG2    =   $C012
   113 = C013			COLPM1   =   $C013
   114 = C013			TRIG3    =   $C013
   115 = C014			COLPM2   =   $C014
   116 = C014			GTIAPAL  =   $C014
   117 = C015			COLPM3   =   $C015
   118 = C016			COLPF0   =   $C016
   119 = C017			COLPF1   =   $C017
   120 = C018			COLPF2   =   $C018
   121 = C019			COLPF3   =   $C019
   122 = C01A			COLBK    =   $C01A
   123 = C01B			PRIOR    =   $C01B
   124 = C01C			VDELAY   =   $C01C
   125 = C01D			GRACTL   =   $C01D
   126 = C01E			HITCLR   =   $C01E
   127 = C01F			CONSPK   =   $C01F
   128 = C01F			CONSOL   =   $C01F
   129 				;
   130 				; PIA
   131 				;
   132 = D300			PORTA    =   $D300
   133 = D301			PORTB    =   $D301
   134 = D302			PACTL    =   $D302
   135 = D303			PBCTL    =   $D303
   136 				;
   137 				; ANTIC
   138 				;
   139 = D400			DMACTL   =   $D400
   140 = D401			CHACTL   =   $D401
   141 = D402			DLISTL   =   $D402
   142 = D403			DLISTH   =   $D403
   143 = D404			HSCROL   =   $D404
   144 = D405			VSCROL   =   $D405
   145 = D407			PMBASE   =   $D407
   146 = D409			CHBASE   =   $D409
   147 = D40A			WSYNC    =   $D40A
   148 = D40B			VCOUNT   =   $D40B
   149 = D40C			PENH     =   $D40C
   150 = D40D			PENV     =   $D40D
   151 = D40E			NMIEN    =   $D40E
   152 = D40F			NMIRES   =   $D40F
   153 				;
   154 				; POKEY
   155 				;
   156 = E800			AUDF1    =   $E800
   157 = E800			PPOT0    =   $E800
   158 = E801			AUDC1    =   $E801
   159 = E801			PPOT1    =   $E801
   160 = E802			AUDF2    =   $E802
   161 = E802			PPOT2    =   $E802
   162 = E803			AUDC2    =   $E803
   163 = E803			PPOT3    =   $E803
   164 = E804			AUDF3    =   $E804
   165 = E804			PPOT4    =   $E804
   166 = E805			AUDC3    =   $E805
   167 = E805			PPOT5    =   $E805
   168 = E806			AUDF4    =   $E806
   169 = E806			PPOT6    =   $E806
   170 = E807			AUDC4    =   $E807
   171 = E807			PPOT7    =   $E807
   172 = E808			AUDCTL   =   $E808
   173 = E808			ALLPOT   =   $E808
   174 = E809			STIMER   =   $E809
   175 = E809			KBCODE   =   $E809
   176 = E80A			SKREST   =   $E80A
   177 = E80A			RANDOM   =   $E80A
   178 = E80B			POTGO    =   $E80B
   179 = E80D			SEROUT   =   $E80D
   180 = E80E			IRQEN    =   $E80E
   181 = E80E			IRQST    =   $E80E
   182 = E80F			SKCTL    =   $E80F
   183 = E80F			SKSTAT   =   $E80F
     7 				  		      icl 'inc/5200macro.h'
Source: 5200macro.h
     1 				 
     2 				.macro align
     3 				
     4 				 ift :0>0
     5 				
     6 				  ift (*/:1)*:1<>*
     7 				   .def ?tmp = [(*/:1)*:1+:1]-*
     8 				   :?tmp brk
     9 				  eif
    10 				
    11 				 els
    12 				
    13 				  ert 'Unexpected end of line'
    14 				
    15 				 eif
    16 				.endm
     8 					
     9 						        opt f+h-
    10 				            org $0080
    11 				;************ Zero Page Variables ****************
    12 = 0080			SRC_PTR     .ds 2
    13 = 0082			DST_PTR     .ds 2
    14 = 0084			COUNT_WORD  .ds 2
    15
    16 = 0086			ADDR        .ds 2
    17 = 0088			SCRA        .ds 2
    18 = 008A			CHAD        .ds 2
    19 = 008C			FADR        .ds 2
    20
    21 = 008E			_PNTR       .ds 4
    22 = 0092			_ADDR       .ds 8
    23 = 009A			_SCRA       .ds 2
    24 = 009C			_HLP        .ds 2
    25 				        
    26 				;* system
    27 = 0011			JOY         = POT0
    28 = C010			TRIG        = TRIG0
    29 = 0020			TMR         = RTCLOCK
    30
    31 = E80A			RND         = RANDOM
    32 = D405			VSCR        = VSCROL
    33
    34 				;SETV        = JSETVBV
    35 				;VBEX        = JEXITVBV
    36
    37 = E800			VOIC        = AUDF1
    38
    39 = 000B			COLB        = PCOLR3
    40
    41 				;* program
    42 = 0400			CAVE      = $0400
    43 = 05F0			CAPA = CAVE + $01f0                        
    44
    45 = 0800			IFNT_RAM      = $0800
    46 = 0C00			FONT_RAM      = $0c00
    47
    48 = 1000			SCRN          = $1000
    49
    50 = 3000			TEXT_RAM      = $3000
    51 = 30C0			DTXT_RAM      = TEXT_RAM + $00c0
    52 = 30E8			COTX_RAM      = TEXT_RAM + $00e8
    53 = 3368			INST_RAM      = TEXT_RAM + $0368
    54
    55 = 3A00			INFLATE_RAM   = $3a00
    56
    57 				            org $0280
    58 = 0280			X_POS       .ds 1
    59 = 0281			Y_POS       .ds 1
    60 = 0282			X1          .ds 1
    61 = 0283			Y1          .ds 1
    62 = 0284			FX          .ds 1
    63 = 0285			FY          .ds 1
    64 = 0286			LM          .ds 1
    65 = 0287			VSF         .ds 1
    66 = 0288			VSC         .ds 1
    67 = 0289			TELE        .ds 1
    68 = 028A			FAC         .ds 1
    69 = 028B			CNUM        .ds 1
    70
    71 = 028C			KEYS        .ds 1
    72 = 028D			LIVS        .ds 1
    73 = 028E			ZEBR        .ds 1
    74 = 028F			LSTE  equ *
    75 = 028F			SKRB        .ds 1
    76 = 0290			NABO        .ds 1
    77 = 0291			DEMO        .ds 1
    78
    79 = 0292			SCOR        .ds 3
    80
    81 = 0295			HLP         .ds 1
    82 = 0296			RUCH        .ds 1
    83 = 0297			LAST        .ds 1
    84 = 0298			TOLE  equ *
    85 = 0298			PNTR        .ds 1
    86 = 0299			DCV         .ds 1
    87
    88 = 029A			STCN        .ds 1
    89 = 029B			SETUP_HLP   .ds 1
    90 = 029C			ROTM_HLP    .ds 1
    91 = 029D			DLI_HLP     .ds 1
    92 = 029E			BDEC        .ds 1
    93 = 029F			HELP_20     .ds 1
    94 = 02A0			CNTR        .ds 1
    95 = 02A1			NOGA_HLP    .ds 1
    96 = 02A2			STRC        .ds 1
    97
    98 = 02A3			LANG_HLP    .ds 1
    99 				            
   100 				            org $02f0
   101 = 02F0			RAM_MASK    .ds 6
   102 = 02F6			SCHBASE     .ds 1          
   103 				            org $02FF
   104 				;****************** Variables ********************
   105 = 02FF			REGION      .ds 1
   106
   107 				            org $0300
   108 = 0300			RAM_CVDL  equ *
   109
   110 				            org $4000
   111 = 4000			ROMTOP  equ *
   112 				            icl 'inc/system.h'	
Source: system.h
     1 				SYSTEM    .LOCAL
     2
     3 				DETECT_ENV:
     4 				;************** Detect envorinment ****************  
     5
     6 4000 AD 14 C0		        lda     GTIAPAL          ;Read PAL register
     7 4003 29 0E		        and     #$0e             ;Mask off bits 1-3
     8 4005 D0 02		        bne     is_ntsc
     9 4007 A9 80		        lda     #$80
    10 4009			is_ntsc:
    11 4009 29 80		        and     #$80             ; PAL GTIA - 7th bit set to 1
    12 400B 8D FF 02		        sta     REGION
    13 				 
    14 400E AD 32 FD		        lda     $FD32
    15 4011 C9 E8		        cmp     #$e8             ; inx ($e8) in 4 port bios
    16 4013 D0 02		        bne     is_2port
    17 4015 A9 40		        lda     #$40
    18 4017			is_2port:
    19 4017 29 40		        and     #$40             ; 4 port bios - 6th bit set to 1                       
    20 4019 0D FF 02		        ora     REGION          
    21 401C 8D FF 02		        sta     REGION
    22
    23 401F 60			        rts
    24
    25 4020			INIT_RAM:
    26 				;************* Clear RAM **************************
    27
    28 4020 A0 00		        ldy     #$00            ;Clear Ram
    29 4022 A9 02		        lda     #$02            ;Start at $0200
    30 4024 85 81		        sta     $81             
    31 4026 A9 00		        lda     #$00
    32 4028 85 80		        sta     $80
    33 402A			irloop:
    34 402A A9 00		        lda     #$00
    35 402C 91 80		        sta     ($80),y         ;Store data
    36 402E C8			        iny                     ;Next byte
    37 402F D0 F9		        bne     irloop          ;Branch if not done page
    38 4031 E6 81		        inc     $81             ;Next page
    39 4033 A5 81		        lda     $81
    40 4035 C9 40		        cmp     #$40            ;Check if end of RAM
    41 4037 D0 F1		        bne     irloop          ;Branch if not
    42
    43 4039 60			        rts
    44
    45 403A			ATARI_SPLASH:
    46
    47 403A A0 00		        ldy     #$00
    48 403C A9 FD		        lda     #$fd
    49 403E 85 81		        sta     $81
    50 				        
    51 4040 AD FF 02		        lda     REGION
    52 4043 29 40		        and     #$40
    53 4045 F0 05		        beq     as2port
    54 4047 A9 42		        lda     #$42
    55 4049 4C 4E 40		        jmp     as_copyrom
    56 404C			as2port:
    57 404C A9 58		        lda     #$58
    58 404E			as_copyrom:
    59 404E 85 80		        sta     $80
    60
    61 4050			as_loop1:        
    62 4050 B1 80		        lda     ($80),y
    63 4052 99 00 04		        sta     $0400,y
    64 4055 C8			        iny
    65 4056 D0 F8		        bne     as_loop1
    66 				        
    67 4058 A0 4C		        ldy     #$4c
    68 405A E6 81		        inc     $81
    69 405C			as_loop2:        
    70 405C B1 80		        lda     ($80),y
    71 405E 99 00 05		        sta     $0500,y
    72 4061 88			        dey
    73 4062 10 F8		        bpl     as_loop2
    74 				        
    75 4064 A9 60		        lda     #$60
    76 4066 8D 4C 05		        sta     $054c
    77 				        
    78 4069 A2 0B		        ldx     #$0b
    79 406B A9 EA		        lda     #$ea
    80 406D			as_loop3:
    81 406D 9D 32 05		        sta     $0532,x
    82 4070 CA			        dex
    83 4071 10 FA		        bpl     as_loop3
    84 				        
    85 4073 20 00 04		        jsr     $0400
    86
    87 4076 AD FC BF		        lda $BFFC
    88 4079 D0 01		        bne continue
    89 407B 60			        rts
    90 407C			continue:        
    91 				        // put year into screen memory
    92 407C A9 12		        lda #"2"
    93 407E 8D 9E 3C		        sta $3c9e
    94 				        
    95 4081 AD FC BF		        lda $BFFC
    96 4084			count100:
    97 4084 C9 64		        cmp #100
    98 4086 30 08		        bmi count10
    99 4088 38			        sec
   100 4089 E9 64		        sbc #100
   101 408B E6 20		        inc $20
   102 408D 4C 84 40		        jmp count100
   103 4090			count10:
   104 4090 C9 0A		        cmp #10
   105 4092 30 08		        bmi count1
   106 4094 38			        sec
   107 4095 E9 0A		        sbc #10
   108 4097 E6 21		        inc $21
   109 4099 4C 90 40		        jmp count10
   110 409C			count1:
   111 409C C9 01		        cmp #1
   112 409E 30 08		        bmi count_done
   113 40A0 38			        sec
   114 40A1 E9 01		        sbc #1
   115 40A3 E6 22		        inc $22
   116 40A5 4C 9C 40		        jmp count1
   117 40A8			count_done:
   118 40A8 A2 02		        ldx #2
   119 40AA			ns_year:
   120 40AA B5 20		        lda $20,x
   121 40AC 18			        clc
   122 40AD 69 10		        adc #$10
   123 40AF 9D 9F 3C		        sta $3c9f,x
   124 40B2 CA			        dex
   125 40B3 10 F5		        bpl ns_year
   126 				        
   127 40B5			as_wait:
   128 40B5 E4 02		        cpx $02
   129 40B7 D0 FC		        bne as_wait
   130 40B9 60			        rts
   131 				 ;-------------------------------------------------------------------------------
   132 				; * COPY_MEM (SRC_PTR - source address / DST_PTR - target address / COUNT_W lenght)
   133 				;-------------------------------------------------------------------------------
   134 40BA			COPY_MEM:
   135 40BA A0 00		        ldy #$00
   136 40BC B1 80		        lda (SRC_PTR),y       ; move byte from address stored in $80-$81
   137 40BE 91 82		        sta (DST_PTR),y       ; to address stored in $82-$83
   138 40C0 E6 80		        inc SRC_PTR           ; increase source address word value on zero page
   139 40C2 D0 02		        bne mvmem1
   140 40C4 E6 81		        inc SRC_PTR+1
   141 40C6			mvmem1:
   142 40C6 E6 82		        inc DST_PTR           ; increase target address word value on zero page
   143 40C8 D0 02		        bne mvmem2
   144 40CA E6 83		        inc DST_PTR+1
   145 40CC			mvmem2:
   146 40CC C6 84		        dec COUNT_WORD        ; decrease lenght word value on zero page
   147 40CE D0 EA		        bne COPY_MEM
   148 40D0 C6 85		        dec COUNT_WORD+1
   149 40D2 A5 85		        lda COUNT_WORD+1
   150 40D4 C9 FF		        cmp #$ff
   151 40D6 D0 E2		        bne COPY_MEM
   152 40D8 60			        rts           
   153 				       
   154 				.ENDL
   113
   114 				;*************** Start of Code *******************
   115 40D9			START:
   116 40D9 78			        sei                     ;Disable interrupts
   117 40DA D8			        cld                     ;Clear decimal mode
   118 				        
   119 40DB 20 00 40		        jsr     SYSTEM.DETECT_ENV
   120
   121 40DE A2 FF		        ldx     #$FF
   122 40E0 9A			        txs                     ; set stack pointer to $FF
   123 40E1 E8			        inx
   124 				        
   125 40E2 A9 00		        lda     #$00
   126 40E4			crloop1    
   127 40E4 95 00		        sta     $00,x           ;Clear zero page
   128 40E6 9D 00 D4		        sta     DMACTL,x        ;Clear ANTIC  DMACTL   =   $D400
   129 40E9 9D 00 C0		        sta     HPOSP0,x        ;Clear GTIA   HPOSP0   =   $C000
   130 40EC 9D 00 E8		        sta     AUDF1,x         ;Clear POKEY  AUDF1    =   $E800
   131 40EF CA			        dex
   132 40F0 D0 F2		        bne     crloop1
   133
   134 				                
   135 40F2 AD FD BF		        lda $BFFD   ; check did ROM splash sccren was showed
   136 40F5 C9 FF		        cmp #$ff
   137 40F7 D0 03		        bne MAIN
   138 40F9 20 3A 40		        jsr SYSTEM.ATARI_SPLASH
   139
   140 				;****** Main Routine after Startup Procedure ******
   141
   142 40FC			MAIN:   
   143
   144 40FC A9 00		        lda #$00        ;disable NMI & IRQ
   145 40FE 8D A3 02		        sta LANG_HLP
   146 4101 8D 0E D4		        sta NMIEN
   147 4104 85 07		        sta SDMCTL
   148 				        
   149 4106 A9 09		        lda <modIMIRQ
   150 4108 8D 02 02		        sta VVBLKI
   151 410B A9 BE		        lda >modIMIRQ
   152 410D 8D 03 02		        sta VVBLKI+1
   153 				        
   154 4110 A9 C0		        lda #$c0        ;enable interrupts
   155 4112 8D 0E D4		        sta NMIEN
   156 				        
   157 				        
   158 				;- copy ROM to RAM
   159 				;- inflate 
   160 4115 A9 00		        lda #$00
   161 4117 85 80		        sta SRC_PTR
   162 4119 85 82		        sta DST_PTR
   163 411B A9 BC		        lda #$bc
   164 411D 85 81		        sta SRC_PTR+1
   165 411F A9 3A		        lda #$3a
   166 4121 85 83		        sta DST_PTR+1
   167 4123 A9 09		        lda <inflate_size
   168 4125 85 84		        sta COUNT_WORD
   169 4127 A9 02		        lda >inflate_size
   170 4129 85 85		        sta COUNT_WORD+1
   171 412B 20 BA 40		        jsr SYSTEM.COPY_MEM 
   172 				;- ifnt              
   173 				;        lda <IFNT
   174 				;        sta SRC_PTR
   175 				;        lda >IFNT
   176 				;        sta SRC_PTR+1
   177 				;        lda <IFNT_RAM
   178 				;        sta DST_PTR
   179 				;        lda >IFNT_RAM
   180 				;        sta DST_PTR+1
   181 				;        lda #$00
   182 				;        sta COUNT_WORD
   183 				;        lda #$04
   184 				;        sta COUNT_WORD+1
   185 				;        jsr SYSTEM.COPY_MEM 
   186 				;- font
   187 412E A9 00		        lda <FONT
   188 4130 85 80		        sta SRC_PTR
   189 4132 A9 65		        lda >FONT
   190 4134 85 81		        sta SRC_PTR+1
   191 4136 A9 00		        lda <FONT_RAM
   192 4138 85 82		        sta DST_PTR
   193 413A A9 0C		        lda >FONT_RAM
   194 413C 85 83		        sta DST_PTR+1
   195 413E A9 00		        lda #$00
   196 4140 85 84		        sta COUNT_WORD
   197 4142 A9 04		        lda #$04
   198 4144 85 85		        sta COUNT_WORD+1
   199 4146 20 BA 40		        jsr SYSTEM.COPY_MEM 
   200
   201 				;* move CVDL to RAM
   202 4149 A6 9D		        ldx GAME.CVDL_SIZE
   203 414B BD 5D 47		mvCVDL: lda GAME.CVDL,x
   204 414E 9D 00 03		        sta RAM_CVDL,x
   205 4151 CA			        dex
   206 4152 D0 F7		        bne mvCVDL
   207 				        
   208 4154 A9 00		        lda #0
   209 4156 8D A3 02		        sta LANG_HLP
   210
   211 				;* unpack ifont to RAM
   212 4159 20 7F 41		        jsr UNPACK_IFNT
   213 				        
   214 415C 20 36 5E		        jsr LANGUAGE.CHOOSE
   215 				        
   216 415F A9 00		        lda #0
   217 4161 8D 95 02		        sta HLP
   218 				;        sta SETUP_HLP
   219 4164 85 07		        sta SDMCTL
   220 				        
   221 4166 A2 10		        ldx #16
   222 4168 20 7D 46		        jsr TITLE.WAIT        
   223 				        
   224 				;* unpack ifont to RAM
   225 416B 20 7F 41		        jsr UNPACK_IFNT
   226 				                
   227 				;* unpack language to RAM
   228 416E 20 9A 41		        jsr UNPACK_LANG
   229 				        
   230 4171 A9 00		        lda #0
   231 4173 8D 9B 02		        sta SETUP_HLP
   232 4176 85 02		        sta RTCLOKL
   233 4178 85 01		        sta RTCLOKH
   234 				        
   235 417A E6 02		        inc RTCLOKL
   236 				        
   237 				                
   238 417C 4C 82 42		        jmp TITLE.TITLE
   239
   240 417F			UNPACK_IFNT:        
   241 417F AD A3 02		        lda LANG_HLP
   242 4182 0A			        asl
   243 				;- unpack IFNT to RAM
   244 4183 AA			        tax
   245 4184 BD E6 6F		        lda IFNT_PTRS,x
   246 4187 85 F0		        sta inflate_rom.inputPointer
   247 4189 BD E7 6F		        lda IFNT_PTRS+1,x
   248 418C 85 F1		        sta inflate_rom.inputPointer+1
   249 				        
   250 418E A9 00		        lda <IFNT_RAM
   251 4190 85 F2		        sta inflate_rom.outputPointer
   252 4192 A9 08		        lda >IFNT_RAM
   253 4194 85 F3		        sta inflate_rom.outputPointer+1
   254 				        
   255 4196 20 00 3A		        jsr inflate_rom.inflate
   256 4199 60			        rts
   257 				        
   258 419A			UNPACK_LANG:        
   259 419A AD A3 02		        lda LANG_HLP
   260 419D 0A			        asl
   261 				;- unpack LANG to RAM
   262 419E AA			        tax
   263 419F BD 74 7E		        lda LANG_PTRS,x
   264 41A2 85 F0		        sta inflate_rom.inputPointer
   265 41A4 BD 75 7E		        lda LANG_PTRS+1,x
   266 41A7 85 F1		        sta inflate_rom.inputPointer+1
   267 				        
   268 41A9 A9 00		        lda <TEXT_RAM
   269 41AB 85 F2		        sta inflate_rom.outputPointer
   270 41AD A9 30		        lda >TEXT_RAM
   271 41AF 85 F3		        sta inflate_rom.outputPointer+1
   272 				        
   273 41B1 20 00 3A		        jsr inflate_rom.inflate
   274 				        
   275 41B4 A2 28		        ldx #40
   276 41B6			ul_loop:
   277 41B6 BD C0 30		        lda DTXT_RAM,x
   278 41B9 9D 75 03		        sta GAME.RAM_DINF,x
   279 41BC CA			        dex
   280 41BD 10 F7		        bpl ul_loop
   281 41BF 60			        rts
   282 				        
   283 41C0			        icl 'inc/title.asm'
Source: title.asm
     1 41C0			TITLE     .LOCAL
     2
     3 41C0 48			DLI:    pha
     4
     5 41C1 AD 9D 02		        lda DLI_HLP
     6 41C4 F0 1F		        beq DLI1
     7 41C6 C9 01		        cmp #1
     8 41C8 F0 0C		        beq DLI2
     9 				        
    10 41CA A9 06		        lda #$06
    11 41CC 8D 17 C0		        sta COLPF1
    12 41CF A9 00		        lda #$00
    13 41D1 8D 18 C0		        sta COLPF2
    14 				        
    15 41D4 68			        pla
    16 41D5 40			        rti
    17 				        
    18 41D6 A9 04		DLI2:   lda #$04
    19 41D8 8D 17 C0		        sta COLPF1
    20 41DB A9 00		        lda #$00
    21 41DD 8D 18 C0		        sta COLPF2
    22
    23 				        
    24 41E0 EE 9D 02		        inc DLI_HLP
    25 41E3 68			        pla
    26 41E4 40			        rti
    27 				        
    28 41E5 A9 0E		DLI1:   lda #$0e
    29 41E7 8D 17 C0		        sta COLPF1
    30 41EA A9 00		        lda #$00
    31 41EC 8D 18 C0		        sta COLPF2
    32
    33 				        
    34 41EF EE 9D 02		        inc DLI_HLP
    35 41F2 68			        pla
    36 41F3 40			        rti
    37
    38 				;------------ TITLE.ASM
    39 41F4 A9 00		TSETUP: lda #0
    40 41F6 85 07		        sta SDMCTL
    41 41F8 8D 98 02		        sta PNTR
    42 41FB 85 02		        sta RTCLOKL
    43 41FD 8D 20 02		        sta CDTMR1
    44 4200 8D 21 02		        sta CDTMR1+1
    45 4203 8D 22 02		        sta CDTMR2
    46 4206 8D 23 02		        sta CDTMR2+1
    47 				        
    48 4209 A2 60		        ldx #$60
    49 420B			tsclr:
    50 420B 9D 20 02		        sta $220,x
    51 420E CA			        dex
    52 420F 10 FA		        bpl tsclr
    53 				        
    54 4211 20 83 46		        jsr HALT
    55 				        
    56 4214 AD 9B 02		        lda SETUP_HLP
    57 4217 D0 1C		        bne set1
    58 				        
    59 4219 A2 03		        ldx #3
    60 421B			copmask:
    61 421B BD 79 46		        lda MASK,x
    62 421E 9D F0 02		        sta RAM_MASK,x
    63 4221 CA			        dex
    64 4222 10 F7		        bpl copmask
    65 				        
    66 4224 A9 00		        lda #0
    67 4226 8D 8B 02		        sta CNUM
    68 4229 8D 99 02		        sta DCV
    69 422C 8D 91 02		        sta DEMO
    70 422F 8D 9A 02		        sta STCN
    71
    72 4232 EE 9B 02		        inc SETUP_HLP        
    73 4235			set1:   
    74 				        
    75 4235 AD F3 02		        lda RAM_MASK+3
    76 4238 8D F1 02		        sta RAM_MASK+1
    77 423B AD F2 02		        lda RAM_MASK+2
    78 423E 8D F0 02		        sta RAM_MASK
    79 				        
    80 4241 A2 05		        ldx #5
    81 4243 BD 97 46		copc:   lda COLS,x
    82 4246 95 0B		        sta PCOLR3,x
    83 4248 CA			        dex
    84 4249 10 F8		        bpl copc
    85 				        
    86 424B A9 68		        lda <INST_RAM
    87 424D 85 8A		        sta CHAD
    88 424F A9 33		        lda >INST_RAM
    89 4251 85 8B		        sta CHAD+1
    90 				        
    91 4253 A9 08		        lda >IFNT_RAM
    92 4255 8D F6 02		        sta SCHBASE
    93 				        
    94 4258 A9 FF		        lda #$ff
    95 425A 8D 21 02		        sta CDTMR1+1
    96 425D 8D A3 46		        sta TBUF
    97
    98 4260 A9 00		        lda #$00        ;disable NMI & IRQ
    99 4262 8D 0E D4		        sta NMIEN
   100 				        
   101 4265 A9 C0		        lda <TITLE.DLI
   102 4267 8D 06 02		        sta VDLI
   103 426A A9 41		        lda >TITLE.DLI
   104 426C 8D 07 02		        sta VDLI+1
   105 				        
   106 426F A9 C0		        lda #$c0        ;enable interrupts
   107 4271 8D 0E D4		        sta NMIEN
   108 				                
   109 4274 A9 02		        lda #2
   110 4276 8D 01 D4		        sta CHACTL
   111
   112 4279 8D 0F E8		        sta SKCTL
   113 				        
   114 427C A9 04		        lda #4
   115 427E 8D 1F C0		        sta CONSOL
   116 4281 60			        rts      
   117 				        
   118 = 4282			RESET   equ *        
   119 4282			TITLE:  
   120 4282 A2 FF		        ldx #$ff
   121 4284 9A			        txs
   122 				        
   123 4285 AD 8B 02		        lda CNUM
   124 4288 AE 91 02		        ldx DEMO
   125 428B F0 08		        beq nod
   126 428D A9 00		        lda #0
   127 428F 8D 91 02		        sta DEMO
   128 4292 AD 99 02		        lda DCV    
   129 4295			nod:
   130 4295 8D 9A 02		        sta STCN
   131 4298 8D 8B 02		        sta CNUM
   132 				        
   133 429B 20 F4 41		        jsr TSETUP
   134 429E 20 83 46		        jsr HALT
   135 				        
   136 42A1 A9 B9		        lda <TPDL
   137 42A3 85 05		        sta SDLSTL
   138 42A5 A9 46		        lda >TPDL
   139 42A7 85 06		        sta SDLSTH
   140
   141 42A9 A9 21		        lda #33
   142 42AB 85 07		        sta SDMCTL
   143
   144 42AD 20 5F 45		        jsr CLS
   145 				        
   146 				;---------------------------------------
   147 42B0			TPLP:
   148 42B0 20 C5 45		        jsr BIGR
   149 				        
   150 				;        jsr HALT
   151 				;        ldx #36
   152 				;        lda #$0e
   153 				;        jsr WLIN
   154 				;        lda #$00
   155 				;        sta COLPF2
   156 				        
   157 				;        ldx #60
   158 				;        lda #$04
   159 				;        jsr WLIN
   160 				        
   161 				;        ldx #74
   162 				;        lda #$06
   163 				;        jsr WLIN
   164 				        
   165 				;* print char -------
   166
   167 42B3 A9 00		        lda #0
   168 42B5 8D 01 E8		        sta VOIC+1
   169 				                
   170 42B8 AC 98 02		        ldy PNTR
   171 42BB AD 21 02		        lda CDTMR1+1
   172 42BE 0A			        asl
   173 42BF 0A			        asl
   174 42C0 0A			        asl
   175 42C1 0A			        asl
   176 42C2 29 80		        and #$80
   177 42C4 99 60 11		        sta SCRN+352,y
   178 				        
   179 42C7 AD 20 02		        lda CDTMR1
   180 42CA 0D 21 02		        ora CDTMR1+1
   181 42CD D0 69		        bne nopr
   182 				        
   183 42CF AC 98 02		        ldy PNTR
   184 42D2 C0 20		        cpy #32
   185 42D4 88			        dey
   186 42D5 B0 33		        bcs nxt1
   187 42D7 C8			        iny
   188 42D8 B1 8A		        lda (CHAD),y
   189 				        
   190 42DA 48			        pha
   191 42DB 29 03		        and #3
   192 42DD 69 02		        adc #2
   193 42DF 8D 21 02		        sta CDTMR1+1
   194 				        
   195 42E2 A9 10		        lda #$10
   196 42E4 8D 00 E8		        sta VOIC
   197 42E7 A9 82		        lda #$82
   198 42E9 8D 01 E8		        sta VOIC+1
   199 42EC 68			        pla
   200 				        
   201 42ED C9 FF		        cmp #$ff
   202 42EF D0 10		        bne conp
   203 				        
   204 				;* end of text ----------
   205
   206 42F1 A9 04		        lda #$4
   207 42F3 8D 20 02		        sta CDTMR1
   208 				        
   209 42F6 A9 67		        lda <(INST_RAM-1)
   210 42F8 85 8A		        sta CHAD
   211 42FA A9 33		        lda >(INST_RAM-1)
   212 42FC 85 8B		        sta CHAD+1
   213 42FE 4C 38 43		        jmp nopr
   214 				        
   215 4301 C9 40		conp:   cmp #$40
   216 4303 D0 2D		        bne PUTC
   217 				        
   218 				;* nxtln ----------------
   219
   220 4305 A9 00		nxtl:   lda #0
   221 4307 99 60 11		        sta SCRN+352,y
   222 				        
   223 430A 98			nxt1:   tya
   224 430B 65 8A		        adc CHAD
   225 430D 85 8A		        sta CHAD
   226 430F 90 02		        bcc *+4
   227 4311 E6 8B		        inc CHAD+1
   228 				        
   229 4313 A9 0F		        lda #15
   230 4315 8D 21 02		        sta CDTMR1+1
   231 				        
   232 4318 A9 02		        lda #$02
   233 431A 8D 00 E8		        sta VOIC
   234 431D A9 C4		        lda #$c4
   235 431F 8D 01 E8		        sta VOIC+1
   236 				                
   237 4322 A0 00		        ldy #0
   238 4324 B9 A0 10		        lda SCRN+160,y
   239 4327 99 80 10		        sta SCRN+128,y
   240 432A C8			        iny
   241 432B D0 F7		        bne *-7
   242 				        
   243 432D 8C 98 02		        sty PNTR
   244 4330 F0 06		        beq nopr
   245 				        
   246 4332 99 60 11		PUTC:   sta SCRN+352,y
   247 4335 EE 98 02		        inc PNTR
   248 				        
   249 4338			nopr:
   250 4338 A9 00		        lda #$00
   251 433A 85 04		        sta ATRACT
   252 				        
   253 433C AD 20 02		noha:   lda CDTMR1
   254 433F C9 01		        cmp #1
   255 4341 F0 03		        beq dem
   256 				        
   257 4343 4C 54 43		        jmp qq
   258 4346			dem:    
   259 				;        jmp CONGR
   260 4346 A9 01		        lda #1
   261 4348 8D 91 02		        sta DEMO
   262 434B AD 8B 02		        lda CNUM
   263 434E 8D 99 02		        sta DCV
   264 4351 4C 66 43		        jmp PLAJ
   265
   266 4354			qq:     
   267 4354 20 83 46		        jsr HALT
   268 4357 A2 3B		        ldx #59
   269 4359 A9 0E		        lda #$0e
   270 435B 20 8E 46		        jsr WLIN
   271
   272 435E 20 8A 46		        jsr TETR
   273
   274 4361 F0 03		        beq PLAJ
   275 4363 4C B0 42		        jmp TPLP
   276 				;* PLAY! ----------------
   277
   278 4366 A9 00		PLAJ    lda #$00 ;STCN
   279 4368 29 FC		        and #%11111100
   280 436A 8D 8B 02		        sta CNUM
   281 				;        inc TITLE_HLP
   282 				;* chck has        
   283 				        
   284 436D			liv3:
   285 436D A9 00		        lda #0
   286 436F 8D 8B 02		        sta CNUM
   287 4372 A9 08		        lda #$08 
   288 4374 8D 8D 02		        sta LIVS
   289 				        
   290 4377 A9 00		        lda #0
   291 4379 8D 20 02		        sta CDTMR1
   292 437C 8D 21 02		        sta CDTMR1+1
   293 				               
   294 437F 4C FA 47		        jmp GAME.PLAY
   295 				;* Congratulations ------
   296
   297 4382			CONGR:
   298
   299 4382 A9 61		        lda >SFNT
   300 4384 8D F6 02		        sta SCHBASE
   301 				        
   302 4387 A9 F2		        lda <CDL1
   303 4389 85 05		        sta SDLSTL
   304 438B A9 46		        lda >CDL1
   305 438D 85 06		        sta SDLSTH
   306 				        
   307 438F A2 05		        ldx #5
   308 4391			chgclrs1:
   309 4391 BD 9D 46		        lda COLS+6,x
   310 4394 95 0B		        sta PCOLR3,x
   311 4396 CA			        dex
   312 4397 10 F8		        bpl chgclrs1
   313
   314 4399 20 83 46		        jsr HALT
   315
   316 				        
   317 				;************************
   318
   319 439C A9 FF		        lda #$ff
   320 439E 8D 81 02		        sta Y_POS
   321 43A1 8D 84 02		        sta FX
   322 				        
   323 43A4 20 FF 44		        jsr DISP
   324 				        
   325 43A7 A2 3C		        ldx #60
   326 43A9 20 7D 46		        jsr WAIT
   327 				        
   328 				;* wchodzi Robbo
   329
   330 43AC A9 1E		        lda #30
   331 43AE 8D 84 02		        sta FX
   332 43B1 A9 0C		        lda #12
   333 43B3 8D 85 02		        sta FY
   334 43B6 A9 05		        lda #$05
   335 43B8 8D 96 02		        sta RUCH
   336 				        
   337 43BB A9 05		        lda #$05
   338 43BD 20 1B 5B		        jsr SOUND.SOUND_
   339 				        
   340 43C0 AD 96 02		wcho:   lda RUCH
   341 43C3 49 10		        eor #$10
   342 43C5 8D 96 02		        sta RUCH
   343 43C8 20 FA 44		        jsr DIWA
   344 43CB CE 84 02		        dec FX
   345 43CE AD 84 02		        lda FX
   346 43D1 C9 16		        cmp #22
   347 43D3 B0 EB		        bcs wcho
   348 				        
   349 43D5 A9 06		        lda #$06
   350 43D7 8D 96 02		        sta RUCH
   351 43DA 20 FA 44		        jsr DIWA
   352 				        
   353 43DD A2 0C		        ldx #12
   354 43DF 20 7D 46		        jsr WAIT
   355 				        
   356 				;* laduj statek
   357
   358 43E2 A9 0C		        lda #12
   359 43E4 8D 80 02		        sta X_POS
   360 43E7 A9 00		        lda #0
   361 43E9 8D 81 02		        sta Y_POS
   362 				        
   363 43EC A9 0E		        lda #$0e
   364 43EE 20 1B 5B		        jsr SOUND.SOUND_
   365 				        
   366 43F1 20 FA 44		land:   jsr DIWA
   367 43F4 AD 96 02		        lda RUCH
   368 43F7 49 10		        EOR #$10
   369 43F9 8D 96 02		        sta RUCH
   370 43FC EE 81 02		        inc Y_POS
   371 43FF AD 81 02		        lda Y_POS
   372 4402 C9 0C		        cmp #12
   373 4404 90 EB		        bcc land
   374 				        
   375 				;* macha raczka
   376 4406 A9 0D		        lda #$0d
   377 4408 20 1B 5B		        jsr SOUND.SOUND_
   378 				        
   379 440B A0 0E		        ldy #14
   380 440D 98			mach:   tya
   381 440E 48			        pha
   382 440F A9 13		        lda #$13
   383 4411 8D 96 02		        sta RUCH
   384 4414 20 FA 44		        jsr DIWA
   385 4417 A9 12		        lda #$12
   386 4419 8D 96 02		        sta RUCH
   387 441C 20 FA 44		        jsr DIWA
   388 441F 68			        pla
   389 4420 A8			        tay
   390 4421 88			        dey
   391 4422 D0 E9		        bne mach
   392 				        
   393 				;* idzie
   394
   395 4424 A9 05		        lda #$05
   396 4426 8D 96 02		        sta RUCH
   397 				        
   398 4429 AD 96 02		idzi:   lda RUCH
   399 442C 49 10		        eor #$10
   400 442E 8D 96 02		        sta RUCH
   401 4431 20 FA 44		        jsr DIWA
   402 4434 CE 84 02		        dec FX
   403 4437 AD 84 02		        lda FX
   404 443A C9 0D		        cmp #13
   405 443C B0 EB		        bcs idzi
   406 				        
   407 				;* odlatuje
   408
   409 443E A9 0B		        lda #$0b
   410 4440 20 1B 5B		        jsr SOUND.SOUND_
   411 				        
   412 4443 20 FA 44		odla:   jsr DIWA
   413 4446 CE 85 02		        dec FY
   414 4449 CE 81 02		        dec Y_POS
   415 444C AD 81 02		        lda Y_POS
   416 444F C9 FE		        cmp #$fe
   417 4451 D0 F0		        bne odla
   418 				        
   419 4453 A9 05		        lda #$05
   420 4455 20 1B 5B		        jsr SOUND.SOUND_
   421 				        
   422 4458 A2 3C		        ldx #60
   423 445A 20 7D 46		        jsr WAIT
   424 				;        .byte "tutaj"
   425 				;* congratulaions!
   426
   427 445D A9 00		        lda #0
   428 445F A2 06		        ldx #6
   429 4461			chgclrs2:
   430 4461 95 0B		        sta PCOLR3,x
   431 4463 CA			        dex
   432 4464 10 FB		        bpl chgclrs2
   433 				        
   434 4466 20 83 46		        jsr HALT
   435 				        
   436 4469 A9 0D		        lda <CDL2
   437 446B 85 05		        sta SDLSTL
   438 446D A9 47		        lda >CDL2
   439 446F 85 06		        sta SDLSTH
   440 				        
   441 4471 A9 08		        lda >IFNT_RAM
   442 4473 8D F6 02		        sta SCHBASE
   443 				        
   444 4476 A2 00		        ldx #0
   445 4478 A9 60		        lda #$60
   446 447A			fillscr1:
   447 447A 9D 00 10		        sta SCRN+$000,x
   448 447D 9D 00 11		        sta SCRN+$100,x
   449 4480 9D 00 12		        sta SCRN+$200,x
   450 4483 CA			        dex
   451 4484 D0 F4		        bne fillscr1
   452 				        
   453 4486 A0 00		        ldy #0
   454 4488 84 0D		rozj:   sty COLOR1
   455 448A A2 02		        ldx #2
   456 448C 20 7D 46		        jsr WAIT
   457 448F C8			        iny
   458 4490 C0 0F		        cpy #$0f
   459 4492 90 F4		        bcc rozj
   460 				        
   461 4494 A9 02		        lda #$02
   462 4496 85 0E		        sta COLOR2
   463 				        
   464 4498 A9 00		        lda #$00
   465 449A 20 1B 5B		        jsr SOUND.SOUND_
   466 				        
   467 449D AC 0A E8		copt:   ldy RND
   468 44A0 B9 E8 30		        lda COTX_RAM,y
   469 44A3 99 00 10		        sta SCRN,y
   470 44A6 AC 0A E8		        ldy RND
   471 44A9 B9 E8 31		        lda COTX_RAM+$100,y
   472 44AC 99 00 11		        sta SCRN+$100,y
   473 44AF AC 0A E8		        ldy RND
   474 44B2 B9 E8 32		        lda COTX_RAM+$200,y
   475 44B5 99 00 12		        sta SCRN+$200,y
   476 				        
   477 44B8 A2 00		        ldx #0
   478 44BA AD FF FF		        lda $ffff
   479 44BD CA			        dex
   480 44BE D0 FA		        bne *-4
   481 				        
   482 44C0 20 8A 46		        jsr TETR
   483 44C3 D0 D8		        bne copt
   484 				        
   485 				;**********************
   486
   487 44C5 A9 09		        lda #$09
   488 44C7 20 1B 5B		        jsr SOUND.SOUND_
   489 				        
   490 44CA A2 74		        ldx #116
   491 44CC EC 0B D4		znik:   cpx VCOUNT
   492 44CF D0 FB		        bne znik
   493 44D1 A0 0F		        ldy #$0f
   494 44D3 8C 18 C0		z1:     sty COLPF2
   495 44D6 8C 0A D4		        sty WSYNC
   496 44D9 88			        dey
   497 44DA 10 F7		        bpl z1
   498 				        
   499 44DC A9 00		        lda #$00
   500 44DE 8D 18 C0		        sta COLPF2
   501 44E1 8D 17 C0		        sta COLPF1
   502 44E4 8D 1A C0		        sta COLBK
   503 44E7 CA			        dex
   504 44E8 10 E2		        bpl znik
   505 				        
   506 44EA A9 0D		        lda #$0d
   507 44EC 20 1B 5B		        jsr SOUND.SOUND_
   508
   509 				;**********************
   510
   511 44EF A9 00		        lda #0
   512 44F1 8D 8B 02		        sta CNUM
   513 44F4 8D 91 02		        sta DEMO
   514 44F7 4C 82 42		        jmp TITLE
   515 				                
   516 				;**********************
   517
   518 				;* displayy scene
   519
   520 44FA A2 06		DIWA:   ldx #6
   521 44FC 20 7D 46		        jsr WAIT
   522 				        
   523 44FF A9 5C		DISP:   lda #92
   524 4501 CD 0B D4		        cmp VCOUNT
   525 4504 D0 FB		        bne *-3
   526 				        
   527 4506 20 5F 45		        jsr CLS
   528 				        
   529 				;* ground ---------------
   530
   531 4509 A2 1E		        ldx #30
   532 				        
   533 450B 8A			grou:   txa
   534 450C 48			        pha
   535 450D A0 0E		        ldy #14
   536 450F A9 90		        lda #16+$80
   537 4511 20 72 45		        jsr PUT_
   538 4514 68			        pla
   539 4515 AA			        tax
   540 4516 CA			        dex
   541 4517 CA			        dex
   542 4518 10 F1		        bpl grou
   543 				        
   544 				;* stars
   545
   546 451A A0 20		        ldy #32
   547 451C 98			star:   tya
   548 451D 48			        pha
   549 451E B9 3B 47		        lda STAT,y
   550 4521 AA			        tax
   551 4522 B9 3C 47		        lda STAT+1,y
   552 4525 A8			        tay
   553 4526 A9 00		        lda #0
   554 4528 20 72 45		        jsr PUT_
   555 452B 68			        pla
   556 452C A8			        tay
   557 452D 88			        dey
   558 452E 88			        dey
   559 452F 10 EB		        bpl star
   560 				        
   561 				;* disp robbo
   562
   563 4531 AE 84 02		        ldx FX
   564 4534 AC 85 02		        ldy FY
   565 4537 AD 96 02		        lda RUCH
   566 453A 20 72 45		        jsr PUT_
   567 				        
   568 				;* disp ship 
   569
   570 453D AE 80 02		ship:   ldx X_POS
   571 4540 AC 81 02		        ldy Y_POS
   572 4543 AD 9F 02		        lda HELP_20
   573 4546 0A			        asl
   574 4547 0A			        asl
   575 4548 0A			        asl
   576 4549 29 80		        and #$80
   577 454B 48			        pha
   578 454C 09 02		        ora #2
   579 454E 20 72 45		        jsr PUT_
   580 4551 AE 80 02		        ldx X_POS
   581 4554 E8			        inx
   582 4555 E8			        inx
   583 4556 AC 81 02		        ldy Y_POS
   584 4559 68			        pla
   585 455A 09 03		        ora #3
   586 455C 4C 72 45		        jmp PUT_
   587 				;* procedury ------------
   588 455F A2 00		CLS:    ldx #0
   589 4561 8A			        txa
   590 4562 9D 00 10		cls1:   sta SCRN+$000,x
   591 4565 9D 00 11		        sta SCRN+$100,x
   592 4568 9D 00 12		        sta SCRN+$200,x
   593 456B 9D 00 13		        sta SCRN+$300,x
   594 456E CA			        dex
   595 456F D0 F1		        bne cls1
   596 4571 60			        rts
   597 				;* ----------------------
   598 4572			PUT_:
   599 4572 E0 1F		        cpx #31
   600 4574 90 01		        bcc *+3
   601 4576 60			        rts
   602 				        
   603 4577 C0 0F		        cpy #15
   604 4579 90 01		        bcc *+3
   605 457B 60			        rts
   606 				        
   607 457C 48			        pha
   608 				        
   609 457D A9 00		        lda #0
   610 457F 85 89		        sta SCRA+1
   611 4581 98			        tya
   612 4582 0A			        asl
   613 4583 0A			        asl
   614 4584 0A			        asl
   615 4585 26 89		        rol SCRA+1
   616 4587 0A			        asl
   617 4588 26 89		        rol SCRA+1
   618 458A 0A			        asl
   619 458B 26 89		        rol SCRA+1
   620 				        
   621 458D 86 86		        stx ADDR
   622 458F 65 86		        adc ADDR
   623 4591 85 88		        sta SCRA
   624 				        
   625 4593 69 00		        adc <SCRN
   626 4595 85 88		        sta SCRA
   627 4597 A9 10		        lda >SCRN
   628 4599 65 89		        adc SCRA+1
   629 459B 85 89		        sta SCRA+1
   630 				        
   631 459D A9 00		        lda #0
   632 459F 85 86		        sta ADDR ;-invr
   633 				        
   634 45A1 68			        pla
   635 45A2 0A			        asl
   636 45A3 66 86		        ror ADDR
   637 				        
   638 45A5 C9 20		        cmp #32
   639 45A7 90 02		        bcc *+4
   640 45A9 69 1F		        adc #31
   641 				        
   642 45AB 05 86		        ora ADDR
   643 				        
   644 45AD AA			        tax
   645 45AE A0 00		        ldy #0
   646 45B0 91 88		        sta (SCRA),y
   647 45B2 C8			        iny
   648 45B3 E8			        inx
   649 45B4 8A			        txa
   650 45B5 91 88		        sta (SCRA),y
   651 				        
   652 45B7 18			        clc
   653 45B8 69 1F		        adc #31
   654 45BA AA			        tax
   655 45BB A0 20		        ldy #32
   656 45BD 91 88		        sta (SCRA),y
   657 45BF C8			        iny
   658 45C0 E8			        inx
   659 45C1 8A			        txa
   660 45C2 91 88		        sta (SCRA),y
   661 				        
   662 45C4 60			        rts
   663 				        
   664 				;* Big robbo ------------
   665
   666 45C5			BIGR:
   667 45C5 A2 03		        ldx #3
   668 45C7 AD 0A E8		ccol:   lda RND
   669 45CA 29 1F		        and #31
   670 45CC D0 07		        bne nocc
   671 45CE B5 0C		        lda COLOR0,x
   672 45D0 18			        clc
   673 45D1 69 10		        adc #$10
   674 45D3 95 0C		        sta COLOR0,x
   675 45D5 CA			nocc:   dex
   676 45D6 10 EF		        bpl ccol
   677 				        
   678 45D8 A2 04		        ldx #4
   679 				        
   680 45DA 8A			big0:   txa
   681 45DB 48			        pha
   682 				        
   683 45DC 8D 95 02		        sta HLP
   684 45DF 0A			        asl 
   685 45E0 6D 95 02		        adc HLP
   686 45E3 69 01		        adc <(SCRN+1)
   687 45E5 85 88		        sta SCRA
   688 45E7 A9 10		        lda >SCRN
   689 45E9 85 89		        sta SCRA+1
   690 				        
   691 45EB BD 74 46		        lda ROBO,x
   692 				        
   693 45EE 0A			        asl
   694 45EF 0A			        asl
   695 45F0 0A			        asl
   696 45F1 85 86		        sta ADDR
   697 				        
   698 45F3 A2 07		        ldx #7
   699 				        
   700 45F5 8A			big1:   txa
   701 45F6 48			        pha
   702 				        
   703 45F7 A9 00		        lda #0
   704 45F9 A0 00		        ldy #0
   705 				        
   706 45FB A6 86		        ldx ADDR
   707 45FD BD E8 0B		        lda IFNT_RAM+$3e8,x
   708 4600 8D 95 02		        sta HLP
   709 				        
   710 4603 A2 03		big3:   ldx #3
   711
   712 4605 0E 95 02		big4:   asl HLP
   713 4608 08			        php
   714 4609 2A			        rol
   715 460A 28			        plp
   716 460B 2A			        rol
   717 460C CA			        dex
   718 460D 10 F6		        bpl big4
   719 				        
   720 460F 39 F0 02		        and RAM_MASK,y
   721 4612 91 88		        sta (SCRA),y
   722 				        
   723 4614 A9 00		        lda #0
   724 4616 C8			        iny
   725 4617 C0 01		        cpy #1
   726 4619 F0 E8		        beq big3
   727 				        
   728 461B 20 4C 46		        jsr ROLM
   729 				        
   730 461E 18			        clc
   731 461F A5 88		        lda SCRA
   732 4621 69 10		        adc #16
   733 4623 85 88		        sta SCRA 
   734 4625 90 02		        bcc *+4
   735 4627 E6 89		        inc SCRA+1
   736 				        
   737 4629 E6 86		        inc ADDR
   738 				        
   739 462B 68			        pla
   740 462C AA			        tax
   741 462D CA			        dex
   742 462E 10 C5		        bpl big1
   743 				        
   744 4630 68			        pla
   745 4631 AA			        tax
   746 4632 CA			        dex
   747 4633 10 A5		        bpl big0
   748 				        
   749 				;* rotate mask ----------
   750
   751 4635 A5 02		        lda RTCLOKL ;HELP20
   752 4637 4A			        lsr
   753 4638 29 01		        and #1
   754 463A D0 23		        bne rts_
   755 				        
   756 463C AD 0A E8		        lda RND
   757 463F 29 1F		        and #31
   758 4641 D0 03		        bne rotm      
   759 4643 EE 9C 02		        inc ROTM_HLP
   760 				        
   761 4646 AD 9C 02		rotm:   lda ROTM_HLP
   762 4649 4A			        lsr
   763 464A 90 14		        bcc rorm
   764 				        
   765 				;* rotate left mask
   766
   767 464C A2 01		rolm:   ldx #1
   768
   769 464E 0E F1 02		rol1:   asl RAM_MASK+1
   770 4651 2E F0 02		        rol RAM_MASK
   771 4654 08			        php
   772 4655 6E F1 02		        ror RAM_MASK+1
   773 4658 28			        plp
   774 4659 2E F1 02		        rol RAM_MASK+1
   775 				        
   776 465C CA			        dex
   777 465D 10 EF		        bpl rol1
   778 				        
   779 465F 60			rts_:   rts
   780
   781 				;* rotate right mask
   782
   783 4660 A2 01		rorm:   ldx #1
   784
   785 4662 4E F0 02		ror1:   lsr RAM_MASK
   786 4665 6E F1 02		        ror RAM_MASK+1
   787 4668 08			        php
   788 4669 2E F0 02		        rol RAM_MASK
   789 466C 28			        plp
   790 466D 6E F0 02		        ror RAM_MASK
   791 				        
   792 4670 CA			        dex
   793 4671 10 EF		        bpl ror1
   794 4673 60			        rts
   795 				        
   796 4674 00 01 02 02 01	ROBO    .byte $00, $01, $02, $02, $01
   797
   798 4679 00 00		MASK    .byte $00, $00
   799 467B FA 5A		        .byte %11111010, %01011010
   800 				        
   801 				;* wait one frame
   802 467D 20 83 46		WAIT:   jsr HALT
   803 4680 CA			        dex
   804 4681 D0 FA		        bne WAIT
   805 				        
   806 4683 A5 02		HALT    lda RTCLOKL
   807 4685 C5 02		        cmp RTCLOKL
   808 4687 F0 FC		        beq *-2
   809 4689 60			        rts
   810 				;* tst trigger
   811 468A AD 10 C0		TETR:   lda TRIG0
   812 468D 60			        rts
   813 				        
   814 				;* wait for line --------
   815 468E EC 0B D4		WLIN:   cpx VCOUNT
   816 4691 D0 FB		        bne WLIN
   817 4693 8D 17 C0		        sta COLPF1
   818 4696 60			        rts
   819 				                
   820 				;------------------------
   821 4697 00 B2 B4 B8 00 00	COLS     .byte $00, $b2, $b4, $b8, $00, $00
   822 469D 00 C2 78 0C B4 00	         .byte $00, $c2, $78, $0c, $b4, $00
   823
   824 				;PAL----------------------------------------
   825 				;        .byte $00, $72, $74, $78, $00, $00
   826 				;        .byte $00, $32, $c8, $0c, $74, $00
   827 				        
   828 				;------------------------
   829 46A3 11 19 18 19 0E 10 + TBUF    .byte "1989.09.18 "
   830 = 000B			HALE    equ *-TBUF
   831 46AE 2A 21 2E 35 33 3A +         .byte "JANUSZ PELC"
   832 				;        align 1024
   833 46B9 70 70		TPDL    .byte $70, $70 ;, $70
   834
   835 46BB 30 4A 00 10 00 0A	        .byte $30, $4A, <SCRN, >SCRN, $00, $0A
   836 46C1 00 0A 00 0A 00 0A +         .byte $00, $0A, $00, $0A, $00, $0A, $00, $0A
   837 46C9 00 0A 00 0A 40 A0 +         .byte $00, $0A, $00, $0A, $40, $A0, $42, <TEXT_RAM, >TEXT_RAM
   838 				        
   839 				;        .byte $41, <TPDL, >TPDL
   840 				        
   841 46D2 30 02 30 02 10 02 +         .byte $30, $02, $30, $02, $10, $02, $d0, $02, $02
   842 46DB 40 A0 4C 2B 47 00 +         .byte $40, $A0, $4c, <LINE, >LINE, $00, $42
   843 46E2 80 10 02 02 02 02 +         .byte <(SCRN+128), >(SCRN+128), $02, $02, $02, $02, $02, $02
   844 46EA 02 00 4C 2B 47 41 +         .byte $02, $00, $4c, <LINE, >LINE, $41, <TPDL, >TPDL 
   845
   846 46F2 70 70 70 70 70 70 + CDL1    .byte $70, $70, $70, $70, $70, $70, $44, <SCRN, >SCRN
   847 46FB 04 04 04 04 04 04 +         .byte $04, $04, $04, $04, $04, $04, $04, $04, $04
   848 4704 04 04 04 04 04 04 +         .byte $04, $04, $04, $04, $04, $04, $41, <CDL1, >CDL1
   849
   850 470D 70 70 70 70 70 42 + CDL2    .byte $70, $70, $70, $70, $70, $42, <SCRN, >SCRN, $02
   851 4716 02 02 02 02 02 02 +         .byte $02, $02, $02, $02, $02, $02, $02, $02, $02
   852 471F 02 02 02 02 02 02 +         .byte $02, $02, $02, $02, $02, $02, $02, $02, $02
   853 4728 41 0D 47		        .byte $41, <CDL2, >CDL2
   854 				;------------------------
   855 472B FF FF FF FF FF FF + LINE     .byte $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
   856 4733 FF FF FF FF FF FF +          .byte $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
   857 				;------------------------
   858 				;------------------------
   859 473B 00 00		STAT    .byte 0,   0
   860 473D 1A 00		        .byte 26,  0
   861 473F 11 01		        .byte 17,  1
   862 4741 1E 01		        .byte 30,  1
   863 4743 10 02		        .byte 16,  2
   864 4745 18 03		        .byte 24,  3
   865 4747 1C 04		        .byte 28,  4
   866 4749 05 04		        .byte  5,  4
   867 474B 12 08		        .byte 18,  8
   868 474D 19 08		        .byte 25,  8
   869 474F 06 09		        .byte  6,  9
   870 4751 0C 0A		        .byte 12, 10
   871 4753 09 02		        .byte  9,  2
   872 4755 0E 05		        .byte 14,  5
   873 4757 01 06		        .byte  1,  6
   874 4759 03 0C		        .byte  3, 12
   875 475B 1A 0C		        .byte 26, 12
   876 				        
   877 				;-------- end TITLE.ASM
   878 				;        icl 'inc/languages.asm'
   879 				.ENDL
   284 475D			        icl 'inc/game.asm'
Source: game.asm
     1 475D			GAME      .LOCAL
     2 				;-------- R1.ASM
     3
     4 475D 40 70 70 F0 64	CVDL    .byte $40, $70, $70, $F0, $64
     5 4762 00 10 24 24		DLSA    .byte <SCRN, >SCRN, $24, $24
     6 4766 24 24 24 24 24 24 +         .byte $24, $24, $24, $24, $24, $24, $24, $24
     7 476E 24 24 24 24 24 24 +         .byte $24, $24, $24, $24, $24, $24, $24, $24
     8 4776 24 84 30 30 42	        .byte $24, $84, $30, $30, $42
     9 477B 25 03 02		DLLA    .byte <RAM_INFO, >RAM_INFO, $02 ; zmieni na RAM_INFO
    10 477E 00 41		        .byte $00, $41
    11 4780 00 03		        .byte <RAM_CVDL, >RAM_CVDL ; zmieni na RAM_CVDL
    12 				        
    13 4782 00 00 0B 0B 0B 0B + INFO:   .byte $00, $00, $0b, $0b, $0b, $0b, $0b, $0b
    14 478A 00 00 4D 4E 0B 0B	        .byte $00, $00, $4d, $4e, $0b, $0b
    15 4790 00 00 49 4A 0B 0B	        .byte $00, $00, $49, $4a, $0b, $0b
    16 4796 00 00 55 56 0B 0B	        .byte $00, $00, $55, $56, $0b, $0b
    17 479C 00 00 51 52 0B 0B	        .byte $00, $00, $51, $52, $0b, $0b
    18 47A2 00 00 45 46 0B 0B	        .byte $00, $00, $45, $46, $0b, $0b
    19 47A8 00 00		        .byte $00, $00
    20 47AA 00 00 01 01 01 01 +         .byte $00, $00, $01, $01, $01, $01, $01, $01
    21 47B2 00 00 4F 50 01 01	        .byte $00, $00, $4f, $50, $01, $01
    22 47B8 00 00 4B 4C 01 01	        .byte $00, $00, $4b, $4c, $01, $01
    23 47BE 00 00 57 58 01 01	        .byte $00, $00, $57, $58, $01, $01
    24 47C4 00 00 53 54 01 01	        .byte $00, $00, $53, $54, $01, $01
    25 47CA 00 00 47 48 01 01	        .byte $00, $00, $47, $48, $01, $01
    26 47D0 00 00		        .byte $00, $00
    27 47D2 31 22 00 30 21 32 + DINF    .byte "QB PARTY 2016 DEMO VERSION              "
    28 				;DINF    .byte "DOWNLOAD CONTENT DEMO VERSION           "
    29 				;DINF    .byte "DOWNLOAD CONTENT FULL VERSION           "
    30 				;DINF    .byte "CARTRIDGE VERSION                       "
    31
    32 = 009D			CVDL_SIZE = *-CVDL
    33 = 0005			DLSA_OFFSET = DLSA-CVDL
    34 = 001E			DLLA_OFFSET = DLLA-CVDL
    35 = 0025			INFO_OFFSET = INFO-CVDL
    36 = 0075			DINF_OFFSET = DINF-CVDL
    37
    38 = 0305			RAM_DLSA = RAM_CVDL + DLSA_OFFSET
    39 = 031E			RAM_DLLA = RAM_CVDL + DLLA_OFFSET
    40 = 0325			RAM_INFO = RAM_CVDL + INFO_OFFSET
    41 = 0375			RAM_DINF = RAM_CVDL + DINF_OFFSET
    42 				        
    43 47FA			PLAY:
    44 47FA A9 00		pipa:   lda #0
    45 47FC 85 07		        sta SDMCTL
    46 47FE 8D 87 02		        sta VSF
    47 4801 8D 92 02		        sta SCOR
    48 4804 8D 93 02		        sta SCOR+1
    49 4807 8D 94 02		        sta SCOR+2
    50 480A 20 83 46		        jsr TITLE.HALT
    51 480D 20 FC 4A		        jsr CHNMON
    52 				        
    53 4810 A9 0F		        lda #$0f
    54 4812 8D 80 02		        sta X_POS
    55 4815			pipa1:
    56 4815 A9 1F		        lda #$1f
    57 4817 8D 81 02		        sta Y_POS
    58 481A			pipa2:
    59 481A A9 13		        lda #$13
    60 481C 20 F8 56		        jsr PUT_
    61 481F CE 81 02		        dec Y_POS
    62 4822 10 F6		        bpl pipa2
    63 4824 CE 80 02		        dec X_POS
    64 4827 10 EC		        bpl pipa1
    65 4829 8E 8F 02		        stx LSTE
    66 482C 20 83 46		setup:  jsr TITLE.HALT
    67 482F A9 0C		        lda >FONT_RAM
    68 4831 8D F6 02		        sta SCHBASE
    69 4834 A9 00		        lda <RAM_CVDL
    70 4836 85 05		        sta SDLSTL
    71 4838 A9 03		        lda >RAM_CVDL
    72 483A 85 06		        sta SDLSTH
    73 				        
    74 483C AD 87 02		setu1:  lda VSF
    75 483F D0 FB		        bne setu1
    76 				             
    77 4841 A9 00		        lda <SCRN
    78 4843 8D 05 03		        sta RAM_DLSA
    79 4846 85 8C		        sta FADR
    80 4848 A9 10		        lda >SCRN
    81 484A 8D 06 03		        sta RAM_DLSA+1
    82 484D 85 8D		        sta FADR+1
    83 				        
    84 484F A9 00		        lda #0
    85 4851 8D 0E D4		        sta NMIEN
    86 4854 A9 53		        lda <DLI
    87 4856 8D 06 02		        sta VDLI
    88 4859 A9 59		        lda >DLI
    89 485B 8D 07 02		        sta VDLI+1
    90 485E A9 C0		        lda #$c0
    91 4860 8D 0E D4		        sta NMIEN
    92 				;*-----------------
    93 4863 A9 FF		PLA1:   lda #$ff
    94 4865 20 1B 5B		        jsr SOUND.SOUND_
    95 				        
    96 4868 AD 91 02		        lda DEMO
    97 486B F0 05		        beq plaj1
    98 486D A9 03		        lda #3          ; czas demo
    99 486F 8D 22 02		        sta CDTMR2
   100 4872			plaj1:
   101 4872 A9 25		        lda <RAM_INFO
   102 4874 8D 1E 03		        sta RAM_DLLA
   103 4877 A9 03		        lda >RAM_INFO
   104 4879 8D 1F 03		        sta RAM_DLLA+1
   105 487C A9 02		        lda #$02
   106 487E AE 91 02		        ldx DEMO
   107 4881 F0 02		        beq plaj2
   108 4883 09 80		        ora #$80
   109 4885			plaj2:
   110 4885 8D 20 03		        sta RAM_DLLA+2
   111 4888 AD 91 02		        lda DEMO
   112 488B F0 02		        beq plaj3
   113 488D A9 02		        lda #$02
   114 488F			plaj3:
   115 488F 8D 21 03		        sta RAM_DLLA+3
   116
   117 4892 20 D0 56		        jsr UNPACK_CAVE
   118 				;* kolory, srubki...
   119 				        
   120 4895 AD F1 05		        lda CAPA+1
   121 4898 8D 8E 02		        sta ZEBR
   122 				        
   123 489B A2 04		        ldx #4
   124 489D			plaj4:
   125 489D BD F2 05		        lda CAPA+2,x
   126 48A0 95 0C		        sta COLOR0,x
   127 48A2 CA			        dex
   128 48A3 10 F8		        bpl plaj4
   129 				        
   130 				        
   131 48A5 AD F7 05		        lda CAPA+7
   132 48A8 85 0B		        sta PCOLR3
   133 				        
   134 48AA A9 FF		        lda #$ff
   135 48AC A2 08		        ldx #8
   136 48AE			plaj5:
   137 48AE 9D 08 C0		        sta SIZEP0,x
   138 48B1 CA			        dex
   139 48B2 10 FA		        bpl plaj5
   140 				        
   141 48B4 A9 40		        lda #$40
   142 48B6 8D 00 C0		        sta HPOSP0
   143 48B9 A9 60		        lda #$60
   144 48BB 8D 01 C0		        sta HPOSP1
   145 48BE A9 80		        lda #$80
   146 48C0 8D 02 C0		        sta HPOSP2
   147 48C3 A9 A0		        lda #$a0
   148 48C5 8D 03 C0		        sta HPOSP3
   149 				        
   150 48C8 A9 04		        lda #$04
   151 48CA 8D 1B C0		        sta PRIOR
   152 				        
   153 48CD A2 01		        ldx #1
   154 48CF 8E 89 02		        stx TELE
   155 48D2 CA			        dex
   156 48D3 8E 8C 02		        stx KEYS
   157 48D6 8E 90 02		        stx NABO
   158 48D9 8E 96 02		        stx RUCH
   159 				        
   160 48DC A9 0D		        lda #%1101
   161 48DE 8D 86 02		        sta LM
   162 				        
   163 				                
   164 48E1 A9 21		        lda #33
   165 48E3 85 07		        sta SDMCTL
   166 48E5 20 83 46		        jsr TITLE.HALT
   167
   168 48E8 20 83 4A		        jsr ENTCV
   169
   170 				        
   171 				;* play loop
   172
   173 48EB			PCLO:   
   174 				;        jsr wait_trig
   175 48EB A9 00		        lda #0
   176 48ED 8D 8A 02		        sta FAC
   177 48F0 20 F5 49		        jsr CHNGCV
   178 				        
   179 48F3 AD 89 02		        lda TELE
   180 48F6 F0 03		        beq plo1
   181 48F8 8D 8A 02		        sta FAC
   182 48FB			plo1:        
   183 48FB AD 91 02		        lda DEMO
   184 48FE F0 19		        beq plo3
   185 4900 AD 8A 02		        lda FAC
   186 4903 F0 2D		        beq ZYTY
   187 4905 20 40 4C		        jsr TETR
   188 4908 D0 08		        bne plo2
   189 490A A2 10		        ldx #16
   190 490C 20 7D 46		        jsr TITLE.WAIT
   191 				                
   192 490F 4C 82 42		        jmp TITLE.TITLE
   193 4912			plo2:
   194 4912 AD 22 02		        lda CDTMR2
   195 4915 D0 D4		        bne PCLO
   196 4917 F0 41		        beq NXCV
   197 4919 AD 0F E8		plo3:   lda SKSTAT
   198 491C C9 FB		        cmp #$fb
   199 491E D0 0B		        bne PL1
   200 4920 AD 09 E8		        lda STIMER
   201 4923 EA			        nop
   202 4924 EA			        nop
   203 4925 EA			        nop
   204 4926 EA			        nop
   205 4927 C9 1C		        cmp #$1c
   206 4929 F0 07		        beq ZYTY
   207 492B AD 8A 02		PL1:    lda FAC
   208 492E 30 2A		        bmi NXCV
   209 4930 D0 B9		        bne PCLO
   210
   211 				;* zabity
   212
   213 4932 A9 00		ZYTY:   lda #0
   214 4934 8D 96 02		        sta RUCH
   215 4937 85 02		        sta RTCLOKL
   216 4939 8D 22 02		        sta CDTMR2
   217 				        
   218 493C 20 AA 49		        jsr WYBC
   219 				        
   220 493F AD 91 02		        lda DEMO
   221 4942 D0 16		        bne NXCV
   222 				        
   223 4944 F8			        sed
   224 4945 AD 8D 02		        lda LIVS
   225 4948 38			        sec
   226 4949 E9 01		        sbc #1
   227 494B 8D 8D 02		        sta LIVS
   228 494E D8			        cld
   229 494F B0 06		        bcs zyty1
   230 4951 EE 8D 02		        inc LIVS
   231 				        
   232 4954 4C 82 42		        jmp TITLE.TITLE
   233 4957 4C 63 48		zyty1:  jmp PLA1
   234
   235 				;* nxtcv
   236 				                
   237 495A A9 0F		NXCV:   lda #15
   238 495C 8D 80 02		        sta X_POS
   239
   240 495F			nxcv1:        
   241 495F A9 00		        lda #0
   242 4961 8D 96 02		        sta RUCH
   243 				        
   244 4964 A9 1F		        lda #31
   245 4966 8D 81 02		        sta Y_POS 
   246 4969			nxcv2:   
   247 4969 A9 13		        lda #$13
   248 496B 20 F8 56		        jsr PUT_
   249 496E CE 81 02		        dec Y_POS
   250 4971 10 F6		        bpl nxcv2
   251 4973 20 FC 4A		        jsr CHNMON
   252 4976 AD 80 02		        lda X_POS
   253 4979 4A			        lsr
   254 497A 90 03		        bcc nxcv3
   255 497C EE A0 02		        inc CNTR
   256 497F A2 01		nxcv3:  ldx #1
   257 4981 20 7D 46		        jsr TITLE.WAIT    
   258 				        
   259 4984 CE 80 02		        dec X_POS
   260 4987 10 D6		        bpl nxcv1
   261 				        
   262 4989 AD 8B 02		        lda CNUM
   263 498C C9 37		        cmp #55
   264 498E 90 0F		        bcc nxcv5
   265 4990 AE 91 02		        ldx DEMO
   266 4993 F0 07		        beq nxcv4
   267 4995 A9 00		        lda #0
   268 4997 85 02		        sta RTCLOKL
   269 4999 4C 82 42		        jmp TITLE.TITLE
   270 499C 4C 82 43		nxcv4:  jmp TITLE.CONGR
   271 499F			nxcv5:  
   272 499F C9 0F		        cmp #15
   273 49A1 90 01		        bcc nxcv6
   274 49A3 EA			        nop
   275 				;        jsr LOAD
   276 49A4 EE 8B 02		nxcv6:  inc CNUM
   277 49A7 4C 63 48		        jmp PLA1
   278 				        
   279 				;* wybu komnate
   280
   281 49AA 20 E6 49		WYBC:   jsr WHILE
   282
   283 49AD A9 00		        lda #0
   284 49AF 20 1B 5B		        jsr SOUND.SOUND_
   285 				        
   286 49B2 A9 1F		        lda #31
   287 49B4 8D 81 02		        sta Y_POS
   288
   289 49B7			wbc1:        
   290 49B7 A9 0F		        lda #15
   291 49B9 8D 80 02		        sta X_POS
   292 49BC 20 58 57		WBC2:   jsr TST_
   293 49BF 29 7F		        and #$7f
   294 49C1 C9 20		        cmp #$20
   295 49C3 F0 17		        beq WBC3        
   296 49C5 C9 13		        cmp #$13
   297 49C7 F0 13		        beq WBC3
   298 49C9 C9 11		        cmp #$11
   299 49CB F0 0F		        beq WBC3
   300 49CD C9 05		        cmp #$05
   301 49CF F0 0B		        beq WBC3
   302 49D1 AD 0A E8		        LDA RANDOM
   303 49D4 29 03		        and #3
   304 49D6 69 61		        adc #$61
   305 49D8 A0 00		        ldy #$00
   306 49DA 91 86		        sta (ADDR),y
   307 49DC CE 80 02		WBC3:   dec X_POS
   308 49DF 10 DB		        bpl WBC2
   309 49E1 CE 81 02		        dec Y_POS
   310 49E4 10 D1		        bpl wbc1
   311 49E6			WHILE:  
   312 49E6 A9 30		        lda #$30
   313 49E8 8D 23 02		        sta CDTMR2+1
   314 				        
   315 49EB			whil: 
   316 49EB 20 F5 49		        jsr CHNGCV
   317 49EE AD 23 02		        lda CDTMR2+1
   318 49F1 D0 F8		        bne whil
   319 49F3 60			        rts
   320 				        
   321 49F4 60			LOAD:   rts
   322
   323 49F5			CHNGCV:
   324 49F5 AD 21 02		        lda CDTMR1+1
   325 49F8 D0 FB		        bne CHNGCV
   326 				        
   327 49FA A9 07		        lda #7
   328 49FC 8D 21 02		        sta CDTMR1+1
   329 49FF EE A0 02		        inc CNTR
   330 				        
   331 4A02 A0 00		        ldy #$00
   332 4A04 8C 83 02		        sty Y1
   333 4A07 A2 00		chca1:  ldx #$00
   334 4A09 8E 82 02		        stx X1
   335 4A0C AD 82 02		CHC1:   lda X1
   336 4A0F 8D 80 02		        sta X_POS
   337 4A12 AD 83 02		        lda Y1
   338 4A15 8D 81 02		        sta Y_POS
   339 4A18 20 58 57		        jsr TST_
   340 4A1B A8			        tay
   341 4A1C 0A			        asl
   342 4A1D B0 1D		        bcs NOR_
   343 4A1F C0 61		        cpy #$61
   344 4A21 B0 26		        bcs NXT_
   345 4A23 A8			        tay
   346 4A24 B9 11 58		        lda PROC,y
   347 4A27 BE 12 58		        ldx PROC+1,y
   348 4A2A F0 39		        beq CHCC
   349 4A2C 8D FE 3B		        sta inflate_rom.CALL+1
   350 4A2F 8E FF 3B		        stx inflate_rom.CALL+2
   351
   352 				;* niemiganie
   353 4A32			chca2:        
   354 4A32 AD 0B D4		        lda VCOUNT
   355 4A35 C9 5D		        cmp #93
   356 4A37 90 F9		        bcc chca2
   357 				        
   358 4A39 4C FD 3B		        jmp inflate_rom.CALL
   359 				        
   360 				;* normalny elem
   361 4A3C C0 A0		NOR_:   cpy #$a0
   362 4A3E F0 25		        beq CHCC
   363 4A40 98			        tya
   364 4A41 29 7F		        and #$7f
   365 4A43 20 F8 56		        jsr PUT_
   366 4A46 4C 65 4A		        jmp CHCC
   367 				        
   368 				;* nastpny elem
   369 4A49 C0 7B		NXT_:   cpy #$7b
   370 4A4B B0 18		        bcs CHCC
   371 				        
   372 4A4D 98			        tya
   373 4A4E C9 6D		        cmp #$6d
   374 4A50 D0 09		        bne NXXX
   375 4A52 A0 00		        ldy #$0
   376 4A54 8C 89 02		        sty TELE
   377 4A57 C8			        iny
   378 4A58 8C 8A 02		        sty FAC
   379 				        
   380 4A5B 38			NXXX:   sec
   381 4A5C E9 61		        sbc #$61
   382 4A5E AA			        tax
   383 4A5F BD F7 57		        lda NEXT,x
   384 4A62 20 F8 56		        jsr PUT_
   385 				        
   386 				;* ----
   387 4A65 EE 82 02		CHCC:   inc X1
   388 4A68 AD 82 02		        lda X1
   389 4A6B C9 10		        cmp #16
   390 4A6D B0 03		        bcs chcc1
   391 4A6F 4C 0C 4A		        jmp CHC1
   392 4A72			chcc1:        
   393 4A72 EE 83 02		        inc Y1
   394 4A75 AD 83 02		        lda Y1
   395 4A78 C9 1F		        cmp #31
   396 4A7A B0 03		        bcs chcc2
   397 4A7C 4C 07 4A		        jmp chca1
   398 4A7F 4C FC 4A		chcc2:  jmp CHNMON    
   399 4A82 60			        rts  
   400 				        
   401 				;***********************        
   402
   403 4A83			ENTCV:
   404 4A83 AD 8B 02		        lda CNUM
   405 4A86 0A			        asl
   406 4A87 0A			        asl
   407 4A88 29 F0		        and #$f0
   408 4A8A 18			        clc
   409 4A8B 69 0F		        adc #$0f
   410 4A8D AA			        tax
   411 4A8E A0 0F		        ldy #$0f
   412 4A90			entcv1:
   413 4A90 BD 00 5F		        lda MFNT,x
   414 4A93 99 00 0C		        sta FONT_RAM,y
   415 4A96 BD 00 60		        lda MFNT+$0100,x
   416 4A99 99 00 0D		        sta FONT_RAM+$0100,y
   417 4A9C CA			        dex
   418 4A9D 88			        dey
   419 4A9E 10 F0		        bpl entcv1
   420 				        
   421 				;* display
   422
   423 4AA0 A2 0F		        ldx #$0f
   424 4AA2 8E 80 02		        stx X_POS
   425 4AA5 A0 1F		        ldy #$1f
   426 4AA7 8C 81 02		        sty Y_POS
   427 4AAA			entcv2: 
   428 4AAA A9 13		        lda #$13
   429 4AAC 20 F8 56		        jsr PUT_
   430 4AAF CE 80 02		        dec X_POS
   431 4AB2 10 F6		        bpl entcv2
   432 4AB4 A9 10		        lda #$10
   433 4AB6 8D 80 02		        sta X_POS
   434 4AB9 A9 00		entcv3: lda #$00
   435 4ABB 8D 81 02		        sta Y_POS
   436 4ABE 20 58 57		DSC1:   jsr TST_
   437 4AC1 C9 2A		        cmp #$2a
   438 4AC3 D0 05		        bne entcv4
   439 4AC5 20 8C 4D		        jsr MFX1
   440 				;        dec Y_POS
   441 4AC8 A9 1B		        lda #$1b
   442 4ACA			entcv4: 
   443 4ACA C9 2B		        cmp #$2b
   444 4ACC D0 0A		        bne entcv5
   445 4ACE AE 8B 02		        ldx CNUM
   446 4AD1 EC 8F 02		        cpx LSTE
   447 4AD4 D0 02		        bne entcv5
   448 4AD6 A9 E1		        lda #$E1
   449 4AD8			entcv5: 
   450 4AD8 20 F8 56		        jsr PUT_
   451 4ADB EE 81 02		        inc Y_POS
   452 4ADE AD 81 02		        lda Y_POS
   453 4AE1 C9 1F		        cmp #$1f
   454 4AE3 90 D9		        bcc DSC1
   455 4AE5 20 FC 4A		        jsr CHNMON
   456 4AE8 AD 80 02		        lda X_POS
   457 4AEB 4A			        lsr
   458 4AEC 90 03		        bcc entcv6
   459 4AEE EE A0 02		        inc CNTR
   460 4AF1 A2 01		entcv6: ldx #$01
   461 4AF3 20 7D 46		        jsr TITLE.WAIT
   462 4AF6 CE 80 02		        dec X_POS
   463 4AF9 10 BE		        bpl entcv3           
   464 4AFB 60			        rts
   465
   466 4AFC			CHNMON:
   467 4AFC 20 83 46		        jsr TITLE.HALT
   468 				        
   469 4AFF A9 00		        lda #0
   470 4B01 85 86		        sta ADDR
   471 4B03 AD A0 02		        lda CNTR
   472 4B06 18			        clc
   473 4B07 29 02		        and #2
   474 4B09 69 61		        adc >SFNT
   475 4B0B 85 87		        sta ADDR+1
   476 				        
   477 4B0D A0 FF		        ldy #$ff
   478 4B0F B1 86		CM1:    lda (ADDR),y
   479 4B11 99 00 0C		        sta FONT_RAM,y
   480 4B14 E6 87		        inc ADDR+1
   481 4B16 B1 86		        lda (ADDR),y
   482 4B18 99 00 0D		        sta FONT_RAM+$0100,y
   483 4B1B C6 87		        dec ADDR+1
   484 4B1D 88			        dey
   485 4B1E C0 DF		        cpy #$df ;#255-32
   486 4B20 D0 ED		        bne CM1
   487 				        
   488 4B22 A2 AF		        ldx #$af; #175
   489 4B24 B1 86		CM2:    lda (ADDR),y
   490 4B26 9D 00 0C		        sta FONT_RAM,x
   491 4B29 E6 87		        INC ADDR+1
   492 4B2B B1 86		        lda (ADDR),y
   493 4B2D 9D 00 0D		        sta FONT_RAM+$0100,x
   494 4B30 C6 87		        dec ADDR+1
   495 4B32 88			        dey
   496 4B33 CA			        dex
   497 4B34 E0 4F		        cpx #$4f; #175-96
   498 4B36 D0 EC		        bne CM2
   499 				        
   500 4B38 AD A1 02		        lda NOGA_HLP
   501 4B3B 18			        clc
   502 4B3C 29 01		        and #1
   503 4B3E 0A			        asl
   504 4B3F 69 61		        adc >SFNT
   505 4B41 85 87		        sta ADDR+1
   506 				        
   507 4B43 AE 96 02		        ldx RUCH
   508 4B46 F0 08		        beq FA1
   509 4B48 AE 8A 02		        ldx FAC
   510 4B4B F0 03		        beq FA1
   511 4B4D EE A1 02		        inc NOGA_HLP
   512 				        
   513 				;        ldx #$50; #80
   514 				;cm21:    lda PLAY,x
   515 				;        sta CONSOL
   516 				;        dex
   517 				;        bpl cm21
   518 				        
   519 4B50 AD 86 02		FA1:    lda LM
   520 4B53 A0 04		        ldy #4
   521 4B55			fa11:
   522 4B55 88			        dey
   523 4B56 4A			        lsr
   524 4B57 B0 FC		        bcs fa11
   525 				        
   526 4B59 98			        tya
   527 4B5A 0A			        asl
   528 4B5B 0A			        asl
   529 4B5C 0A			        asl
   530 4B5D 0A			        asl
   531 4B5E 69 4F		        adc #$4f; #79
   532 4B60 A8			        tay
   533 				        
   534 4B61 A2 0F		        ldx #$0f
   535 4B63 B1 86		CM3:    lda (ADDR),y
   536 4B65 9D F0 0E		        sta FONT_RAM+$02f0,x
   537 4B68 E6 87		        inc ADDR+1
   538 4B6A B1 86		        lda (ADDR),y
   539 4B6C C6 87		        dec ADDR+1
   540 4B6E 9D F0 0F		        sta FONT_RAM+$03f0,x
   541 4B71 88			        dey
   542 4B72 CA			        dex
   543 4B73 10 EE		        bpl CM3
   544 				        
   545 4B75 60			        rts
   546 				;****************************
   547
   548 4B76 EE 80 02		RT_:    inc X_POS
   549 4B79 20 58 57		        jsr TST_
   550 4B7C F0 05		        beq rt1
   551 4B7E CE 80 02		        dec X_POS
   552 4B81 38			        sec
   553 4B82 60			        rts    
   554 4B83 CE 80 02		rt1:    dec X_POS
   555 4B86 20 EB 56		        jsr GET_
   556 4B89 EE 80 02		        inc X_POS
   557 4B8C 09 80		        ora #$80
   558 4B8E 20 F8 56		        jsr PUT_
   559 4B91 18			        clc
   560 4B92 60			        rts
   561 4B93 CE 80 02		LT_:    dec X_POS
   562 4B96 20 58 57		        jsr TST_
   563 4B99 F0 05		        beq lt1
   564 4B9B EE 80 02		        inc X_POS
   565 4B9E 38			        sec
   566 4B9F 60			        rts    
   567 4BA0 EE 80 02		lt1:    inc X_POS
   568 4BA3 20 EB 56		        jsr GET_
   569 4BA6 CE 80 02		        dec X_POS
   570 4BA9 20 F8 56		        jsr PUT_
   571 4BAC 18			        clc
   572 4BAD 60			        rts
   573 4BAE EE 81 02		DW_:    inc Y_POS
   574 4BB1 20 58 57		        jsr TST_
   575 4BB4 F0 05		        beq dw1
   576 4BB6 CE 81 02		        dec Y_POS
   577 4BB9 38			        sec
   578 4BBA 60			        rts
   579 4BBB CE 81 02		dw1:    dec Y_POS
   580 4BBE 20 EB 56		        jsr GET_
   581 4BC1 EE 81 02		        inc Y_POS
   582 4BC4 09 80		        ora #$80
   583 4BC6 20 F8 56		        jsr PUT_
   584 4BC9 18			        clc
   585 4BCA 60			        rts
   586 4BCB CE 81 02		UP_:    dec Y_POS
   587 4BCE 20 58 57		        jsr TST_
   588 4BD1 F0 05		        beq up1
   589 4BD3 EE 81 02		        inc Y_POS
   590 4BD6 38			        sec
   591 4BD7 60			        rts
   592 4BD8 EE 81 02		up1:    inc Y_POS
   593 4BDB 20 EB 56		        jsr GET_
   594 4BDE CE 81 02		        dec Y_POS
   595 4BE1 20 F8 56		        jsr PUT_
   596 4BE4 18			        clc
   597 4BE5 60			        rts
   598 4BE6 AD 86 02		FD_:    lda LM
   599 4BE9 A2 FF		        ldx #$ff
   600 4BEB E8			fd1:    inx
   601 4BEC 4A			        lsr
   602 4BED B0 FC		        bcs fd1
   603 4BEF BD FE 4B		        lda LMVT,x
   604 4BF2 8D 04 3C		        sta inflate_rom.JMP1+1
   605 4BF5 BD 02 4C		        lda LMVT+4,x
   606 4BF8 8D 05 3C		        sta inflate_rom.JMP1+2
   607 4BFB 4C 03 3C		        jmp inflate_rom.JMP1
   608 4BFE CB AE 93 76		LMVT    .byte <UP_, <DW_, <LT_, <RT_
   609 4C02 4B 4B 4B 4B		        .byte >UP_, >DW_, >LT_, >RT_
   610 				        
   611 4C06 CE 80 02		T_LT:   dec X_POS
   612 4C09 20 58 57		        jsr TST_
   613 4C0C EE 80 02		        inc X_POS
   614 4C0F 4C 33 4C		        jmp T_EX
   615 4C12 EE 80 02		T_RT:   inc X_POS
   616 4C15 20 58 57		        jsr TST_
   617 4C18 CE 80 02		        dec X_POS
   618 4C1B 4C 33 4C		        jmp T_EX
   619 4C1E CE 81 02		T_UP:   dec Y_POS
   620 4C21 20 58 57		        jsr TST_
   621 4C24 EE 81 02		        inc Y_POS
   622 4C27 4C 33 4C		        jmp T_EX
   623 4C2A EE 81 02		T_DW:   inc Y_POS
   624 4C2D 20 58 57		        jsr TST_
   625 4C30 CE 81 02		        dec Y_POS  ;<---------
   626 4C33 C9 A0		T_EX:   cmp #$a0
   627 4C35 D0 02		        bne tex1
   628 4C37 A9 00		        lda #$00
   629 4C39 29 7F		tex1:   and #$7f
   630 4C3B AA			        tax
   631 4C3C BD D3 58		        lda WHAT,x
   632 4C3F 60			        rts
   633 4C40			TETR:
   634 4C40 AD 10 C0		        lda TRIG0
   635 				        
   636 4C43 60			        rts     
   637 				;* pojawiaj
   638 4C44 AD 87 02		WFAC:   lda VSF
   639 4C47 F0 01		        beq wfa1
   640 4C49 60			        rts
   641 4C4A 20 83 46		wfa1:   jsr TITLE.HALT
   642 4C4D AD 87 02		        lda VSF
   643 4C50 F0 01		        beq wfa2
   644 4C52 60			        rts
   645 4C53 A9 0B		wfa2:   lda #$0b
   646 4C55 20 1B 5B		        jsr SOUND.SOUND_
   647 4C58 A9 6A		        lda #$6a
   648 4C5A 4C F8 56		        jmp PUT_
   649 				;* ruch
   650 4C5D AD 89 02		MFAC:   lda TELE
   651 4C60 C9 01		        cmp #1
   652 4C62 D0 03		        bne mfa1
   653 4C64 CE 89 02		        dec TELE
   654 4C67 A9 01		mfa1:   lda #1
   655 4C69 8D 8A 02		        sta FAC
   656 				        
   657 4C6C CE A2 02		        dec STRC
   658 4C6F 10 03		        bpl mfa2
   659 4C71 EE A2 02		        inc STRC
   660 4C74			mfa2:        
   661 4C74 AD 91 02		        lda DEMO
   662 4C77 F0 07		        beq mfa3
   663 4C79 AD 0A E8		        lda RANDOM
   664 4C7C 29 0F		        and #$0f
   665 4C7E F0 0A		        beq mfa4
   666 4C80			mfa3:
   667 				;        jsr TETR
   668 4C80 AD 10 C0		        lda TRIG0
   669 4C83 29 01		        and #1
   670 4C85 F0 03		        beq mfa4
   671 4C87 4C 23 4D		        jmp MFC1
   672 4C8A			mfa4:
   673 				;* strzelaj
   674 4C8A A9 00		        lda #0
   675 4C8C 8D 96 02		        sta RUCH
   676 				        
   677 4C8F AD A2 02		        lda STRC
   678 4C92 C9 FF		        cmp #$ff
   679 4C94 D0 05		        bne strz0
   680 4C96 A9 00		        lda #0
   681 4C98 8D A2 02		        sta STRC
   682 				;        jmp strz1  
   683 4C9B AD A2 02		strz0:  lda STRC
   684 4C9E F0 01		        beq strz1
   685 4CA0 60			        rts
   686 				        
   687 4CA1 AD 91 02		strz1:  lda DEMO
   688 4CA4 F0 05		        beq strz2
   689 4CA6 AD 86 02		        lda LM
   690 4CA9 10 02		        bpl strz3
   691 4CAB			strz2:
   692 				;        jsr KEJO
   693 				;        and JOY0
   694 4CAB A5 19		        lda JOY0
   695 4CAD			strz3:
   696 4CAD C9 0F		        cmp #$0f
   697 4CAF D0 01		        bne strz4
   698 4CB1 60			        rts
   699 4CB2 8D 86 02		strz4:  sta LM
   700 				        
   701 4CB5 AE 90 02		        ldx NABO
   702 4CB8 D0 04		        bne strz5
   703 4CBA EE A1 02		        inc NOGA_HLP
   704 4CBD 60			        rts
   705 4CBE			strz5:  
   706 4CBE 48			        pha
   707 4CBF F8			        sed
   708 4CC0 38			        sec
   709 4CC1 AD 90 02		        lda NABO
   710 4CC4 E9 01		        sbc #1
   711 4CC6 8D 90 02		        sta NABO
   712 4CC9 D8			        cld
   713 4CCA 68			        pla
   714 				        
   715 4CCB A2 06		        ldx #6
   716 4CCD 8E A2 02		        stx STRC
   717 				        
   718 4CD0 A2 FF		        ldx #$ff
   719 4CD2 E8			KIES:   inx
   720 4CD3 4A			        lsr
   721 4CD4 B0 FC		        bcs KIES
   722 4CD6 E0 04		        cpx #4
   723 4CD8 90 01		        bcc kie1
   724 4CDA 60			        rts
   725 4CDB			kie1:         
   726 4CDB 8A			        txa
   727 4CDC 0A			        asl
   728 4CDD AA			        tax
   729 4CDE BD F2 4C		        lda KIET,x
   730 4CE1 8D 07 3C		        sta inflate_rom.SJMP+1
   731 4CE4 BD F3 4C		        lda KIET+1,x
   732 4CE7 8D 08 3C		        sta inflate_rom.SJMP+2
   733 				        
   734 4CEA 20 06 3C		        jsr inflate_rom.SJMP
   735 4CED A9 01		        lda #$01
   736 4CEF 4C 1B 5B		        jmp SOUND.SOUND_
   737 				        
   738 4CF2 1B 52 42 52 AD 51 + KIET    .word PP1U, PP1D, PP1L, PP1R
   739
   740 				;*key to joy
   741 4CFA			KEJO:   
   742 4CFA A5 19		        lda JOY0
   743 4CFC 29 3F		        and #$3f
   744 4CFE AA			        tax                               
   745 				;        lda SKSTAT
   746 				;        lsr 
   747 				;        lsr
   748 				;        lsr
   749 4CFF A5 02		        lda RTCLOKL
   750 4D01 4A			        lsr
   751 4D02 29 01		        and #1
   752 4D04 F0 01		        beq kejo1
   753 4D06 60			        rts
   754 4D07 86 1A		kejo1:  stx JOY0+1
   755 4D09 E0 0E		        cpx #$0e
   756 4D0B D0 02		        bne kejo2
   757 4D0D A9 0E		        lda #%1110
   758 4D0F			kejo2:
   759 4D0F E0 0D		        cpx #$0d ;0f  
   760 4D11 D0 02		        bne kejo3
   761 4D13 A9 0D		        lda #%1101
   762 4D15			kejo3:  
   763 4D15 E0 0B		        cpx #$0b ;06
   764 4D17 D0 02		        bne kejo4
   765 4D19 A9 0B		        lda #%1011
   766 4D1B			kejo4:  
   767 4D1B E0 07		        cpx #$07
   768 4D1D D0 02		        bne kejo5
   769 4D1F A9 07		        lda #%0111
   770 4D21			kejo5:
   771 4D21 18			        clc
   772 4D22 60			        rts
   773 				;***********************
   774 4D23 AE 91 02		MFC1:   ldx DEMO
   775 4D26 F0 1C		        beq M1
   776 				        
   777 4D28 AD 96 02		        lda RUCH
   778 4D2B F0 07		        beq mfc11
   779
   780 4D2D AD 0A E8		        lda RANDOM
   781 4D30 29 0F		        and #15
   782 4D32 D0 0B		        bne mfc12         
   783
   784 4D34			mfc11:        
   785 4D34 AD 0A E8		        lda RANDOM
   786 4D37 29 03		        and #3
   787 4D39 AA			        tax
   788 4D3A BD C3 4E		        lda TMVS,x
   789 4D3D 10 07		        bpl M2
   790 4D3F AD 86 02		mfc12:  lda LM
   791 4D42 10 02		        bpl M2
   792 4D44			M1:     ;jsr KEJO
   793 4D44 A5 19		        lda JOY0
   794 				;        and JOY+1
   795 				        
   796 4D46 C9 0F		M2:     cmp #$0f
   797 4D48 F0 03		        beq mfc13
   798 4D4A 8D 86 02		        sta LM
   799 4D4D A2 01		mfc13:  ldx #1
   800 4D4F 8E 96 02		        stx RUCH
   801 				        
   802 4D52 4A			        lsr 
   803 4D53 90 23		        bcc MFUP
   804 4D55 4A			        lsr
   805 4D56 90 2A		        bcc MFDW
   806 4D58 4A			        lsr
   807 4D59 90 05		        bcc MFLT
   808 4D5B 4A			        lsr
   809 4D5C 90 0D		        bcc MFRT
   810 				        
   811 4D5E B0 2C		        bcs MFX1
   812
   813 4D60 20 93 4B		MFLT:   jsr LT_
   814 4D63 90 2C		        bcc MFEX
   815 4D65 CE 80 02		        dec X_POS
   816 4D68 4C FE 4D		        jmp PHAJ
   817 				        
   818 4D6B 20 76 4B		MFRT:   jsr RT_
   819 4D6E 90 21		        bcc MFEX
   820 4D70 EE 80 02		        inc X_POS
   821 4D73 90 03		        bcc MFUP
   822 4D75 4C FE 4D		        jmp PHAJ
   823
   824 4D78 20 CB 4B		MFUP:   jsr UP_
   825 4D7B 90 14		        bcc MFEX
   826 4D7D CE 81 02		        dec Y_POS
   827 4D80 B0 7C		        bcs PHAJ
   828 				 
   829 4D82 20 AE 4B		MFDW:   jsr DW_
   830 4D85 90 0A		        bcc MFEX
   831 4D87 EE 81 02		        inc Y_POS
   832 4D8A B0 72		        bcs PHAJ
   833 				;*********************                       
   834 4D8C A9 00		MFX1:   lda #0
   835 4D8E 8D 96 02		        sta RUCH
   836 4D91 20 58 57		MFEX:   jsr TST_
   837 4D94 20 F8 56		        jsr PUT_
   838 4D97 A5 88		        lda SCRA
   839 4D99 85 8C		        sta FADR
   840 4D9B A5 89		        lda SCRA+1
   841 4D9D 85 8D		        sta FADR+1
   842 				        
   843 4D9F AD 80 02		        lda X_POS
   844 4DA2 8D 84 02		        sta FX
   845 4DA5 AD 81 02		        lda Y_POS
   846 4DA8 8D 85 02		        sta FY
   847 				        
   848 4DAB AE 89 02		        ldx TELE
   849 4DAE CA			        dex
   850 4DAF D0 18		        bne mfex1
   851 				;* stworek ?        
   852 4DB1 20 1E 4C		        jsr T_UP
   853 4DB4 20 E9 4D		        jsr TSTW
   854 4DB7 20 2A 4C		        jsr T_DW
   855 4DBA 20 E9 4D		        jsr TSTW
   856 4DBD 20 06 4C		        jsr T_LT
   857 4DC0 20 E9 4D		        jsr TSTW
   858 4DC3 20 12 4C		        jsr T_RT
   859 4DC6 20 E9 4D		        jsr TSTW
   860 4DC9			mfex1:
   861 				;* tst magnes
   862 4DC9 20 58 57		        jsr TST_
   863 				        
   864 4DCC A0 00		        ldy #0
   865 4DCE			mfex2:
   866 4DCE C8			        iny
   867 4DCF B1 86		        lda (ADDR),y
   868 4DD1 C9 20		        cmp #$20
   869 4DD3 F0 F9		        beq mfex2
   870 				        
   871 4DD5 C9 29		        cmp #$29
   872 4DD7 F0 01		        beq mfex3
   873 4DD9 60			        rts
   874 4DDA			mfex3:
   875 4DDA A9 01		        lda #1
   876 4DDC 8D 8A 02		        sta FAC
   877 				        
   878 4DDF A9 8C		        lda #$8c
   879 4DE1 20 F8 56		        jsr PUT_
   880 				        
   881 4DE4 A9 0E		        lda #$0e
   882 4DE6 4C 1B 5B		        jmp SOUND.SOUND_
   883 				;* tst stworek
   884 4DE9 E0 41		TSTW:   cpx #$41
   885 4DEB 90 04		        bcc tstw1
   886 4DED E0 4F		        cpx #$4f
   887 4DEF 90 01		        bcc tstw2
   888 4DF1 60			tstw1:  rts
   889 4DF2 68			tstw2:  pla
   890 4DF3 68			        pla
   891 				        
   892 4DF4 A9 0A		        lda #$0a
   893 4DF6 20 1B 5B		        jsr SOUND.SOUND_
   894 				        
   895 4DF9 A9 61		        lda #$61
   896 4DFB 4C F8 56		        jmp PUT_
   897 				;* pchaj ?
   898 4DFE C9 0E		PHAJ:   cmp #$0e
   899 4E00 F0 14		        beq PHA1
   900 4E02 C9 0D		        cmp #$0d
   901 4E04 F0 10		        beq PHA1
   902 4E06 C9 3F		        cmp #$3f
   903 4E08 F0 0C		        beq PHA1
   904 4E0A C9 23		        cmp #$23
   905 4E0C F0 08		        beq PHA1
   906 4E0E C9 14		        cmp #$14
   907 4E10 F0 04		        beq PHA1
   908 4E12 C9 40		        cmp #$40
   909 4E14 D0 23		        bne TTPO
   910 4E16			PHA1:
   911 4E16 20 E6 4B		        jsr FD_
   912 4E19 A2 00		        ldx #0
   913 4E1B B0 07		        bcs pha2
   914 4E1D A9 08		        lda #$08
   915 4E1F 20 1B 5B		        jsr SOUND.SOUND_
   916 4E22 A2 01		        ldx #1
   917 4E24			pha2:
   918 4E24 8E 96 02		        stx RUCH
   919 4E27 AD 82 02		        lda X1
   920 4E2A 8D 80 02		        sta X_POS
   921 4E2D AD 83 02		        lda Y1
   922 4E30 8D 81 02		        sta Y_POS
   923 4E33 20 E6 4B		        jsr FD_
   924 4E36 4C 91 4D		        jmp MFEX
   925 				;* czy teleport?
   926 4E39			TTPO:   
   927 4E39 C9 30		        cmp #$30
   928 4E3B B0 03		        bcs ttpo1
   929 4E3D 4C D3 4E		ttp0:   jmp TKEY
   930 4E40 C9 3A		ttpo1:  cmp #$3a
   931 4E42 B0 F9		        bcs ttp0
   932 4E44			ttpo2:
   933 4E44 8D 89 02		        sta TELE
   934 4E47 09 80		        ora #$80
   935 4E49 20 F8 56		        jsr PUT_
   936 4E4C AD 82 02		        lda X1
   937 4E4F 8D 80 02		        sta X_POS
   938 4E52 AD 83 02		        lda Y1
   939 4E55 8D 81 02		        sta Y_POS
   940 4E58 A9 03		        lda #$03
   941 4E5A 20 1B 5B		        jsr SOUND.SOUND_
   942 				        
   943 4E5D A9 00		        lda #0
   944 4E5F 8D 96 02		        sta RUCH
   945 				        
   946 4E62 A9 64		        lda #$64
   947 4E64 4C F8 56		        jmp PUT_
   948 				;* wyj z teleportu
   949 4E67 20 58 57		TELP:   jsr TST_
   950 4E6A CD 89 02		        cmp TELE
   951 4E6D F0 01		        beq telp1
   952 4E6F 60			        rts  
   953 4E70			telp1:
   954 4E70 A9 69		        lda #$69
   955 4E72 20 F8 56		        jsr PUT_
   956 4E75 20 E6 4B		        jsr FD_
   957 4E78 90 2F		        bcc WYSE
   958 				        
   959 4E7A AD 86 02		        lda LM
   960 4E7D 48			        pha
   961 4E7E A0 00		        ldy #0
   962 4E80			telp2:
   963 4E80 C8			        iny
   964 4E81 4A			        lsr
   965 4E82 B0 FC		        bcs telp2
   966 4E84 98			        tya
   967 4E85 0A			        asl
   968 4E86 0A			        asl
   969 4E87 A8			        tay
   970 4E88 88			        dey
   971 				        
   972 4E89 98			WYCP:   tya
   973 4E8A 48			        pha
   974 4E8B B9 C3 4E		        lda TMVS,y
   975 4E8E 8D 86 02		        sta LM
   976 4E91 20 E6 4B		        jsr FD_
   977 4E94 68			        pla
   978 4E95 A8			        tay
   979 4E96 90 0D		        bcc wycp1
   980 4E98 88			        dey
   981 4E99 10 EE		        bpl WYCP
   982 				        
   983 4E9B 68			        pla
   984 4E9C 8D 86 02		        sta LM
   985 4E9F AD 89 02		        lda TELE
   986 4EA2 4C F8 56		        jmp PUT_
   987 				        
   988 4EA5 68			wycp1:  pla
   989 4EA6 8D 86 02		        sta LM
   990 4EA9 20 8C 4D		WYSE:   jsr MFX1
   991 4EAC AD 82 02		        lda X1
   992 4EAF 8D 80 02		        sta X_POS
   993 4EB2 AD 83 02		        lda Y1
   994 4EB5 8D 81 02		        sta Y_POS
   995 4EB8 AD 89 02		        lda TELE
   996 4EBB A2 01		        ldx #1
   997 4EBD 8E 89 02		        stx TELE
   998 4EC0 4C F8 56		        jmp PUT_
   999 				        
  1000 4EC3 0D 0B 07 0E 0E 07 + TMVS    .byte $D, $B, $7, $E, $E, $7, $B, $D
  1001 4ECB 07 0E 0D 0B 0B 0D +         .byte $7, $E, $D, $B, $B, $D, $E, $7
  1002 				;* klucz ?
  1003
  1004 4ED3 C9 3D		TKEY:   cmp #$3d
  1005 4ED5 D0 2C		        bne TDOR
  1006 				        
  1007 4ED7 F8			        sed
  1008 4ED8 18			        clc
  1009 4ED9 AD 8C 02		        lda KEYS
  1010 4EDC 69 01		        adc #1
  1011 4EDE 8D 8C 02		        sta KEYS
  1012 4EE1 D8			        cld
  1013 				        
  1014 4EE2 A2 00		        ldx #$00
  1015 4EE4 A9 75		        lda #$75
  1016 4EE6 20 82 50		        jsr ASCO
  1017 				        
  1018 4EE9 A9 09		        lda #$09
  1019 4EEB 20 1B 5B		        jsr SOUND.SOUND_
  1020 				        
  1021 4EEE 20 EB 56		FGET:   jsr GET_
  1022 4EF1			fget1:
  1023 4EF1 AD 82 02		        lda X1
  1024 4EF4 8D 80 02		        sta X_POS
  1025 4EF7 AD 83 02		        lda Y1
  1026 4EFA 8D 81 02		        sta Y_POS
  1027 4EFD 20 E6 4B		        jsr FD_
  1028 4F00 4C 91 4D		        jmp MFEX
  1029 				        
  1030 				;* drzwi ?
  1031
  1032 4F03 AE 8C 02		TDOR:   ldx KEYS
  1033 4F06 F0 24		        beq TSKA
  1034 				        
  1035 4F08 C9 7C		        cmp #$7c
  1036 4F0A F0 04		        beq tdor1
  1037 4F0C C9 12		        cmp #$12
  1038 4F0E D0 1C		        bne TSKA
  1039 4F10 F8			tdor1:  sed
  1040 4F11 38			        sec
  1041 4F12 AD 8C 02		        lda KEYS
  1042 4F15 E9 01		        sbc #1
  1043 4F17 8D 8C 02		        sta KEYS
  1044 4F1A D8			        cld
  1045 				        
  1046 4F1B A2 01		        ldx #1
  1047 4F1D A9 00		        lda #0
  1048 4F1F 20 82 50		        jsr ASCO
  1049 				        
  1050 4F22 A9 06		        lda #$06
  1051 4F24 20 1B 5B		        jsr SOUND.SOUND_
  1052 				        
  1053 4F27 A9 7A		        lda #$7a
  1054 4F29 4C F8 56		        jmp PUT_
  1055 				;* skarb ?
  1056
  1057 4F2C C9 24		TSKA:   cmp #$24
  1058 4F2E D0 32		        bne TWYJ
  1059 				        
  1060 4F30 AD 8E 02		        lda ZEBR
  1061 4F33 D0 08		        bne tska1
  1062 4F35 A9 0D		        lda #$0d
  1063 4F37 20 1B 5B		        jsr SOUND.SOUND_
  1064 4F3A 4C 5A 49		        jmp NXCV
  1065 4F3D			tska1:        
  1066 4F3D AD 8E 02		        lda ZEBR
  1067 4F40 D0 06		        bne tska2
  1068 4F42 A2 02		        ldx #2
  1069 4F44 A9 50		        lda #$50
  1070 4F46 D0 0F		        bne tska3        
  1071 4F48 F8			tska2:  sed
  1072 4F49 38			        sec
  1073 4F4A AD 8E 02		        lda ZEBR
  1074 4F4D E9 01		        sbc #1
  1075 4F4F 8D 8E 02		        sta ZEBR
  1076 4F52 D8			        cld
  1077 4F53 A2 01		        ldx #1
  1078 4F55 A9 00		        lda #0
  1079 4F57 20 82 50		tska3:  jsr ASCO
  1080 4F5A A9 04		        lda #$04
  1081 4F5C 20 1B 5B		        jsr SOUND.SOUND_
  1082 4F5F 4C EE 4E		        jmp FGET
  1083 				;* wyjscie ?
  1084 4F62 C9 15		TWYJ:   cmp #$15
  1085 4F64 F0 04		        beq twyj1
  1086 4F66 C9 16		        cmp #$16
  1087 4F68 D0 23		        bne TNAB
  1088 4F6A			twyj1:
  1089 4F6A AD 82 02		        lda X1
  1090 4F6D 8D 80 02		        sta X_POS
  1091 4F70 AD 83 02		        lda Y1
  1092 4F73 8D 81 02		        sta Y_POS
  1093 4F76 A9 20		        lda #$20
  1094 4F78 20 F8 56		        jsr PUT_
  1095 				        
  1096 4F7B A2 10		        ldx #$10
  1097 4F7D A9 00		        lda #$00
  1098 4F7F 20 82 50		        jsr ASCO
  1099 4F82 A9 0C		        lda #$0c
  1100 4F84 20 1B 5B		        jsr SOUND.SOUND_
  1101 				        
  1102 4F87 A9 80		        lda #$80
  1103 4F89 8D 8A 02		        sta FAC
  1104 4F8C 60			        rts
  1105 				;* naboje?
  1106 4F8D C9 21		TNAB:   cmp #$21
  1107 4F8F D0 1E		        bne TEXL
  1108 4F91 F8			        sed
  1109 4F92 18			        clc
  1110 4F93 A9 09		        lda #$09
  1111 4F95 6D 90 02		        adc NABO
  1112 4F98 90 02		        bcc tnab1
  1113 4F9A A9 99		        lda #$99
  1114 4F9C 8D 90 02		tnab1:  sta NABO
  1115 4F9F D8			        cld
  1116 4FA0 A2 00		        ldx #$00
  1117 4FA2 A9 50		        lda #$50
  1118 4FA4 20 82 50		        jsr ASCO
  1119 				        
  1120 4FA7 A9 07		        lda #$07
  1121 4FA9 20 1B 5B		        jsr SOUND.SOUND_
  1122 				        
  1123 4FAC 4C EE 4E		        jmp FGET
  1124 				;* extra life?
  1125 4FAF C9 2B		TEXL:   cmp #$2b
  1126 4FB1 D0 24		        bne TBEZ
  1127 4FB3 AD 8B 02		        lda CNUM
  1128 4FB6 8D 8F 02		        sta LSTE
  1129 4FB9 F8			        sed
  1130 4FBA 18			        clc
  1131 4FBB A9 01		        lda #1
  1132 4FBD 6D 8D 02		        adc LIVS
  1133 4FC0 8D 8D 02		        sta LIVS
  1134 4FC3 D8			        cld
  1135 				        
  1136 4FC4 A2 02		        ldx #2
  1137 4FC6 A9 00		        lda #0
  1138 4FC8 20 82 50		        jsr ASCO
  1139 				        
  1140 4FCB A9 05		        lda #$05
  1141 4FCD 20 1B 5B		        jsr SOUND.SOUND_
  1142 				        
  1143 4FD0 4C EE 4E		        jmp FGET
  1144 				        
  1145 				;* bezw skrzynia ?
  1146
  1147 4FD3 09 8A 07 88		TBTAB   .byte $09, $8a, $07, $88
  1148 4FD7 C9 06		TBEZ:   cmp #$06
  1149 4FD9 D0 1C		        bne ENDT
  1150 4FDB 20 E6 4B		        jsr FD_
  1151 4FDE B0 17		        bcs ENDT
  1152 4FE0 A2 FF		        ldx #$ff
  1153 4FE2 AD 86 02		        lda LM
  1154 4FE5			tbez1:
  1155 4FE5 E8			        inx
  1156 4FE6 4A			        lsr
  1157 4FE7 B0 FC		        bcs tbez1
  1158 4FE9 BD D3 4F		        lda TBTAB,x
  1159 4FEC 20 F8 56		        jsr PUT_
  1160 4FEF A9 08		        lda #$08
  1161 4FF1 20 1B 5B		        jsr SOUND.SOUND_
  1162 				        
  1163 4FF4 4C F1 4E		        jmp fget1
  1164 				;***************************
  1165
  1166 4FF7 AD 84 02		ENDT:   lda FX
  1167 4FFA 8D 80 02		        sta X_POS
  1168 4FFD AD 85 02		        lda FY
  1169 5000 8D 81 02		        sta Y_POS
  1170 5003 4C 8C 4D		        jmp MFX1
  1171 				        
  1172 5006 AD 0A E8		NIES:   lda RANDOM
  1173 5009 29 1F		        and #$1f
  1174 500B AA			        tax
  1175 500C BD 62 50		        lda NSPS,x
  1176 500F F0 03		        beq nies1
  1177 5011 4C F8 56		        jmp PUT_
  1178 5014			nies1:
  1179 5014 A9 2B		        lda #$2b
  1180 5016 20 F8 56		        jsr PUT_
  1181 5019 A9 1E		        lda #$1e
  1182 501B 8D 81 02		        sta Y_POS
  1183 501E			nies2:
  1184 501E A9 0F		        lda #$0f
  1185 5020 8D 80 02		        sta X_POS
  1186 5023 20 58 57		SUP1:   jsr TST_
  1187 5026 29 7F		        and #$7f
  1188 5028 AA			        tax
  1189 				        
  1190 5029 A9 A0		        lda #$a0
  1191 502B E0 28		        cpx #$28
  1192 502D F0 1A		        beq SUP2+2
  1193 502F E0 29		        cpx #$29
  1194 5031 F0 16		        beq SUP2+2
  1195 5033 E0 7C		        cpx #$7c
  1196 5035 F0 10		        beq SUP2
  1197 5037 E0 12		        cpx #$12
  1198 5039 F0 0C		        beq SUP2
  1199 503B E0 26		        cpx #$26
  1200 503D F0 08		        beq SUP2
  1201 503F E0 41		        cpx #$41
  1202 5041 90 09		        bcc SUP2+5
  1203 5043 E0 4D		        cpx #$4d
  1204 5045 90 05		        bcc SUP2+5
  1205 5047 A9 E1		SUP2:   lda #$e1
  1206 5049 20 F8 56		        jsr PUT_
  1207 504C CE 80 02		        dec X_POS
  1208 504F 10 D2		        bpl SUP1
  1209 5051 CE 81 02		        dec Y_POS
  1210 5054 10 C8		        bpl nies2
  1211 5056 A2 05		        ldx #5
  1212 5058 A9 00		        lda #0
  1213 505A 20 82 50		        jsr ASCO
  1214 505D A9 0D		        lda #$0d
  1215 505F 4C 1B 5B		        jmp SOUND.SOUND_
  1216
  1217 5062 00 00 3F 3F 21 21 + NSPS    .byte $00,$00,$3F,$3F,$21,$21,$21,$21
  1218 506A 3D 3D 3D 24 24 24 +         .byte $3D,$3D,$3D,$24,$24,$24,$24,$24
  1219 5072 26 26 40 2B 2B 2B +         .byte $26,$26,$40,$2B,$2B,$2B,$2B,$2B
  1220 507A 63 63 15 2C 2E 2D +         .byte $63,$63,$15,$2C,$2E,$2D,$2F,$23
  1221 				;* dodaj punkty
  1222 5082 F8			ASCO:   sed
  1223 5083 18			        clc
  1224 5084 6D 94 02		        adc SCOR+2
  1225 5087 8D 94 02		        sta SCOR+2
  1226 				        
  1227 508A 8A			        txa
  1228 508B 6D 93 02		        adc SCOR+1
  1229 508E 8D 93 02		        sta SCOR+1
  1230 				        
  1231 5091 A9 00		        lda #0
  1232 5093 6D 92 02		        adc SCOR
  1233 5096 8D 92 02		        sta SCOR
  1234 5099 D8			        cld
  1235 509A 60			        rts
  1236 				;* bezw skzynie ------------
  1237 509B 20 93 4B		BEZL:   jsr LT_
  1238 509E 90 21		        bcc BEZX
  1239 50A0 20 CC 50		        jsr BEZS
  1240 50A3 4C AD 51		        jmp PP1L
  1241 				        
  1242 50A6 20 76 4B		BEZR:   jsr RT_
  1243 50A9 90 16		        bcc BEZX
  1244 50AB 20 CC 50		        jsr BEZS
  1245 50AE 4C F4 51		        jmp PP1R
  1246 				        
  1247 50B1 20 CB 4B		BEZU:   jsr UP_
  1248 50B4 90 0B		        bcc BEZX
  1249 50B6 20 CC 50		        jsr BEZS
  1250 50B9 4C 1B 52		        jmp PP1U
  1251 				        
  1252 50BC 20 AE 4B		BEZD:   jsr DW_
  1253 50BF B0 05		        bcs bezx1
  1254 50C1 A9 08		BEZX:   lda #8
  1255 50C3 4C 1B 5B		        jmp SOUND.SOUND_
  1256 50C6 20 CC 50		bezx1:  jsr BEZS
  1257 50C9 4C 42 52		        jmp PP1D
  1258 				        
  1259 50CC A9 06		BEZS:   lda #$06
  1260 50CE 4C F8 56		        jmp PUT_
  1261 				        
  1262 				;* losowy powrt
  1263
  1264 50D1 AD 0A E8		RNDR:   lda RANDOM
  1265 50D4 C9 12		        cmp #$12
  1266 50D6 90 02		        bcc rndr1
  1267 50D8 68			        pla
  1268 50D9 68			        pla
  1269 50DA 60			rndr1:  rts
  1270
  1271 				;* bomba -------------------
  1272 50DB A9 00		BOMB:   lda #0
  1273 50DD 20 1B 5B		        jsr SOUND.SOUND_
  1274 				        
  1275 50E0 CE 80 02		        dec X_POS
  1276 50E3 CE 81 02		        dec Y_POS
  1277 50E6 20 58 57		        jsr TST_
  1278 				        
  1279 50E9 A2 08		        ldx #8
  1280 50EB BD 2B 51		BOM1:   lda WBPO,x
  1281 50EE A8			        tay
  1282 50EF B1 86		        lda (ADDR),y
  1283 50F1 C9 A0		        cmp #$A0
  1284 50F3 F0 25		        beq BOM2
  1285 50F5 29 7F		        and #$7f
  1286 50F7 A8			        tay
  1287 50F8 E0 04		        cpx #4
  1288 50FA F0 07		        beq BOM0
  1289 50FC B9 D3 58		        lda WHAT,y
  1290 50FF 29 02		        and #%10
  1291 5101 F0 17		        beq BOM2
  1292 5103			BOM0:        
  1293 5103 98			        tya
  1294 5104 48			        pha
  1295 5105 BD 2B 51		        lda WBPO,x
  1296 5108 A8			        tay
  1297 5109 68			        pla
  1298 510A C9 40		        cmp #$40
  1299 510C D0 07		        bne bom01
  1300 510E CE 81 02		        dec Y_POS
  1301 5111 A9 E0		        lda #$e0
  1302 5113 D0 03		        bne bom02
  1303 5115 BD 34 51		bom01:  lda WBPO+9,x
  1304 5118 91 86		bom02:  sta (ADDR),y
  1305 511A			BOM2:
  1306 511A CA			        dex
  1307 511B 10 CE		        bpl BOM1
  1308 511D EE 80 02		        inc X_POS
  1309 5120 EE 81 02		        inc Y_POS
  1310 5123 4C 58 57		        jmp TST_
  1311 				        
  1312 5126			WYBO:   
  1313 5126 A9 60		        lda #$60    
  1314 5128 4C F8 56		        jmp PUT_
  1315 512B 00 01 02 10 11 12 + WBPO:   .byte $00,$01,$02,$10,$11,$12,$20,$21
  1316 5133 22			        .byte $22
  1317 5134 61 62 61 62 63 62 +         .byte "ababcbaba"                        
  1318 				;* put wyb-spac
  1319 513D			PUTW:   
  1320 513D AA			        tax
  1321 513E A9 20		        lda #$20
  1322 5140 E0 5D		        cpx #$5d
  1323 5142 F0 02		        beq putw1
  1324 5144 E0 5B		        cpx #$5b
  1325 5146			putw1:
  1326 5146 F0 02		        beq putw2
  1327
  1328 5148 A9 66		        lda #$66
  1329 514A			putw2:
  1330 514A 4C F8 56		        jmp PUT_
  1331 				  
  1332
  1333 				;* magnes
  1334 514D AD 85 02		MGNL:   lda FY
  1335 5150 CD 81 02		        cmp Y_POS
  1336 5153 F0 01		        beq mgn0
  1337 5155 60			        rts
  1338 5156 A0 00		mgn0:   ldy #0
  1339 5158 C8			MGN1:   iny
  1340 5159 B1 86		        lda (ADDR),y
  1341 515B C9 20		        cmp #$20
  1342 515D F0 F9		        beq MGN1
  1343 515F 29 7F		        and #$7f
  1344 5161 C9 2A		        cmp #$2a
  1345 5163 F0 01		        beq mgn2
  1346 5165 60			        rts
  1347 5166 A9 8B		mgn2:   lda #$8b
  1348 5168 91 86		        sta (ADDR),y
  1349 516A A9 01		        lda #1
  1350 516C 8D 8A 02		        sta FAC
  1351 516F A9 0E		        lda #$0e
  1352 5171 4C 1B 5B		        jmp SOUND.SOUND_
  1353 5174 A9 01		MGFL:   lda #1
  1354 5176 8D 8A 02		        sta FAC
  1355 5179 20 93 4B		        jsr LT_
  1356 517C B0 01		        bcs PRZY
  1357 517E 60			        rts
  1358 517F A9 76		PRZY:    lda #$76
  1359 5181 20 F8 56		        jsr PUT_
  1360 5184 A9 00		        lda #00
  1361 5186 8D 8A 02		        sta FAC
  1362 				        
  1363 5189 A9 0A		        lda #$0a
  1364 518B 4C 1B 5B		        jmp SOUND.SOUND_
  1365 518E			MGFR:    
  1366 518E A9 01		        lda #1
  1367 5190 8D 8A 02		        sta FAC
  1368 5193 20 76 4B		        jsr RT_
  1369 5196 B0 E7		        bcs PRZY
  1370 5198 60			        rts
  1371 				;*dziao
  1372 				;* 1L
  1373 5199 20 D1 50		DZ1L:   jsr RNDR
  1374 519C A9 01		        lda #1
  1375 519E 20 1B 5B		        jsr SOUND.SOUND_
  1376 51A1 4C AD 51		        jmp PP1L
  1377 51A4 20 93 4B		PO1L:   jsr LT_
  1378 51A7 B0 01		        bcs po1l1
  1379 51A9 60			        rts
  1380 51AA			po1l1:        
  1381 51AA 20 3D 51		        jsr PUTW
  1382 				        
  1383 51AD 20 06 4C		PP1L:   jsr T_LT
  1384 51B0 CE 80 02		        dec X_POS
  1385 51B3 E0 20		        cpx #$20
  1386 51B5 F0 04		        beq pp1l1
  1387 51B7 E0 5D		        cpx #$5d
  1388 51B9 D0 05		        bne PPP1
  1389 51BB			pp1l1:        
  1390 51BB A9 4F		        lda #$4f
  1391 51BD 4C F8 56		        jmp PUT_
  1392 51C0			PPP1:
  1393 51C0 4A			        lsr
  1394 51C1 B0 05		        bcs ppp11
  1395 51C3 A9 02		        lda #$02
  1396 51C5 4C 1B 5B		        jmp SOUND.SOUND_
  1397 51C8			ppp11:        
  1398 51C8 E0 40		        cpx #$40
  1399 51CA D0 03		        bne ppp12
  1400 51CC 4C 26 51		        jmp WYBO
  1401 51CF			ppp12:        
  1402 51CF E0 3F		        cpx #$3f
  1403 51D1 D0 03		        bne ppp13
  1404 51D3 4C E6 53		        jmp PUNIES
  1405 51D6			ppp13:        
  1406 51D6 A9 0A		        lda #$0a
  1407 51D8 20 1B 5B		        jsr SOUND.SOUND_
  1408 				        
  1409 51DB A9 61		        lda #$61
  1410 51DD 4C F8 56		        jmp PUT_
  1411 				        
  1412 				;* 1R
  1413
  1414 51E0 20 D1 50		DZ1R:   jsr RNDR
  1415 51E3 A9 01		        lda #$01 
  1416 51E5 20 1B 5B		        jsr SOUND.SOUND_
  1417 51E8 4C F4 51		        jmp PP1R
  1418 				        
  1419 51EB 20 76 4B		PO1R:   jsr RT_
  1420 51EE B0 01		        bcs po1r1
  1421 51F0 60			        rts
  1422 51F1			po1r1:        
  1423 51F1 20 3D 51		        jsr PUTW  
  1424 51F4 20 12 4C		PP1R:   jsr T_RT
  1425 51F7 EE 80 02		        inc X_POS
  1426 51FA E0 20		        cpx #$20        
  1427 51FC F0 04		        beq pp1r1
  1428 51FE E0 5D		        cpx #$5d
  1429 5200 D0 BE		        bne PPP1
  1430 5202			pp1r1:        
  1431 5202 A9 D0		        lda #$d0
  1432 5204 4C F8 56		        jmp PUT_
  1433 				        
  1434 				;* 1U
  1435 5207 20 D1 50		DZ1U:   jsr RNDR
  1436 520A A9 01		        lda #1
  1437 520C 20 1B 5B		        jsr SOUND.SOUND_
  1438 520F 4C 1B 52		        jmp PP1U
  1439 5212 20 CB 4B		PO1U    jsr UP_
  1440 5215 B0 01		        bcs po1u1
  1441 5217 60			        rts
  1442 5218			po1u1:        
  1443 5218 20 3D 51		        jsr PUTW
  1444 				        
  1445 521B 20 1E 4C		PP1U:   jsr T_UP
  1446 521E CE 81 02		        dec Y_POS
  1447 5221 E0 20		        cpx #$20
  1448 5223 F0 04		        beq pp1u1
  1449 5225 E0 5B		        cpx #$5b
  1450 5227 D0 97		        bne PPP1
  1451 5229			pp1u1:        
  1452 5229 A9 51		        lda #$51 
  1453 522B 4C F8 56		        jmp PUT_
  1454 				               
  1455 				;* 1D
  1456
  1457 522E 20 D1 50		DZ1D:   jsr RNDR
  1458 5231 A9 01		        lda #1
  1459 5233 20 1B 5B		        jsr SOUND.SOUND_
  1460 5236 4C 42 52		        jmp PP1D
  1461 5239 20 AE 4B		PO1D:   jsr DW_
  1462 523C B0 01		        bcs po1d1
  1463 523E 60			        rts
  1464 523F			po1d1:        
  1465 523F 20 3D 51		        jsr PUTW
  1466 5242 20 2A 4C		PP1D:   jsr T_DW
  1467 5245 EE 81 02		        inc Y_POS
  1468 5248 E0 20		        cpx #$20
  1469 524A F0 07		        beq pp1d1
  1470 524C E0 5B		        cpx #$5b
  1471 524E F0 03		        beq pp1d1
  1472 5250 4C C0 51		        jmp PPP1
  1473 5253			pp1d1:        
  1474 5253 A9 D2		        lda #$d2
  1475 5255 4C F8 56		        jmp PUT_
  1476 				        
  1477 				;* laser ---------------------                                
  1478
  1479 5258 20 D1 50		DZ2L:   jsr RNDR
  1480 525B 4C 70 52		        jmp PP2L
  1481 525E 20 93 4B		PO2L:   jsr LT_
  1482 5261 B0 08		        bcs po2l1
  1483 5263 EE 80 02		        inc X_POS
  1484 5266 A9 5D		        lda #$5d
  1485 5268 4C F8 56		        jmp PUT_
  1486 526B			po2l1:        
  1487 526B A9 50		        lda #$50
  1488 526D 20 F8 56		        jsr PUT_
  1489 5270 20 06 4C		PP2L:   jsr T_LT
  1490 5273 CE 80 02		        dec X_POS
  1491 5276 E0 20		        cpx #$20
  1492 5278 D0 05		        bne PPP2
  1493 				        
  1494 527A A9 53		        lda #$53
  1495 527C 4C F8 56		        jmp PUT_
  1496 				        
  1497 527F 4A			PPP2:   lsr
  1498 5280 B0 05		        bcs ppp21
  1499 5282 A9 02		        lda #2
  1500 5284 4C 1B 5B		        jmp SOUND.SOUND_
  1501 5287			ppp21:        
  1502 5287 E0 40		        cpx #$40
  1503 5289 D0 03		        bne ppp22
  1504 528B 4C 26 51		        jmp WYBO
  1505 528E			ppp22        
  1506 528E E0 3F		        cpx #$3f
  1507 5290 D0 03		        bne ppp23
  1508 5292 4C E6 53		        jmp PUNIES
  1509 5295			ppp23:        
  1510 5295 A9 0A		        lda #$0a
  1511 5297 20 1B 5B		        jsr SOUND.SOUND_
  1512 				        
  1513 529A A9 61		        lda #$61
  1514 529C 4C F8 56		        jmp PUT_
  1515 529F 20 D1 50		DZ2R:   jsr RNDR
  1516 52A2 4C B7 52		        jmp PP2R
  1517 52A5			PO2R:
  1518 52A5 20 76 4B		        jsr RT_
  1519 52A8 B0 08		        bcs po2r1
  1520 52AA CE 80 02		        dec X_POS
  1521 52AD A9 5D		        lda #$5d
  1522 52AF 4C F8 56		        jmp PUT_
  1523 52B2			po2r1:        
  1524 52B2 A9 4F		        lda #$4f
  1525 52B4 20 F8 56		        jsr PUT_
  1526 52B7 20 12 4C		PP2R:   jsr T_RT
  1527 52BA EE 80 02		        inc X_POS
  1528 52BD E0 20		        cpx #$20
  1529 52BF D0 BE		        bne PPP2
  1530 52C1 A9 D4		        lda #$d4
  1531 52C3 20 F8 56		        jsr PUT_
  1532 52C6 60			        rts
  1533 52C7 20 D1 50		DZ2U:   jsr RNDR
  1534 52CA 4C DF 52		        jmp PP2U
  1535 				        
  1536 52CD 20 CB 4B		PO2U:   jsr UP_
  1537 52D0 B0 08		        bcs po2u1
  1538 52D2 EE 81 02		        inc Y_POS
  1539 52D5 A9 5B		        lda #$5b
  1540 52D7 4C F8 56		        jmp PUT_
  1541 52DA			po2u1:        
  1542 52DA A9 52		        lda #$52
  1543 52DC 20 F8 56		        jsr PUT_
  1544 52DF 20 1E 4C		PP2U:   jsr T_UP
  1545 52E2 CE 81 02		        dec Y_POS
  1546 52E5 E0 20		        cpx #$20
  1547 52E7 D0 96		        bne PPP2
  1548 				        
  1549 52E9 A9 55		        lda #$55
  1550 52EB 4C F8 56		        jmp PUT_
  1551 				        
  1552 52EE 20 D1 50		DZ2D:   jsr RNDR
  1553 52F1 4C 06 53		        jmp PP2D
  1554 52F4 20 AE 4B		PO2D:   jsr DW_
  1555 52F7 B0 08		        bcs po2d1
  1556 52F9 CE 81 02		        dec Y_POS
  1557 52FC A9 5B		        lda #$5b
  1558 52FE 4C F8 56		        jmp PUT_
  1559 5301			po2d1:        
  1560 5301 A9 51		        lda #$51
  1561 5303 20 F8 56		        jsr PUT_
  1562 				        
  1563 5306 20 2A 4C		PP2D:   jsr T_DW
  1564 5309 EE 81 02		        inc Y_POS
  1565 530C E0 20		        cpx #$20
  1566 530E F0 03		        beq pp2d1
  1567 5310 4C 7F 52		        jmp PPP2
  1568 5313			pp2d1        
  1569 5313 A9 D6		        lda #$d6
  1570 5315 20 F8 56		        jsr PUT_
  1571 5318 60			        rts
  1572 				;* blaster
  1573 5319 20 D1 50		DZ3L:   jsr RNDR 
  1574 531C 4C 2F 53		        jmp PP3L
  1575 531F			PO3L:
  1576 531F 20 93 4B		        jsr LT_
  1577 5322 B0 06		        bcs po3l1
  1578 5324 20 D8 53		        jsr D3TB
  1579 5327 EE 80 02		        inc X_POS
  1580 532A			po3l1
  1581 532A A9 62		        lda #$62
  1582 532C 4C F8 56		        jmp PUT_
  1583 				        
  1584 532F 20 06 4C		PP3L:   jsr T_LT
  1585 5332 CE 80 02		        dec X_POS
  1586 5335 E0 20		        cpx #$20
  1587 5337 F0 04		        beq pp3l1
  1588 				        
  1589 5339 4A			        lsr
  1590 533A B0 01		        bcs pp3l1
  1591 533C 60			        rts
  1592 533D			pp3l1:        
  1593 533D 20 D8 53		        jsr D3TB
  1594 				        
  1595 5340 A9 57		        lda #$57
  1596 5342 4C F8 56		        jmp PUT_
  1597 				        
  1598 5345 20 D1 50		DZ3R:   jsr RNDR
  1599 5348 4C 60 53		        jmp PP3R
  1600 534B 20 76 4B		PO3R:   jsr RT_
  1601 534E B0 0B		        bcs po3r1
  1602 5350 20 D8 53		        jsr D3TB
  1603 5353 CE 80 02		        dec X_POS
  1604 5356 A9 62		        lda #$62
  1605 5358 4C F8 56		        jmp PUT_
  1606 535B			po3r1:        
  1607 535B A9 62		        lda #$62
  1608 535D 20 F8 56		        jsr PUT_
  1609 5360			PP3R:
  1610 5360 20 12 4C		        jsr T_RT
  1611 5363 EE 80 02		        inc X_POS
  1612 5366 E0 20		        cpx #$20
  1613 5368 F0 04		        beq pp3r1
  1614 536A 4A			        lsr
  1615 536B B0 01		        bcs pp3r1
  1616 536D 60			        rts
  1617 536E			pp3r1:        
  1618 536E 20 D8 53		        jsr D3TB
  1619 5371 A9 D8		        lda #$d8
  1620 5373 4C F8 56		        jmp PUT_
  1621 5376			DZ3U:
  1622 5376 20 D1 50		        jsr RNDR
  1623 5379 4C 91 53		        jmp PP3U
  1624 537C 20 CB 4B		PO3U:   jsr UP_
  1625 537F B0 0B		        bcs po3u1
  1626 5381 20 D8 53		        jsr D3TB
  1627 5384 EE 81 02		        inc Y_POS
  1628 5387 A9 62		        lda #$62
  1629 5389 4C F8 56		        jmp PUT_
  1630 538C			po3u1:        
  1631 538C A9 62		        lda #$62
  1632 538E 20 F8 56		        jsr PUT_
  1633 5391			PP3U:
  1634 5391 20 1E 4C		        jsr T_UP
  1635 5394 CE 81 02		        dec Y_POS
  1636 5397 E0 20		        cpx #$20
  1637 5399 F0 04		        beq pp3u1
  1638 539B 4A			        lsr
  1639 539C B0 01		        bcs pp3u1
  1640 539E 60			        rts
  1641 539F			pp3u1:        
  1642 539F 20 D8 53		        jsr D3TB
  1643 53A2 A9 59		        lda #$59
  1644 53A4 4C F8 56		        jmp PUT_
  1645 53A7			DZ3D: 
  1646 53A7 20 D1 50		        jsr RNDR
  1647 53AA 4C C2 53		        jmp PP3D
  1648 53AD 20 AE 4B		PO3D:   jsr DW_
  1649 53B0 B0 0B		        bcs po3d1
  1650 53B2 20 D8 53		        jsr D3TB
  1651 53B5 CE 81 02		        dec Y_POS
  1652 53B8 A9 62		        lda #$62
  1653 53BA 4C F8 56		        jmp PUT_
  1654 53BD			po3d1:        
  1655 53BD A9 62		        lda #$62
  1656 53BF 20 F8 56		        jsr PUT_
  1657 53C2 20 2A 4C		PP3D:   jsr T_DW
  1658 53C5 EE 81 02		        inc Y_POS
  1659 53C8 E0 20		        cpx #$20
  1660 53CA F0 04		        beq pp3d1
  1661 53CC 4A			        lsr
  1662 53CD B0 01		        bcs pp3d1
  1663 53CF 60			        rts
  1664 53D0			pp3d1:        
  1665 53D0 20 D8 53		        jsr D3TB
  1666 53D3 A9 DA		        lda #$da
  1667 53D5 4C F8 56		        jmp PUT_
  1668 				;* dz3 test bomba
  1669 53D8			D3TB:
  1670 53D8 E0 3F		        cpx #$3f
  1671 53DA F0 0A		        beq PUNIES
  1672 				        
  1673 53DC E0 40		        cpx #$40
  1674 53DE D0 05		        bne d3tb1
  1675 53E0 68			        pla
  1676 53E1 68			        pla
  1677 53E2 4C 26 51		        jmp WYBO
  1678 53E5			d3tb1:        
  1679 53E5 60			        rts
  1680 				;* put niespodzianka
  1681 53E6			PUNIES:             
  1682 53E6 A9 0A		        lda #$0a
  1683 53E8 20 1B 5B		        jsr SOUND.SOUND_
  1684 53EB A9 6E		        lda #$6e
  1685 53ED 4C F8 56		        jmp PUT_
  1686 				        
  1687 				;* ruch dziao
  1688 53F0 AD A0 02		DZRU:   lda CNTR
  1689 53F3 29 03		        and #3
  1690 53F5 D0 25		        bne RDZ1
  1691 53F7 AD 0A E8		        lda RANDOM
  1692 53FA 29 03		        and #3
  1693 53FC D0 1E		        bne RDZ1
  1694 				        
  1695 53FE 20 EB 56		        jsr GET_
  1696 				        
  1697 5401 4E 0A E8		        lsr RANDOM
  1698 5404 B0 0B		        bcs RDZL
  1699 5406 69 01		        adc #1
  1700 5408 C9 30		        cmp #$30
  1701 540A 90 02		        bcc dzru1
  1702 540C A9 2C		        lda #$2c
  1703 540E			dzru1:        
  1704 540E 4C F8 56		        jmp PUT_
  1705 				        
  1706 5411 E9 01		RDZL:   sbc #1
  1707 5413 C9 2C		        cmp #$2c
  1708 5415 B0 02		        bcs rdzl1
  1709 5417 A9 2F		        lda #$2f
  1710 5419 4C F8 56		rdzl1:  jmp PUT_
  1711 541C AD 0A E8		RDZ1:   lda RANDOM
  1712 541F 29 07		        and #7
  1713 5421 F0 01		        beq rdz11
  1714 5423 60			        rts
  1715 5424			rdz11:        
  1716 5424 20 58 57		        jsr TST_
  1717 5427 38			        sec
  1718 5428 E9 2C		        sbc #$2c
  1719 542A 0A			        asl
  1720 542B AA			        tax
  1721 542C BD 36 54		        lda RDZP+1,x
  1722 542F 48			        pha
  1723 5430 BD 35 54		        lda RDZP,x
  1724 5433 48			        pha
  1725 5434 60			        rts
  1726 5435 F3 51 41 52 AC 51 + RDZP    .word PP1R-1,PP1D-1,PP1L-1,PP1U-1
  1727
  1728 				;* mov dziaa
  1729
  1730 543D AD A0 02		MODL:   lda CNTR
  1731 5440 4A			        lsr
  1732 5441 90 1D		        bcc MOD1
  1733 				        
  1734 5443 20 93 4B		        jsr LT_
  1735 5446 90 18		        bcc MOD1
  1736 				        
  1737 5448 A9 0D		        lda #$0d
  1738 544A 20 F8 56		        jsr PUT_
  1739 544D 4C 60 54		        jmp MOD1
  1740
  1741 5450 AD A0 02		MODR:   lda CNTR
  1742 5453 4A			        lsr
  1743 5454 90 0A		        bcc MOD1
  1744 				        
  1745 5456 20 76 4B		        jsr RT_
  1746 5459 90 05		        bcc MOD1
  1747 				        
  1748 545B A9 0E		        lda #$0e
  1749 545D 20 F8 56		        jsr PUT_
  1750 5460 4C 07 52		MOD1:   jmp DZ1U
  1751
  1752 				;* zapora
  1753
  1754 5463 20 58 57		ZAPO:   jsr TST_
  1755 5466 A0 01		        ldy #1
  1756 5468 B1 86		        lda (ADDR),y
  1757 546A C9 0F		        cmp #$0f
  1758 546C F0 02		        beq zapo1
  1759 546E A9 20		        lda #$20
  1760 5470			zapo1:        
  1761 5470 48			        pha
  1762 5471 20 58 57		        jsr TST_
  1763 5474			MOZA:
  1764 5474 C8			        iny
  1765 5475 EE 80 02		        inc X_POS
  1766 5478 B1 86		        lda (ADDR),y
  1767 547A C9 0F		        cmp #$0f
  1768 547C D0 20		        bne MOZ1
  1769 				        
  1770 547E CE 80 02		        dec X_POS
  1771 5481 88			        dey
  1772 5482 F0 0B		        beq MOZ2
  1773 5484 A9 0F		        lda #$0f
  1774 5486 8C 95 02		        sty HLP
  1775 5489 20 0F 57		        jsr PUT1
  1776 548C AC 95 02		        ldy HLP
  1777 548F			MOZ2:
  1778 548F C8			        iny
  1779 5490 EE 80 02		        inc X_POS
  1780 5493 A9 20		        lda #$20
  1781 5495 8C 95 02		        sty HLP
  1782 5498 20 0F 57		        jsr PUT1
  1783 549B AC 95 02		        ldy HLP
  1784 549E			MOZ1:
  1785 549E B1 86		        lda (ADDR),y
  1786 54A0 C9 05		        cmp #$05
  1787 54A2 D0 D0		        bne MOZA
  1788 54A4 68			        pla
  1789 54A5 88			        dey
  1790 54A6 CE 80 02		        dec X_POS
  1791 54A9 C9 0F		        cmp #$0f
  1792 54AB F0 01		        beq moz11
  1793 54AD 60			        rts
  1794 54AE			moz11:        
  1795 54AE 91 86		        sta (ADDR),y
  1796 54B0 4C 0F 57		        jmp PUT1                          
  1797 				;* stworki
  1798 				;* leworeczne
  1799
  1800 54B3 20 54 56		STWA    jsr TFAC
  1801 54B6 20 93 4B		        jsr LT_
  1802 54B9 B0 08		        bcs stwa1
  1803 54BB A9 44		        lda #$44
  1804 54BD 20 F8 56		        jsr PUT_
  1805 54C0 4C 54 56		        jmp TFAC
  1806 54C3			stwa1:        
  1807 54C3 20 CB 4B		        jsr UP_
  1808 54C6 B0 03		        bcs stwa2
  1809 54C8 4C 54 56		        jmp TFAC
  1810 54CB			stwa2        
  1811 54CB A9 43		        lda #$43
  1812 54CD 4C F8 56		        jmp PUT_
  1813
  1814 54D0 20 54 56		STWB:   jsr TFAC
  1815 54D3 20 76 4B		        jsr RT_
  1816 54D6 B0 08		        bcs stwb1
  1817 54D8 A9 C3		        lda #$c3
  1818 54DA 20 F8 56		        jsr PUT_
  1819 54DD 4C 54 56		        jmp TFAC
  1820 54E0			stwb1:        
  1821 54E0 20 AE 4B		        jsr DW_
  1822 54E3 B0 03		        bcs stwb2
  1823 54E5 4C 54 56		        jmp TFAC
  1824 54E8			stwb2:
  1825 54E8 A9 44		        lda #$44
  1826 54EA 4C F8 56		        jmp PUT_
  1827 				        
  1828 54ED 20 54 56		STWC:   jsr TFAC
  1829 54F0 20 CB 4B		        jsr UP_
  1830 54F3 B0 08		        bcs stwc1
  1831 54F5 A9 41		        lda #$41
  1832 54F7 20 F8 56		        jsr PUT_
  1833 54FA 4C 54 56		        jmp TFAC
  1834 54FD			stwc1:        
  1835 54FD 20 76 4B		        jsr RT_
  1836 5500 B0 03		        bcs stwc2
  1837 5502 4C 54 56		        jmp TFAC
  1838 5505			stwc2:
  1839 5505 A9 42		        lda #$42
  1840 5507 4C F8 56		        jmp PUT_
  1841 				        
  1842 550A 20 54 56		STWD:   jsr TFAC
  1843 550D 20 AE 4B		        jsr DW_
  1844 5510 B0 08		        bcs stwd1
  1845 5512 A9 C2		        lda #$c2
  1846 5514 20 F8 56		        jsr PUT_
  1847 5517 4C 54 56		        jmp TFAC
  1848 551A			stwd1:        
  1849 551A 20 93 4B		        jsr LT_
  1850 551D B0 03		        bcs stwd2
  1851 551F 4C 54 56		        jmp TFAC
  1852 5522			stwd2:
  1853 5522 A9 41		        lda #$41
  1854 5524 4C F8 56		        jmp PUT_
  1855 				;* praworeczne
  1856
  1857 5527 20 54 56		STWE:   jsr TFAC
  1858 552A 20 93 4B		        jsr LT_
  1859 552D B0 08		        bcs *+10
  1860 552F A9 47		        lda #$47
  1861 5531 20 F8 56		        jsr PUT_
  1862 5534 4C 54 56		        jmp TFAC 
  1863 				        
  1864 5537 20 AE 4B		        jsr DW_
  1865 553A B0 03		        bcs *+5
  1866 553C 4C 54 56		        jmp TFAC
  1867 553F A9 48		        lda #$48
  1868 5541 4C F8 56		        jmp PUT_
  1869 				        
  1870 5544 20 54 56		STWF:   jsr TFAC
  1871 5547 20 76 4B		        jsr RT_
  1872 554A B0 08		        bcs *+10
  1873 554C A9 C8		        lda #$c8
  1874 554E 20 F8 56		        jsr PUT_
  1875 5551 4C 54 56		        jmp TFAC
  1876 				        
  1877 5554 20 CB 4B		        jsr UP_
  1878 5557 B0 03		        bcs *+5
  1879 5559 4C 54 56		        jmp TFAC
  1880 555C A9 C7		        lda #$c7
  1881 555E 4C F8 56		        jmp PUT_
  1882 				        
  1883 5561 20 54 56		STWG:   jsr TFAC
  1884 5564 20 CB 4B		        jsr UP_
  1885 5567 B0 08		        bcs *+10
  1886 5569 A9 46		        lda #$46
  1887 556B 20 F8 56		        jsr PUT_
  1888 556E 4C 54 56		        jmp TFAC
  1889 				        
  1890 5571 20 93 4B		        jsr LT_
  1891 5574 B0 03		        bcs *+5
  1892 5576 4C 54 56		        jmp TFAC
  1893 5579 A9 45		        lda #$45
  1894 557B 4C F8 56		        jmp PUT_
  1895 				        
  1896 557E 20 54 56		STWH:   jsr TFAC
  1897 5581 20 AE 4B		        jsr DW_
  1898 5584 B0 08		        bcs *+10      
  1899 5586 A9 C5		        lda #$c5
  1900 5588 20 F8 56		        jsr PUT_
  1901 558B 4C 54 56		        jmp TFAC
  1902 				        
  1903 558E 20 76 4B		        jsr RT_
  1904 5591 B0 03		        bcs *+5
  1905 5593 4C 54 56		        jmp TFAC
  1906 5596 A9 46		        lda #$46
  1907 5598 4C F8 56		        jmp PUT_
  1908 				;* lewo-prawo
  1909 559B 20 54 56		STWI:   jsr TFAC
  1910 559E 20 93 4B		        jsr LT_
  1911 55A1 B0 03		        bcs stwi1
  1912 55A3 4C 54 56		        jmp TFAC
  1913 55A6			stwi1:
  1914 55A6 A9 CA		        lda #$ca
  1915 55A8 4C F8 56		        jmp PUT_
  1916 				        
  1917 55AB 20 54 56		STWJ:   jsr TFAC
  1918 55AE 20 76 4B		        jsr RT_
  1919 55B1 B0 03		        bcs stwj1
  1920 55B3 4C 54 56		        jmp TFAC
  1921 55B6			stwj1:
  1922 55B6 A9 C9		        lda #$c9
  1923 55B8 4C F8 56		        jmp PUT_
  1924 				;* gora-dol
  1925 55BB 20 54 56		STWK:   jsr TFAC
  1926 55BE 20 CB 4B		        jsr UP_
  1927 55C1 B0 03		        bcs stwk1
  1928 55C3 4C 54 56		        jmp TFAC
  1929 55C6			stwk1:
  1930 55C6 A9 CC		        lda #$cc
  1931 55C8 4C F8 56		        jmp PUT_
  1932
  1933 55CB 20 54 56		STWL:   jsr TFAC
  1934 55CE 20 AE 4B		        jsr DW_
  1935 55D1 B0 03		        bcs stwl1       ;<------------ bcc
  1936 55D3 4C 54 56		        jmp TFAC
  1937 55D6			stwl1:
  1938 55D6 A9 CB		        lda #$cb
  1939 55D8 4C F8 56		        jmp PUT_
  1940 				        
  1941 				; toperze pif-pafy
  1942
  1943 55DB 20 54 56		TOPL:   jsr TFAC
  1944 55DE 20 93 4B		        jsr LT_
  1945 55E1 90 15		        bcc PIFF
  1946 				        
  1947 55E3 A9 4E		        lda #$4e
  1948 55E5 20 F8 56		        jsr PUT_
  1949 55E8 4C F8 55		        jmp PIFF
  1950 				        
  1951 55EB 20 54 56		TOPR:   jsr TFAC
  1952 55EE 20 76 4B		        jsr RT_
  1953 55F1 90 05		        bcc PIFF
  1954 				        
  1955 55F3 A9 4D		        lda #$4d
  1956 55F5 20 F8 56		        jsr PUT_
  1957 				        
  1958 55F8 20 54 56		PIFF:   jsr TFAC
  1959 55FB AD 0A E8		        lda RANDOM
  1960 55FE 29 07		        and #7
  1961 5600 F0 01		        beq piff1
  1962 5602 60			        rts
  1963 5603			piff1:
  1964 				        
  1965 5603 4C 42 52		        jmp PP1D
  1966 				;* sledz ---------------
  1967 5606 20 54 56		LEDZ:   jsr TFAC
  1968 5609 4E 0A E8		        lsr RANDOM
  1969 560C B0 1E		        bcs SKAC
  1970 				        
  1971 560E AD 81 02		        lda Y_POS
  1972 5611 CD 85 02		        cmp FY
  1973 5614 F0 0E		        beq LEX
  1974 5616 90 06		        bcc *+8
  1975 5618 20 CB 4B		        jsr UP_
  1976 561B B0 07		        bcs LEX
  1977 561D 60			        rts
  1978 				        
  1979 561E 20 AE 4B		        jsr DW_
  1980 5621 B0 01		        bcs LEX
  1981 5623 60			        rts
  1982 5624 AD 80 02		LEX:    lda X_POS
  1983 5627 CD 84 02		        cmp FX
  1984 562A D0 20		        bne LEX1
  1985 				        
  1986 562C AD 0A E8		SKAC:   lda RANDOM
  1987 562F 29 20		        and #$20
  1988 5631 F0 01		        beq skac1
  1989 5633 60			        rts
  1990 5634			skac1:        
  1991 5634 AD 0A E8		        lda RANDOM
  1992 5637 29 03		        and #3
  1993 5639 AA			        tax
  1994 563A AD 86 02		        lda LM
  1995 563D 48			        pha
  1996 563E BD C3 4E		        lda TMVS,x
  1997 5641 8D 86 02		        sta LM
  1998 5644 20 E6 4B		        jsr FD_
  1999 5647 68			        pla
  2000 5648 8D 86 02		        sta LM
  2001 564B 60			        rts
  2002 564C B0 03		LEX1:   bcs *+5
  2003 564E 4C 76 4B		        jmp RT_
  2004 5651 4C 93 4B		        jmp LT_
  2005 				        
  2006 				;* czy obok jest facet?
  2007 5654 20 06 4C		TFAC:   jsr T_LT
  2008 5657 E0 2A		        cpx #$2a
  2009 5659 D0 06		        bne tfac1
  2010 565B CE 80 02		        dec X_POS
  2011 565E 4C 86 56		        jmp ZABJ
  2012 5661			tfac1:        
  2013 5661 20 12 4C		        jsr T_RT
  2014 5664 E0 2A		        cpx #$2a
  2015 5666 D0 06		        bne tfac2
  2016 5668 EE 80 02		        inc X_POS
  2017 566B 4C 86 56		        jmp ZABJ
  2018 566E			tfac2:        
  2019 566E 20 1E 4C		        jsr T_UP
  2020 5671 E0 2A		        cpx #$2a
  2021 5673 D0 06		        bne tfac3
  2022 5675 CE 81 02		        dec Y_POS
  2023 5678 4C 86 56		        jmp ZABJ
  2024 567B			tfac3:        
  2025 567B 20 2A 4C		        jsr T_DW
  2026 567E E0 2A		        cpx #$2a
  2027 5680 F0 01		        beq tfac4
  2028 5682 60			        rts
  2029 5683			tfac4:        
  2030 5683 EE 81 02		        inc Y_POS
  2031 				        
  2032 5686 A9 0A		ZABJ:   lda #$0a
  2033 5688 20 1B 5B		        jsr SOUND.SOUND_
  2034 				        
  2035 568B A9 61		        lda #$61
  2036 568D 20 F8 56		        jsr PUT_
  2037 5690 AD 82 02		        lda X1
  2038 5693 8D 80 02		        sta X_POS
  2039 5696 AD 83 02		        lda Y1
  2040 5699 8D 81 02		        sta Y_POS
  2041 569C 60			        rts
  2042 				;* wyjscie
  2043
  2044 569D AD 8E 02		WYZA:   lda ZEBR
  2045 56A0 F0 01		        beq *+3
  2046 56A2 60			        rts
  2047 				        
  2048 56A3 A9 0D		        lda #$0d
  2049 56A5 20 1B 5B		        jsr SOUND.SOUND_
  2050 				        
  2051 56A8 A5 0B		        lda COLB
  2052 56AA 48			        pha
  2053 56AB A9 0F		        lda #$0f
  2054 56AD 85 0B		        sta COLB
  2055 56AF 20 83 46		        jsr TITLE.HALT                                                                                                                                                                              
  2056 56B2 20 83 46		        jsr TITLE.HALT                                                                                                                                                                              
  2057 56B5 20 83 46		        jsr TITLE.HALT                                                                                                                                                                              
  2058 56B8 68			        pla
  2059 56B9 85 0B		        sta COLB
  2060 				        
  2061 56BB A9 15		        lda #$15
  2062 56BD 4C F8 56		        jmp PUT_
  2063 				        
  2064 56C0 AD A0 02		WYOT:   lda CNTR
  2065 56C3 29 03		        and #3
  2066 56C5 F0 01		        beq *+3
  2067 56C7 60			        rts
  2068 				        
  2069 56C8 20 58 57		        jsr TST_
  2070 56CB 49 03		        eor #$03
  2071 56CD 4C F8 56		        jmp PUT_        
  2072 				;------------------------------------------------------------------------------
  2073 56D0			UNPACK_CAVE:        
  2074 56D0 AD 8B 02		        lda CNUM
  2075 56D3 0A			        asl
  2076 				;- unpack cave to RAM
  2077 56D4 AA			        tax
  2078 56D5 BD C4 A1		        lda CAVESPTRS,x
  2079 56D8 85 F0		        sta inflate_rom.inputPointer
  2080 56DA BD C5 A1		        lda CAVESPTRS+1,x
  2081 56DD 85 F1		        sta inflate_rom.inputPointer+1
  2082 				        
  2083 56DF A9 00		        lda <CAVE
  2084 56E1 85 F2		        sta inflate_rom.outputPointer
  2085 56E3 A9 04		        lda >CAVE
  2086 56E5 85 F3		        sta inflate_rom.outputPointer+1
  2087 				        
  2088 56E7 20 00 3A		        jsr inflate_rom.inflate
  2089 56EA 60			        rts
  2090
  2091
  2092 				        
  2093 				;***************************
  2094 				;* get element
  2095 56EB			GET_:
  2096 56EB 20 58 57		        jsr TST_
  2097 56EE 48			        pha
  2098 56EF A0 00		        ldy #0
  2099 56F1 A9 20		        lda #$20
  2100 56F3 20 0F 57		        jsr PUT1
  2101 56F6 68			        pla
  2102 56F7 60			        rts
  2103 				        
  2104 				;* put element        
  2105 56F8 AE 80 02		PUT_:   ldx X_POS
  2106 56FB E0 10		        cpx #$10
  2107 56FD 90 01		        bcc pt1
  2108 56FF 60			        rts
  2109 5700 AC 81 02		pt1:    ldy Y_POS 
  2110 5703 C0 20		        cpy #$20
  2111 5705 90 01		        bcc pt2
  2112 5707 60			        rts
  2113 5708 48			pt2:    pha
  2114 5709 20 58 57		        jsr TST_
  2115 570C 68			        pla
  2116 570D A0 00		        ldy #$00
  2117 570F 91 86		PUT1:   sta (ADDR),y
  2118 5711 AA			        tax
  2119 5712 A0 00		        ldy #0
  2120 5714 A9 10		        lda >SCRN
  2121 5716 4A			        lsr 
  2122 5717 4A			        lsr
  2123 5718 4A			        lsr
  2124 5719 85 89		        sta SCRA+1
  2125 571B AD 81 02		        lda Y_POS
  2126 571E 0A			        asl
  2127 571F 0A			        asl
  2128 5720 0A			        asl
  2129 5721 0A			        asl
  2130 5722 26 89		        rol SCRA+1
  2131 5724 0A			        asl
  2132 5725 26 89		        rol SCRA+1
  2133 5727 0A			        asl
  2134 5728 26 89		        rol SCRA+1
  2135 572A 0E 80 02		        asl X_POS
  2136 572D 6D 80 02		        adc X_POS
  2137 5730 85 88		        sta SCRA
  2138 5732 4E 80 02		        lsr X_POS
  2139 5735 8A			        txa
  2140 5736 29 7F		        and #$7f
  2141 5738 E0 A0		        cpx #$a0
  2142 573A D0 02		        bne pt3
  2143 573C A9 00		        lda #0
  2144 573E AA			pt3:    tax                  ; $6509
  2145 				;        jsr wait_trig
  2146 573F BD 77 57		        lda LOOK,x
  2147 5742 91 88		        sta (SCRA),y
  2148 5744 C8			        iny
  2149 5745 AA			        tax
  2150 5746 E8			        inx
  2151 5747 8A			        txa
  2152 5748 91 88		        sta (SCRA),y
  2153 574A 18			        clc
  2154 574B 69 1F		        adc #$1f
  2155 574D A0 20		        ldy #$20
  2156 574F 91 88		        sta (SCRA),y
  2157 5751 AA			        tax
  2158 5752 E8			        inx
  2159 5753 8A			        txa
  2160 5754 C8			        iny
  2161 5755 91 88		        sta (SCRA),y
  2162 5757 60			        rts        
  2163 				                        
  2164 5758			TST_:
  2165 5758 A9 00		        lda #0
  2166 575A 85 87		        sta ADDR+1
  2167 575C AD 81 02		        lda Y_POS
  2168 575F 0A			        asl
  2169 5760 0A			        asl
  2170 5761 0A			        asl
  2171 5762 0A			        asl
  2172 5763 26 87		        rol ADDR+1
  2173 5765 0D 80 02		        ora X_POS
  2174 5768 85 86		        sta ADDR
  2175 576A A9 04		        lda >CAVE; #5
  2176 576C 65 87		        adc ADDR+1
  2177 576E 85 87		        sta ADDR+1
  2178 				        
  2179 5770 A0 00		        ldy #$00
  2180 5772 B1 86		        lda (ADDR),y
  2181 5774 C9 20		        cmp #$20
  2182 5776 60			        rts        
  2183
  2184 5777 80 46 00 00 48 80 + LOOK:       .byte $80,$46,$00,$00,$48,$80,$4E,$4E
  2185 577F 4E 4E 4E 5E 5E CA +             .byte $4E,$4E,$4E,$5E,$5E,$CA,$CA,$9E
  2186 5787 00 80 C4 42 1A 1A +             .byte $00,$80,$C4,$42,$1A,$1A,$9A,$4C
  2187 578F 4A 00 00 1A 4A 4C +             .byte $4A,$00,$00,$1A,$4A,$4C,$48,$46
  2188 5797 40 56 00 CE 5A 50 +             .byte $40,$56,$00,$CE,$5A,$50,$14,$4C
  2189 579F 16 18 5E 54 46 4C +             .byte $16,$18,$5E,$54,$46,$4C,$48,$4A
  2190 57A7 9C 9C 9C 9C 9C 9C +             .byte $9C,$9C,$9C,$9C,$9C,$9C,$9C,$9C
  2191 57AF 9C 9C 40 00 48 5C +             .byte $9C,$9C,$40,$00,$48,$5C,$46,$52
  2192 57B7 58 0E 0E 0E 0E 10 +             .byte $58,$0E,$0E,$0E,$0E,$10,$10,$10
  2193 57BF 10 12 12 12 12 92 +             .byte $10,$12,$12,$12,$12,$92,$92,$0C
  2194 57C7 0C 0A 0A 0C 0C 0A +             .byte $0C,$0A,$0A,$0C,$0C,$0A,$0A,$02
  2195 57CF 02 02 02 0A 00 0C +             .byte $02,$02,$02,$0A,$00,$0C,$4A,$00
  2196 57D7 58 02 04 06 08 06 +             .byte $58,$02,$04,$06,$08,$06,$04,$02
  2197 57DF 00 40 02 04 06 08 +             .byte $00,$40,$02,$04,$06,$08,$40,$02
  2198 57E7 04 06 08 06 04 02 +             .byte $04,$06,$08,$06,$04,$02,$5E,$5E
  2199 57EF 00 00 C4 00 C4 00 +             .byte $00,$00,$C4,$00,$C4,$00,$00,$00
  2200
  2201
  2202 				;********************
  2203 57F7 62 63 64 65 66 67 + NEXT:   .byte $62,$63,$64,$65,$66,$67,$20,$00
  2204 57FF 6A 6B 6C 6D 2A 6F +         .byte $6A,$6B,$6C,$6D,$2A,$6F,$70,$71
  2205 5807 72 73 74 75 3A 77 +         .byte $72,$73,$74,$75,$3A,$77,$61,$00
  2206 580F 00 20		        .byte $00,$20
  2207 				;********************
  2208 5811 00 00		PROC:       .word $0000
  2209 5813 45 53		            .word DZ3R
  2210 5815 00 00 00 00		            .word $0000,$0000
  2211 5819 19 53		            .word DZ3L
  2212 581B 00 00 00 00		            .word $0000,$0000
  2213 581F 9B 50 A6 50 B1 50 +             .word BEZL,BEZR,BEZU,BEZD
  2214 5827 74 51 8E 51 50 54 +             .word MGFL,MGFR,MODR,MODL
  2215 582F 00 00 00 00		            .word $0000,$0000
  2216 5833 63 54		            .word ZAPO
  2217 5835 00 00 00 00		            .word $0000,$0000
  2218 5839 9D 56 C0 56 C0 56 +             .word WYZA,WYOT,WYOT,DZ3D
  2219 5841 76 53		            .word DZ3U
  2220 5843 00 00 00 00		            .word $0000,$0000
  2221 5847 44 4C 07 52 2E 52 +             .word WFAC,DZ1U,DZ1D,DZ1L
  2222 584F E0 51		            .word DZ1R
  2223 5851 00 00 00 00 00 00 +             .word $0000,$0000,$0000,$0000
  2224 5859 00 00 00 00		            .word $0000,$0000
  2225 585D 06 56 EE 52 4D 51	            .word LEDZ,DZ2D,MGNL
  2226 5863 00 00		            .word $0000
  2227 5865 5D 4C		            .word MFAC
  2228 5867 00 00		            .word $0000
  2229 5869 F0 53 F0 53 F0 53 +             .word DZRU,DZRU,DZRU,DZRU
  2230 5871 67 4E 67 4E 67 4E +             .word TELP,TELP,TELP,TELP
  2231 5879 67 4E 67 4E 67 4E +             .word TELP,TELP,TELP,TELP
  2232 5881 67 4E 67 4E 06 50	            .word TELP,TELP,NIES
  2233 5887 00 00		            .word $0000
  2234 5889 58 52		            .word DZ2L
  2235 588B 00 00		            .word $0000
  2236 588D 9F 52		            .word DZ2R
  2237 588F 00 00 00 00		            .word $0000,$0000
  2238 5893 B3 54 D0 54 ED 54 +             .word STWA,STWB,STWC,STWD
  2239 589B 27 55 44 55 61 55 +             .word STWE,STWF,STWG,STWH
  2240 58A3 9B 55 AB 55 BB 55 +             .word STWI,STWJ,STWK,STWL
  2241 58AB DB 55 EB 55 A4 51 +             .word TOPL,TOPR,PO1L,PO1R
  2242 58B3 12 52 39 52 5E 52 +             .word PO1U,PO1D,PO2L,PO2R
  2243 58BB CD 52 F4 52 1F 53 +             .word PO2U,PO2D,PO3L,PO3R
  2244 58C3 7C 53 AD 53		            .word PO3U,PO3D
  2245 58C7 00 00 00 00 00 00	            .word $0000,$0000,$0000
  2246 58CD C7 52		            .word DZ2U
  2247 58CF 00 00		            .word $0000
  2248 58D1 DB 50		            .word BOMB
  2249 				;********************
  2250 58D3 00 02 00 00 02 00 + WHAT:       .byte $00,$02,$00,$00,$02,$00,$02,$02
  2251 58DB 02 02 02 00 00 02 +             .byte $02,$02,$02,$00,$00,$02,$02,$03
  2252 58E3 00 00 02 00 00 00 +             .byte $00,$00,$02,$00,$00,$00,$00,$02
  2253 58EB 02 00 00 00 02 02 +             .byte $02,$00,$00,$00,$02,$02,$02,$02
  2254 58F3 03 03 00 02 02 03 +             .byte $03,$03,$00,$02,$02,$03,$03,$02
  2255 58FB 00 00 03 03 02 02 +             .byte $00,$00,$03,$03,$02,$02,$02,$02
  2256 5903 02 02 02 02 02 02 +             .byte $02,$02,$02,$02,$02,$02,$02,$02
  2257 590B 02 02 02 00 02 02 +             .byte $02,$02,$02,$00,$02,$02,$02,$03
  2258 5913 03 03 03 03 03 03 +             .byte $03,$03,$03,$03,$03,$03,$03,$03
  2259 591B 03 03 03 03 03 03 +             .byte $03,$03,$03,$03,$03,$03,$03,$00
  2260 5923 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
  2261 592B 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$02,$00
  2262 5933 00 02 02 02 02 02 +             .byte $00,$02,$02,$02,$02,$02,$02,$02
  2263 593B 02 02 02 02 02 02 +             .byte $02,$02,$02,$02,$02,$02,$02,$02
  2264 5943 02 02 02 02 02 02 +             .byte $02,$02,$02,$02,$02,$02,$00,$00
  2265 594B 00 00 00 00 02 00 +             .byte $00,$00,$00,$00,$02,$00,$00,$00
  2266
  2267 				;********************
  2268 5953 48			DLI:    pha
  2269
  2270 5954 AD 9D 02		        lda DLI_HLP
  2271 5957 F0 37		        beq DLI1
  2272 5959 C9 01		        cmp #1
  2273 595B F0 09		        beq DLI2
  2274 				        
  2275 595D A5 02		        lda RTCLOKL
  2276 595F 4A			        lsr
  2277 5960 4A			        lsr
  2278 5961 8D 17 C0		        sta COLPF1
  2279 				        
  2280 5964 68			        pla
  2281 5965 40			        rti
  2282 				        
  2283 5966 A5 10		DLI2:   lda COLOR4
  2284 5968 8D 12 C0		        sta COLPM0
  2285 596B 8D 13 C0		        sta COLPM1
  2286 596E 8D 14 C0		        sta COLPM2
  2287 5971 8D 15 C0		        sta COLPM3
  2288 				        
  2289 5974 8D 0A D4		        sta WSYNC
  2290 5977 A9 08		        lda >IFNT_RAM
  2291 5979 8D 09 D4		        sta CHBASE
  2292 				        
  2293 597C A5 10		        lda COLOR4
  2294 597E 8D 18 C0		        sta COLPF2
  2295 5981 A9 0A		        lda #$0a
  2296 5983 8D 17 C0		        sta COLPF1
  2297 				        
  2298 5986 A9 22		        lda #34
  2299 5988 8D 00 D4		        sta DMACTL
  2300 				        
  2301 598B EE 9D 02		        inc DLI_HLP
  2302 598E 68			        pla
  2303 598F 40			        rti
  2304 				        
  2305 5990 A5 0B		DLI1:   lda COLB
  2306 5992 8D 0A D4		        sta WSYNC
  2307 5995 8D 12 C0		        sta COLPM0
  2308 5998 8D 13 C0		        sta COLPM1
  2309 599B 8D 14 C0		        sta COLPM2
  2310 599E 8D 15 C0		        sta COLPM3
  2311
  2312 59A1 EE 9D 02		        inc DLI_HLP
  2313 59A4 68			        pla
  2314 59A5 40			        rti
  2315
  2316 				;********************
  2317 				;*      VBLK
  2318 				;********************
  2319 59A6			CVBL:
  2320 59A6 20 60 5B		        jsr SOUND.SOUNDV
  2321 				        
  2322 59A9 AD 07 0B		        lda IFNT_RAM+$307
  2323 59AC 48			        pha
  2324 59AD A2 06		        ldx #6
  2325 59AF			mov_ramka:
  2326 59AF BD 00 0B		        lda IFNT_RAM+$300,x
  2327 59B2 9D 01 0B		        sta IFNT_RAM+$301,x
  2328 59B5 CA			        dex
  2329 59B6 10 F7		        bpl mov_ramka
  2330 59B8 68			        pla
  2331 59B9 8D 00 0B		        sta IFNT_RAM+$300
  2332
  2333 				;* display info
  2334
  2335 59BC AD 8B 02		        lda CNUM
  2336 59BF EE 8B 02		        inc CNUM
  2337 59C2 48			        pha
  2338 59C3 A9 00		        lda #0
  2339 59C5 8D 9E 02		        sta BDEC
  2340 59C8 A2 07		        ldx #7
  2341 59CA F8			        sed
  2342 59CB			dis_info1:
  2343 59CB 0E 8B 02		        asl CNUM
  2344 59CE 6D 9E 02		        adc BDEC
  2345 59D1 8D 9E 02		        sta BDEC
  2346 59D4 CA			        dex
  2347 59D5 10 F4		        bpl dis_info1
  2348 59D7 D8			        cld
  2349 59D8 A0 25		        ldy #$25
  2350 59DA 20 FB 5A		        jsr DISPLAY_BYTE
  2351 59DD 68			        pla
  2352 59DE 8D 8B 02		        sta CNUM 
  2353 				        
  2354 59E1 A0 1F		        ldy #$1f
  2355 59E3 AD 90 02		        lda NABO
  2356 59E6 20 FB 5A		        jsr DISPLAY_BYTE
  2357 				        
  2358 59E9 A0 19		        ldy #$19
  2359 59EB AD 8C 02		        lda KEYS
  2360 59EE 20 FB 5A		        jsr DISPLAY_BYTE
  2361 				        
  2362 59F1 A0 13		        ldy #$13
  2363 59F3 AD 8D 02		        lda LIVS
  2364 59F6 20 FB 5A		        jsr DISPLAY_BYTE
  2365 				        
  2366 59F9 A0 0D		        ldy #$0d
  2367 59FB AD 8E 02		        lda ZEBR
  2368 59FE 20 FB 5A		        jsr DISPLAY_BYTE
  2369 				        
  2370 5A01 A2 02		        ldx #$02
  2371 5A03 A0 07		        ldy #$07
  2372 5A05			dis_info2:
  2373 5A05 BD 92 02		        lda SCOR,x
  2374 5A08 20 FB 5A		        jsr DISPLAY_BYTE
  2375 5A0B CA			        dex
  2376 5A0C 10 F7		        bpl dis_info2 
  2377 				        
  2378 				;* players
  2379
  2380 5A0E A5 10		        lda COLOR4
  2381 5A10 8D 12 C0		        sta COLPM0     
  2382 5A13 8D 13 C0		        sta COLPM1     
  2383 5A16 8D 14 C0		        sta COLPM2     
  2384 5A19 8D 15 C0		        sta COLPM3
  2385 5A1C A9 00		        lda #0
  2386 5A1E 8D 9D 02		        sta DLI_HLP
  2387 5A21 85 04		        sta ATRACT
  2388 				        
  2389 				;* przesunac ekran?
  2390
  2391 5A23 AD 87 02		        lda VSF
  2392 5A26 D0 54		        bne SCRL
  2393 				        
  2394 5A28 18			        clc
  2395 5A29 AD 05 03		        lda RAM_DLSA
  2396 5A2C 69 80		        adc <128
  2397 5A2E AA			        tax 
  2398 5A2F AD 06 03		        lda RAM_DLSA+1
  2399 5A32 69 00		        adc >128
  2400 				        
  2401 5A34 E4 8C		        cpx FADR
  2402 5A36 E5 8D		        sbc FADR+1
  2403 5A38 90 19		        bcc CVB1
  2404 				        
  2405 				;* set w gre
  2406
  2407 5A3A AD 05 03		        lda RAM_DLSA
  2408 5A3D C9 01		        cmp <SCRN+1
  2409 5A3F AD 06 03		        lda RAM_DLSA+1
  2410 5A42 E9 10		        sbc >SCRN+1
  2411 5A44 90 1F		        bcc exitv
  2412 				        
  2413 5A46 A9 0E		        lda #$0e
  2414 5A48 8D 88 02		        sta VSC
  2415 5A4B A9 82		        lda #$82
  2416 5A4D 8D 87 02		        sta VSF
  2417 5A50 4C 7C 5A		        jmp SCRL
  2418 				        
  2419 5A53 18			CVB1:   clc
  2420 5A54 AD 05 03		        lda RAM_DLSA
  2421 5A57 69 00		        adc <512
  2422 5A59 AA			        tax
  2423 5A5A AD 06 03		        lda RAM_DLSA+1
  2424 5A5D 69 02		        adc >512
  2425 				        
  2426 5A5F E4 8C		        cpx FADR
  2427 5A61 E5 8D		        sbc FADR+1
  2428 5A63 90 01		        bcc CVB2
  2429 5A65			exitv:            
  2430 5A65 60			        rts
  2431
  2432 				;* set w d
  2433 5A66 AD 05 03		CVB2:   lda RAM_DLSA
  2434 5A69 C9 40		        cmp <SCRN+1344
  2435 5A6B AD 06 03		        lda RAM_DLSA+1
  2436 5A6E E9 15		        sbc >SCRN+1344
  2437 5A70 B0 F3		        bcs exitv
  2438 				        
  2439 5A72 A9 02		        lda #2
  2440 5A74 8D 88 02		        sta VSC
  2441 5A77 A9 42		        lda #$42
  2442 5A79 8D 87 02		        sta VSF
  2443 5A7C			SCRL:  
  2444 5A7C 2C 87 02		        bit VSF
  2445 5A7F 10 42		        bpl SCRLDW
  2446 				        
  2447 5A81 AD 88 02		        lda VSC
  2448 5A84 D0 16		        bne SCRLUP1
  2449 5A86 8D 05 D4		        sta VSCROL
  2450 				        
  2451 5A89 A9 0E		        lda #$0e
  2452 5A8B 8D 88 02		        sta VSC
  2453 				        
  2454 5A8E AD 87 02		        lda VSF
  2455 5A91 CE 87 02		        dec VSF
  2456 5A94 29 0F		        and #$0f
  2457 5A96 D0 03		        bne exitv2
  2458 5A98 8D 87 02		        sta VSF
  2459 5A9B 60			exitv2: rts
  2460 5A9C			SCRLUP1:
  2461 5A9C CE 88 02		        dec VSC
  2462 5A9F CE 88 02		        dec VSC
  2463 5AA2 29 07		        AND #7
  2464 5AA4 8D 05 D4		        sta VSCROL
  2465 5AA7 C9 06		        cmp #6
  2466 5AA9 D0 F0		        bne exitv2
  2467 				        
  2468 5AAB 38			        sec
  2469 5AAC AD 05 03		        lda RAM_DLSA
  2470 5AAF E9 20		        sbc #$20
  2471 5AB1 8D 05 03		        sta RAM_DLSA
  2472 5AB4 B0 03		        bcs scrup1
  2473 5AB6 CE 06 03		        dec RAM_DLSA+1
  2474 5AB9			scrup1: 
  2475 5AB9 A9 06		        lda #6
  2476 5ABB 8D 05 D4		        sta VSCROL
  2477 5ABE AD 88 02		        lda VSC
  2478 5AC1 D0 D8		        bne exitv2       
  2479
  2480 5AC3 AD 88 02		SCRLDW: lda VSC
  2481 5AC6 EE 88 02		        inc VSC
  2482 5AC9 EE 88 02		        inc VSC
  2483 5ACC 29 07		        and #7
  2484 5ACE 8D 05 D4		        sta VSCROL
  2485 5AD1 D0 27		        bne exitv3
  2486 5AD3 18			ldw:    clc
  2487 5AD4 AD 05 03		        lda RAM_DLSA
  2488 5AD7 69 20		        adc #$20
  2489 5AD9 8D 05 03		        sta RAM_DLSA
  2490 5ADC 90 03		        bcc ldw1
  2491 5ADE EE 06 03		        inc RAM_DLSA+1
  2492 5AE1			ldw1:   
  2493 5AE1 AD 88 02		        lda VSC
  2494 5AE4 C9 10		        cmp #$10
  2495 5AE6 90 12		        bcc exitv3
  2496 				        
  2497 5AE8 AD 87 02		        lda VSF
  2498 5AEB CE 87 02		        dec VSF
  2499 5AEE 29 0F		        and #$0f
  2500 5AF0 D0 03		        bne ldw2
  2501 5AF2 8D 87 02		        sta VSF
  2502 5AF5			ldw2: 
  2503 5AF5 A9 02		        lda #2
  2504 5AF7 8D 88 02		        sta VSC
  2505 5AFA			exitv3:
  2506 5AFA 60			        rts
  2507 				        
  2508 5AFB			DISPLAY_BYTE:
  2509 5AFB 48			        pha
  2510 5AFC 20 04 5B		        jsr DSPD
  2511 5AFF 68			        pla
  2512 5B00 4A			        lsr
  2513 5B01 4A			        lsr
  2514 5B02 4A			        lsr
  2515 5B03 4A			        lsr
  2516 5B04 29 0F		DSPD:   and #$0f
  2517 5B06 18			        clc
  2518 5B07 69 0B		        adc #$0b
  2519 5B09 99 25 03		        sta RAM_INFO,y
  2520 5B0C E9 09		        sbc #$09
  2521 5B0E 99 4D 03		        sta RAM_INFO+40,y
  2522 5B11 88			        dey
  2523 5B12 60			        rts
  2524
  2525 5B13			wait_trig:
  2526 5B13 48			        pha
  2527 5B14			wtloop:
  2528 5B14 AD 10 C0		        lda TRIG0
  2529 5B17 D0 FB		        bne wtloop
  2530 5B19 68			        pla
  2531 5B1A 60			        rts
  2532 				        
  2533
  2534 				.ENDL
   285 5B1B			        icl 'inc/sound.asm'
Source: sound.asm
     1 5B1B			SOUND     .LOCAL
     2 5B1B AA			SOUND_: tax
     3 5B1C 30 30		        bmi psst
     4 				        
     5 5B1E A9 00		        lda #0
     6 5B20 85 9B		        sta _SCRA+1
     7 5B22 8A			        txa
     8 5B23 0A			        asl
     9 5B24 0A			        asl
    10 5B25 0A			        asl
    11 5B26 26 9B		        rol _SCRA+1
    12 5B28 0A			        asl
    13 5B29 26 9B		        rol _SCRA+1
    14 5B2B 0A			        asl
    15 5B2C 26 9B		        rol _SCRA+1
    16 5B2E 69 AB		        adc <TABS
    17 5B30 85 9A		        sta _SCRA
    18 5B32 A5 9B		        lda _SCRA+1
    19 5B34 69 5B		        adc >TABS
    20 5B36 85 9B		        sta _SCRA+1
    21 				        
    22 5B38 E0 03		        cpx #3
    23 5B3A 90 02		        bcc *+4
    24 5B3C A2 03		        ldx #3
    25 				        
    26 5B3E A9 10		        lda #$10
    27 5B40 95 8E		        sta _PNTR,x
    28 				        
    29 5B42 8A			        txa
    30 5B43 0A			        asl
    31 5B44 AA			        tax
    32 5B45 A5 9A		        lda _SCRA
    33 5B47 95 92		        sta _ADDR,x
    34 5B49 A5 9B		        lda _SCRA+1
    35 5B4B 95 93		        sta _ADDR+1,x
    36 5B4D 60			        rts
    37
    38 5B4E A9 03		psst:   lda #3
    39 5B50 8D 0F E8		        sta SKCTL
    40 				        
    41 5B53 A9 00		        lda #0
    42 5B55 A2 08		        ldx #8
    43 5B57 95 8E		rese:   sta _PNTR,x
    44 5B59 9D 00 E8		        sta VOIC,x
    45 5B5C CA			        dex
    46 5B5D 10 F8		        bpl rese
    47 5B5F 60			        rts
    48 				        
    49 				;* Play -------------
    50
    51 5B60 A5 02		SOUNDV: lda RTCLOKL ; 20
    52 5B62 29 03		        and #3
    53 5B64 F0 01		        beq *+3
    54 5B66 60			        rts
    55 				        
    56 5B67 A2 03		        ldx #3
    57 5B69 A0 06		        ldy #6
    58 5B6B B5 8E		so1:    lda _PNTR,x
    59 5B6D F0 06		        beq so2
    60 5B6F 20 81 5B		        jsr SOPL
    61 5B72 4C 7B 5B		        jmp so3
    62 				        
    63 5B75 99 00 E8		so2:    sta VOIC,y
    64 5B78 99 01 E8		        sta VOIC+1,y
    65 				        
    66 5B7B 88			so3:    dey
    67 5B7C 88			        dey
    68 5B7D CA			        dex
    69 5B7E 10 EB		        bpl so1
    70 5B80 60			        rts
    71 				;* ------------------
    72
    73 5B81 98			SOPL:   tya
    74 5B82 48			        pha
    75 				        
    76 5B83 B9 92 00		        lda _ADDR,y
    77 5B86 85 9A		        sta _SCRA
    78 5B88 B9 93 00		        lda _ADDR+1,y
    79 5B8B 85 9B		        sta _SCRA+1
    80 				        
    81 5B8D B4 8E		        ldy _PNTR,x
    82 5B8F 88			        dey
    83 5B90 94 8E		        sty _PNTR,x
    84 5B92 98			        tya
    85 5B93 0A			        asl
    86 5B94 A8			        tay
    87 5B95 B1 9A		        lda (_SCRA),y
    88 5B97 85 9C		        sta _HLP
    89 5B99 C8			        iny
    90 5B9A B1 9A		        lda (_SCRA),y
    91 5B9C 85 9D		        sta _HLP+1
    92 				        
    93 5B9E 68			        pla
    94 5B9F A8			        tay
    95 5BA0 A5 9D		        lda _HLP+1
    96 5BA2 99 00 E8		        sta VOIC,y
    97 5BA5 A5 9C		        lda _HLP
    98 5BA7 99 01 E8		        sta VOIC+1,y
    99 5BAA 60			        rts
   100 				                
   101 				;* ------------------
   102
   103 = 5BAB			TABS EQU *
   104
   105 				;* wybuch -----------   0
   106
   107 5BAB 00 00		        .word $0000
   108 5BAD 00 00		        .word $0000
   109 5BAF 00 00		        .word $0000
   110 5BB1 00 00		        .word $0000
   111 5BB3 81 22		        .word $2281
   112 5BB5 81 22		        .word $2281
   113 5BB7 82 22		        .word $2282
   114 5BB9 83 22		        .word $2283
   115 5BBB 83 22		        .word $2283
   116 5BBD 84 22		        .word $2284
   117 5BBF 85 22		        .word $2285
   118 5BC1 85 22		        .word $2285
   119 5BC3 86 22		        .word $2286
   120 5BC5 87 22		        .word $2287
   121 5BC7 88 22		        .word $2288
   122 5BC9 86 22		        .word $2286
   123
   124 				;* strzal -----------   1
   125
   126 5BCB 00 00		        .word $0000
   127 5BCD 00 00		        .word $0000
   128 5BCF 00 00		        .word $0000
   129 5BD1 00 00		        .word $0000
   130 5BD3 00 00		        .word $0000
   131 5BD5 00 00		        .word $0000
   132 5BD7 00 00		        .word $0000
   133 5BD9 00 00		        .word $0000
   134 5BDB 00 00		        .word $0000
   135 5BDD 00 00		        .word $0000
   136 5BDF 00 00		        .word $0000
   137 5BE1 00 00		        .word $0000
   138 5BE3 00 00		        .word $0000
   139 5BE5 81 03		        .word $0381
   140 5BE7 82 02		        .word $0282
   141 5BE9 83 01		        .word $0183
   142
   143 				;* stuk -------------   2
   144
   145 5BEB 00 00		        .word $0000
   146 5BED 00 00		        .word $0000
   147 5BEF 00 00		        .word $0000
   148 5BF1 00 00		        .word $0000
   149 5BF3 00 00		        .word $0000
   150 5BF5 00 00		        .word $0000
   151 5BF7 00 00		        .word $0000
   152 5BF9 00 00		        .word $0000
   153 5BFB 00 00		        .word $0000
   154 5BFD 00 00		        .word $0000
   155 5BFF 00 00		        .word $0000
   156 5C01 00 00		        .word $0000
   157 5C03 00 00		        .word $0000
   158 5C05 00 00		        .word $0000
   159 5C07 00 00		        .word $0000
   160 5C09 81 01		        .word $0181
   161
   162 				;* teleport ---------   3
   163
   164 5C0B 00 00		        .word $0000
   165 5C0D A1 60		        .word $60A1
   166 5C0F A1 40		        .word $40A1
   167 5C11 A1 20		        .word $20A1
   168 5C13 A2 61		        .word $61A2
   169 5C15 A2 42		        .word $42A2
   170 5C17 A2 23		        .word $23A2
   171 5C19 A2 64		        .word $64A2
   172 5C1B A3 45		        .word $45A3
   173 5C1D A3 26		        .word $26A3
   174 5C1F A3 67		        .word $67A3
   175 5C21 A3 48		        .word $48A3
   176 5C23 A4 29		        .word $29A4
   177 5C25 A4 6A		        .word $6AA4
   178 5C27 A4 4B		        .word $4BA4
   179 5C29 A4 2C		        .word $2CA4
   180
   181 				;* srubka -----------   4
   182
   183 5C2B 00 00		        .word $0000
   184 5C2D 00 00		        .word $0000
   185 5C2F 00 00		        .word $0000
   186 5C31 00 00		        .word $0000
   187 5C33 00 00		        .word $0000
   188 5C35 00 00		        .word $0000
   189 5C37 00 00		        .word $0000
   190 5C39 00 00		        .word $0000
   191 5C3B 00 00		        .word $0000
   192 5C3D 00 00		        .word $0000
   193 5C3F 00 00		        .word $0000
   194 5C41 00 00		        .word $0000
   195 5C43 A1 2B		        .word $2BA1
   196 5C45 A2 2A		        .word $2AA2
   197 5C47 A3 2B		        .word $2BA3
   198 5C49 A4 2A		        .word $2AA4
   199
   200 				;* extra life -------   5
   201
   202 5C4B A1 45		        .word $45A1
   203 5C4D A2 44		        .word $44A2
   204 5C4F A3 45		        .word $45A3
   205 5C51 A6 44		        .word $44A6
   206 5C53 A3 51		        .word $51A3
   207 5C55 A6 50		        .word $50A6
   208 5C57 A1 45		        .word $45A1
   209 5C59 A2 44		        .word $44A2
   210 5C5B A3 45		        .word $45A3
   211 5C5D A6 44		        .word $44A6
   212 5C5F A3 8A		        .word $8AA3
   213 5C61 A6 88		        .word $88A6
   214 5C63 A3 8A		        .word $8AA3
   215 5C65 A6 88		        .word $88A6
   216 5C67 A3 8A		        .word $8AA3
   217 5C69 A6 88		        .word $88A6
   218
   219 				;* drzwi ------------   6
   220
   221 5C6B 00 00		        .word $0000
   222 5C6D 00 00		        .word $0000
   223 5C6F 00 00		        .word $0000
   224 5C71 00 00		        .word $0000
   225 5C73 00 00		        .word $0000
   226 5C75 01 88		        .word $8801
   227 5C77 C1 94		        .word $94C1
   228 5C79 03 A9		        .word $A903
   229 5C7B C4 92		        .word $92C4
   230 5C7D C5 B0		        .word $B0C5
   231 5C7F C6 AD		        .word $ADC6
   232 5C81 C7 BE		        .word $BEC7
   233 5C83 C8 CE		        .word $CEC8
   234 5C85 C8 D4		        .word $D4C8
   235 5C87 C7 E8		        .word $E8C7
   236 5C89 08 F8		        .word $F808
   237
   238 				;* naboje -----------   7
   239
   240 5C8B 00 00		        .word $0000
   241 5C8D C1 01		        .word $01C1
   242 5C8F 00 00		        .word $0000
   243 5C91 C1 01		        .word $01C1
   244 5C93 00 00		        .word $0000
   245 5C95 C2 01		        .word $01C2
   246 5C97 00 00		        .word $0000
   247 5C99 C3 01		        .word $01C3
   248 5C9B 00 00		        .word $0000
   249 5C9D C4 01		        .word $01C4
   250 5C9F 00 00		        .word $0000
   251 5CA1 C3 01		        .word $01C3
   252 5CA3 00 00		        .word $0000
   253 5CA5 C2 01		        .word $01C2
   254 5CA7 00 00		        .word $0000
   255 5CA9 C1 01		        .word $01C1
   256
   257 				;* skrzynia ---------   8
   258
   259 5CAB 00 00		        .word $0000
   260 5CAD 00 00		        .word $0000
   261 5CAF 00 00		        .word $0000
   262 5CB1 00 00		        .word $0000
   263 5CB3 00 00		        .word $0000
   264 5CB5 00 00		        .word $0000
   265 5CB7 00 00		        .word $0000
   266 5CB9 00 00		        .word $0000
   267 5CBB 00 00		        .word $0000
   268 5CBD 00 00		        .word $0000
   269 5CBF 00 00		        .word $0000
   270 5CC1 00 00		        .word $0000
   271 5CC3 00 00		        .word $0000
   272 5CC5 01 82		        .word $8201
   273 5CC7 02 80		        .word $8002
   274 5CC9 01 81		        .word $8101
   275
   276 				;* klucz ------------   9
   277 				                   
   278 5CCB 00 00		        .word $0000
   279 5CCD 00 00		        .word $0000
   280 5CCF 00 00		        .word $0000
   281 5CD1 00 00		        .word $0000
   282 5CD3 00 00		        .word $0000
   283 5CD5 00 00		        .word $0000
   284 5CD7 00 00		        .word $0000
   285 5CD9 00 00		        .word $0000
   286 5CDB 00 00		        .word $0000
   287 5CDD 00 00		        .word $0000
   288 5CDF A1 11		        .word $11A1
   289 5CE1 A2 12		        .word $12A2
   290 5CE3 A3 13		        .word $13A3
   291 5CE5 A4 14		        .word $14A4
   292 5CE7 A5 15		        .word $15A5
   293 5CE9 A6 16		        .word $16A6
   294
   295 				;* wybuszek ---------   a
   296
   297 5CEB 00 00		        .word $0000
   298 5CED 00 00		        .word $0000
   299 5CEF 00 00		        .word $0000
   300 5CF1 00 00		        .word $0000
   301 5CF3 00 00		        .word $0000
   302 5CF5 00 00		        .word $0000
   303 5CF7 00 00		        .word $0000
   304 5CF9 00 00		        .word $0000
   305 5CFB 00 00		        .word $0000
   306 5CFD 81 05		        .word $0581
   307 5CFF 82 05		        .word $0582
   308 5D01 83 05		        .word $0583
   309 5D03 84 05		        .word $0584
   310 5D05 84 06		        .word $0684
   311 5D07 83 06		        .word $0683
   312 5D09 82 06		        .word $0682
   313
   314 				;* wejscie              b
   315 				                   
   316 5D0B A1 0A		        .word $0AA1
   317 5D0D A2 0A		        .word $0AA2
   318 5D0F A4 0A		        .word $0AA4
   319 5D11 A6 0A		        .word $0AA6
   320 5D13 A8 0A		        .word $0AA8
   321 5D15 00 00		        .word $0000
   322 5D17 00 00		        .word $0000
   323 5D19 00 00		        .word $0000
   324 5D1B 00 00		        .word $0000
   325 5D1D 87 08		        .word $0887
   326 5D1F 86 10		        .word $1086
   327 5D21 85 20		        .word $2085
   328 5D23 84 30		        .word $3084
   329 5D25 83 40		        .word $4083
   330 5D27 82 50		        .word $5082
   331 5D29 81 60		        .word $6081
   332
   333 				;*                      c
   334
   335 5D2B 00 00		        .word $0000
   336 5D2D A1 10		        .word $10A1
   337 5D2F A1 10		        .word $10A1
   338 5D31 A2 10		        .word $10A2
   339 5D33 A3 10		        .word $10A3
   340 5D35 A4 10		        .word $10A4
   341 5D37 A1 10		        .word $10A1
   342 5D39 A2 10		        .word $10A2
   343 5D3B A3 10		        .word $10A3
   344 5D3D A4 10		        .word $10A4
   345 5D3F A5 10		        .word $10A5
   346 5D41 A2 10		        .word $10A2
   347 5D43 A3 10		        .word $10A3
   348 5D45 A5 10		        .word $10A5
   349 5D47 A7 10		        .word $10A7
   350 5D49 A8 10		        .word $10A8
   351
   352 				;* otwarcie wyjscia     d
   353
   354 5D4B 01 18		        .word $1801
   355 5D4D 01 08		        .word $0801
   356 5D4F 02 18		        .word $1802
   357 5D51 02 08		        .word $0802
   358 5D53 03 18		        .word $1803
   359 5D55 03 08		        .word $0803
   360 5D57 04 18		        .word $1804
   361 5D59 04 08		        .word $0804
   362 5D5B 05 18		        .word $1805
   363 5D5D 05 08		        .word $0805
   364 5D5F 06 18		        .word $1806
   365 5D61 06 08		        .word $0806
   366 5D63 08 18		        .word $1808
   367 5D65 08 08		        .word $0808
   368 5D67 0A 18		        .word $180A
   369 5D69 0A 08		        .word $080A
   370
   371 				;* przyciaganie         e
   372
   373 5D6B 08 10		        .word $1008
   374 5D6D 08 00		        .word $0008
   375 5D6F 07 00		        .word $0007
   376 5D71 07 00		        .word $0007
   377 5D73 06 10		        .word $1006
   378 5D75 06 00		        .word $0006
   379 5D77 05 00		        .word $0005
   380 5D79 05 00		        .word $0005
   381 5D7B 04 10		        .word $1004
   382 5D7D 04 00		        .word $0004
   383 5D7F 03 00		        .word $0003
   384 5D81 03 00		        .word $0003
   385 5D83 02 10		        .word $1002
   386 5D85 02 00		        .word $0002
   387 5D87 01 00		        .word $0001
   388 5D89 01 00		        .word $0001
   389
   390 				;********************
   391 				.ENDL
   286 5D8B			        icl 'inc/languages.asm'
Source: languages.asm
     1 5D8B			LANGUAGE  .LOCAL
     2 5D8B 70 70 70 70 70 70 + DLIST   .byte $70, $70, $70, $70, $70, $70, $70, $70
     3 5D93 4A 00 10 00 0A	        .byte $4A, <SCRN, >SCRN, $00, $0A
     4 5D98 00 0A 00 0A 00 0A +         .byte $00, $0A, $00, $0A, $00, $0A, $00, $0A
     5 5DA0 00 0A 00 0A F0	        .byte $00, $0A, $00, $0A, $f0
     6 5DA5 4C 2B 47 40 42	        .byte $4c, <TITLE.LINE, >TITLE.LINE, $40, $42
     7 5DAA 80 10 02 02 02	        .byte <(SCRN+128), >(SCRN+128), $02, $02, $02
     8 5DAF 40 4C 2B 47 41 8B +         .byte $40, $4c, <TITLE.LINE, >TITLE.LINE, $41, <DLIST, >DLIST
     9
    10 5DB6 00 00 00 00 00 00 + TEXT    .byte "             POLSKI             "
    11 5DD6 00 00 00 00 00 00 +         .byte "             MAGYAR             "
    12 5DF6 00 00 00 00 00 00 +         .byte "             ENGLISH            "
    13 5E16 00 00 00 00 00 00 +         .byte "             DEUTSCH            "
    14 				        
    15 5E36			CHOOSE:
    16 5E36 20 F4 41		        jsr TITLE.TSETUP
    17 5E39 20 83 46		        jsr TITLE.HALT
    18 				        
    19 5E3C A9 8B		        lda <DLIST
    20 5E3E 85 05		        sta SDLSTL
    21 5E40 A9 5D		        lda >DLIST
    22 5E42 85 06		        sta SDLSTH
    23
    24 5E44 A9 21		        lda #33
    25 5E46 85 07		        sta SDMCTL
    26
    27 5E48 20 5F 45		        jsr TITLE.CLS
    28 				        
    29 5E4B A2 80		        ldx #128
    30 5E4D BD B6 5D		cloop:  lda TEXT,x
    31 5E50 9D 80 10		        sta SCRN+128,x
    32 5E53 CA			        dex
    33 5E54 10 F7		        bpl cloop
    34 				        
    35 5E56 A9 00		        lda #0
    36 5E58 8D A3 02		        sta LANG_HLP
    37 5E5B 85 02		        sta RTCLOKL
    38 				;---------------------------------------
    39 5E5D			main:
    40 5E5D 20 C5 45		        jsr TITLE.BIGR
    41 				        
    42 5E60 A9 8B		        lda <(SCRN+128+11)
    43 5E62 85 82		        sta DST_PTR
    44 5E64 A9 10		        lda >(SCRN+128+11)
    45 5E66 85 83		        sta DST_PTR+1
    46 				        
    47 5E68 A9 00		        lda #0
    48 5E6A A8			        tay
    49 5E6B 91 82		        sta (DST_PTR),y
    50 5E6D A0 20		        ldy #32
    51 5E6F 91 82		        sta (DST_PTR),y
    52 5E71 A0 40		        ldy #64
    53 5E73 91 82		        sta (DST_PTR),y
    54 5E75 A0 60		        ldy #96
    55 5E77 91 82		        sta (DST_PTR),y
    56 				        
    57 5E79 AD A3 02		        lda LANG_HLP
    58 5E7C 0A			        asl
    59 5E7D 0A			        asl
    60 5E7E 0A			        asl
    61 5E7F 0A			        asl
    62 5E80 0A			        asl
    63 5E81 A8			        tay
    64
    65 5E82 A9 5F		        lda #$5f
    66 5E84 91 82		        sta (DST_PTR),y
    67 				        
    68 5E86 A5 02		        lda RTCLOKL
    69 5E88 4A			        lsr
    70 5E89 29 03		       and #3
    71 5E8B D0 2D		        bne nodown
    72 5E8D A5 19		        lda JOY0
    73 5E8F 29 03		        and #3
    74 5E91 C9 02		        cmp #2
    75 5E93 D0 12		        bne noup
    76 5E95 AD A3 02		        lda LANG_HLP
    77 5E98 C9 00		        cmp #0
    78 5E9A F0 1E		        beq nodown
    79 5E9C CE A3 02		        dec LANG_HLP
    80 5E9F A9 04		        lda #$04
    81 5EA1 20 1B 5B		        jsr SOUND.SOUND_        
    82
    83 5EA4 4C BA 5E		        jmp nodown
    84 5EA7 C9 01		noup:   cmp #1
    85 5EA9 D0 0F		        bne nodown
    86 5EAB AD A3 02		        lda LANG_HLP
    87 5EAE C9 03		        cmp #3
    88 5EB0 10 08		        bpl nodown
    89 5EB2 EE A3 02		        inc LANG_HLP
    90 5EB5 A9 04		        lda #$04
    91 5EB7 20 1B 5B		        jsr SOUND.SOUND_        
    92
    93 5EBA			nodown:        
    94 5EBA 20 83 46		        jsr TITLE.HALT
    95 				        
    96 5EBD A2 3B		        ldx #59
    97 5EBF A9 0E		        lda #$0e
    98 5EC1 20 8E 46		        jsr TITLE.WLIN
    99
   100 5EC4 AD 10 C0		        lda TRIG0
   101 5EC7 D0 94		        bne main
   102 5EC9 A9 05		        lda #$05
   103 5ECB 20 1B 5B		        jsr SOUND.SOUND_        
   104
   105 5ECE 60			        rts
   106 				        
   107 				.ENDL
   287
   288 				;        org     $8600
   289 5ECF			       align 256
Macro: ALIGN [Source: 5200macro.h]
     5 = 0031			   .def ?tmp = [(*/256)*256+256]-*
     6 5ECF 00 00 00 00 00 00 +    :?tmp brk
Source: a52-robbo.asm
   290 5F00			MFNT:
   291 5F00			       icl 'inc/mfnt.asm'
Source: mfnt.asm
     1 5F00 AA BF BF BF BF BF +             .byte $AA,$BF,$BF,$BF,$BF,$BF,$BF,$BF
     2 5F08 A9 FD FD FD FD FD +             .byte $A9,$FD,$FD,$FD,$FD,$FD,$FD,$FD
     3 5F10 7F 7F 7F 55 F7 F7 +             .byte $7F,$7F,$7F,$55,$F7,$F7,$F7,$55
     4 5F18 7F 7F 7F 55 F7 F7 +             .byte $7F,$7F,$7F,$55,$F7,$F7,$F7,$55
     5 5F20 FD F7 DD 77 DF 7F +             .byte $FD,$F7,$DD,$77,$DF,$7F,$FF,$FF
     6 5F28 DF 7F FF FF FF FF +             .byte $DF,$7F,$FF,$FF,$FF,$FF,$FF,$FF
     7 5F30 AF BF FF FF FF F7 +             .byte $AF,$BF,$FF,$FF,$FF,$F7,$DD,$55
     8 5F38 FD FD FD F5 DD 75 +             .byte $FD,$FD,$FD,$F5,$DD,$75,$DD,$55
     9 5F40 EA AF BF BF AE FA +             .byte $EA,$AF,$BF,$BF,$AE,$FA,$FB,$FB
    10 5F48 EA AF BF BF AE FA +             .byte $EA,$AF,$BF,$BF,$AE,$FA,$FB,$FB
    11 5F50 AF BF FF FF FF F3 +             .byte $AF,$BF,$FF,$FF,$FF,$F3,$CC,$00
    12 5F58 FC FC FC F0 CC 30 +             .byte $FC,$FC,$FC,$F0,$CC,$30,$CC,$00
    13 5F60 0B 2F BF FF FF FF +             .byte $0B,$2F,$BF,$FF,$FF,$FF,$3F,$01
    14 5F68 F0 FC FC FC FC F4 +             .byte $F0,$FC,$FC,$FC,$FC,$F4,$D0,$40
    15 5F70 FF FF FF FF FF FF +             .byte $FF,$FF,$FF,$FF,$FF,$FF,$FF,$15
    16 5F78 FC FD FD FD FD FD +             .byte $FC,$FD,$FD,$FD,$FD,$FD,$FD,$55
    17 5F80 BF FF FF 55 FD FD +             .byte $BF,$FF,$FF,$55,$FD,$FD,$FD,$55
    18 5F88 FD FD FD 55 BF FF +             .byte $FD,$FD,$FD,$55,$BF,$FF,$FF,$55
    19 5F90 00 3F 3F 3A 3B 3F +             .byte $00,$3F,$3F,$3A,$3B,$3F,$3F,$3F
    20 5F98 00 FF FF FF FF FF +             .byte $00,$FF,$FF,$FF,$FF,$FF,$FF,$FF
    21 5FA0 7F FD F7 DF 7F FD +             .byte $7F,$FD,$F7,$DF,$7F,$FD,$F7,$DF
    22 5FA8 7F FD F7 DF 7F FD +             .byte $7F,$FD,$F7,$DF,$7F,$FD,$F7,$DF
    23 5FB0 07 1F 7F FF FF FF +             .byte $07,$1F,$7F,$FF,$FF,$FF,$FD,$F4
    24 5FB8 D0 F4 FD FF FF FF +             .byte $D0,$F4,$FD,$FF,$FF,$FF,$7F,$1F
    25 5FC0 FF FD DF FF 7F F7 +             .byte $FF,$FD,$DF,$FF,$7F,$F7,$FF,$DF
    26 5FC8 FD DF FF F7 7F FF +             .byte $FD,$DF,$FF,$F7,$7F,$FF,$DD,$FF
    27 5FD0 AB BF FF FF FF FF +             .byte $AB,$BF,$FF,$FF,$FF,$FF,$FF,$55
    28 5FD8 FD FD FD FD FD F5 +             .byte $FD,$FD,$FD,$FD,$FD,$F5,$55,$55
    29 5FE0 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
    30 5FE8 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
    31 5FF0 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
    32 5FF8 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
    33 6000 BF BF BF BF BF BF +             .byte $BF,$BF,$BF,$BF,$BF,$BF,$BF,$55
    34 6008 FD FD FD FD FD FD +             .byte $FD,$FD,$FD,$FD,$FD,$FD,$FD,$55
    35 6010 7F 7F 7F 55 F7 F7 +             .byte $7F,$7F,$7F,$55,$F7,$F7,$F7,$55
    36 6018 7F 7F 7F 55 F7 F7 +             .byte $7F,$7F,$7F,$55,$F7,$F7,$F7,$55
    37 6020 FF FF FF FF FD F7 +             .byte $FF,$FF,$FF,$FF,$FD,$F7,$DD,$55
    38 6028 FD F7 DD 77 DD 75 +             .byte $FD,$F7,$DD,$77,$DD,$75,$55,$55
    39 6030 FD FD FD F5 DD 75 +             .byte $FD,$FD,$FD,$F5,$DD,$75,$DD,$55
    40 6038 AF BF FF FF FF F7 +             .byte $AF,$BF,$FF,$FF,$FF,$F7,$DD,$55
    41 6040 EA AF BF BF AE FA +             .byte $EA,$AF,$BF,$BF,$AE,$FA,$FB,$FB
    42 6048 EA AF BF BF AE FA +             .byte $EA,$AF,$BF,$BF,$AE,$FA,$FB,$FB
    43 6050 FC FC FC F0 CC 30 +             .byte $FC,$FC,$FC,$F0,$CC,$30,$CC,$00
    44 6058 AF BF FF FF FF F3 +             .byte $AF,$BF,$FF,$FF,$FF,$F3,$CC,$00
    45 6060 F0 FC FC FC FC F4 +             .byte $F0,$FC,$FC,$FC,$FC,$F4,$50,$00
    46 6068 0B 2F BF FF FF FF +             .byte $0B,$2F,$BF,$FF,$FF,$FF,$3F,$05
    47 6070 FC FD FD FD FD FD +             .byte $FC,$FD,$FD,$FD,$FD,$FD,$FD,$55
    48 6078 FF FF FF FF FF FF +             .byte $FF,$FF,$FF,$FF,$FF,$FF,$FF,$15
    49 6080 BF FF FF 55 FD FD +             .byte $BF,$FF,$FF,$55,$FD,$FD,$FD,$55
    50 6088 FD FD FD 55 BF FF +             .byte $FD,$FD,$FD,$55,$BF,$FF,$FF,$55
    51 6090 3F 3F 3F 3F 3F 3F +             .byte $3F,$3F,$3F,$3F,$3F,$3F,$3F,$3F
    52 6098 FF FF FF FF FF FF +             .byte $FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
    53 60A0 7F FD F7 DF 7F FD +             .byte $7F,$FD,$F7,$DF,$7F,$FD,$F7,$DF
    54 60A8 7F FD F7 DF 7F FD +             .byte $7F,$FD,$F7,$DF,$7F,$FD,$F7,$DF
    55 60B0 F4 FD FF FF FF 7F +             .byte $F4,$FD,$FF,$FF,$FF,$7F,$1F,$07
    56 60B8 1F 7F FF FF FF FD +             .byte $1F,$7F,$FF,$FF,$FF,$FD,$F4,$D0
    57 60C0 FD 7F FF F7 FF 7F +             .byte $FD,$7F,$FF,$F7,$FF,$7F,$F7,$FF
    58 60C8 DF FF F7 7F FD FF +             .byte $DF,$FF,$F7,$7F,$FD,$FF,$7F,$F7
    59 60D0 FD FD FD FD FD F5 +             .byte $FD,$FD,$FD,$FD,$FD,$F5,$55,$55
    60 60D8 AB BF FF FF FF FF +             .byte $AB,$BF,$FF,$FF,$FF,$FF,$FF,$55
    61 60E0 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
    62 60E8 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
    63 60F0 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
    64 60F8 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
   292 				;        ins 'raw/m.fnt', +6
   293 6100			SFNT:
   294 6100			       icl 'inc/sfnt.asm'
Source: sfnt.asm
     1 6100 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
     2 6108 00 00 00 00 00 30 +             .byte $00,$00,$00,$00,$00,$30,$00,$00
     3 6110 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
     4 6118 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
     5 6120 00 00 0A 2A AA AA +             .byte $00,$00,$0A,$2A,$AA,$AA,$EA,$BE
     6 6128 0A AA AA AA AA AA +             .byte $0A,$AA,$AA,$AA,$AA,$AA,$AA,$AA
     7 6130 A0 A5 AA A9 AA A9 +             .byte $A0,$A5,$AA,$A9,$AA,$A9,$A6,$99
     8 6138 00 00 50 94 65 95 +             .byte $00,$00,$50,$94,$65,$95,$67,$BD
     9 6140 03 03 00 0A 0B 0B +             .byte $03,$03,$00,$0A,$0B,$0B,$02,$0A
    10 6148 0C 30 80 FC DC FC +             .byte $0C,$30,$80,$FC,$DC,$FC,$B0,$FC
    11 6150 0C 03 00 0A 09 0B +             .byte $0C,$03,$00,$0A,$09,$0B,$02,$0A
    12 6158 30 30 80 FC FC FC +             .byte $30,$30,$80,$FC,$FC,$FC,$B0,$FC
    13 6160 08 02 00 0A 09 0B +             .byte $08,$02,$00,$0A,$09,$0B,$02,$0A
    14 6168 0C 30 80 FC DC FC +             .byte $0C,$30,$80,$FC,$DC,$FC,$B0,$FC
    15 6170 08 02 00 0A 0B 0B +             .byte $08,$02,$00,$0A,$0B,$0B,$02,$0A
    16 6178 0C 30 80 FC FC FC +             .byte $0C,$30,$80,$FC,$FC,$FC,$B0,$FC
    17 6180 00 03 03 00 00 00 +             .byte $00,$03,$03,$00,$00,$00,$00,$00
    18 6188 00 00 00 00 00 C0 +             .byte $00,$00,$00,$00,$00,$C0,$C0,$00
    19 6190 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$30,$30
    20 6198 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$30,$30
    21 61A0 04 01 00 05 17 17 +             .byte $04,$01,$00,$05,$17,$17,$05,$00
    22 61A8 04 10 00 54 75 75 +             .byte $04,$10,$00,$54,$75,$75,$54,$80
    23 61B0 04 11 05 07 07 05 +             .byte $04,$11,$05,$07,$07,$05,$01,$14
    24 61B8 04 51 54 74 74 54 +             .byte $04,$51,$54,$74,$74,$54,$50,$85
    25 61C0 00 0C 0C 00 14 55 +             .byte $00,$0C,$0C,$00,$14,$55,$45,$01
    26 61C8 00 30 30 00 14 55 +             .byte $00,$30,$30,$00,$14,$55,$51,$40
    27 61D0 00 00 00 0F 3F 3F +             .byte $00,$00,$00,$0F,$3F,$3F,$3D,$35
    28 61D8 00 00 00 3C FF FF +             .byte $00,$00,$00,$3C,$FF,$FF,$DF,$D7
    29 61E0 3C 1F C7 F0 F2 72 +             .byte $3C,$1F,$C7,$F0,$F2,$72,$32,$32
    30 61E8 3C F4 D3 0F 8F 8D +             .byte $3C,$F4,$D3,$0F,$8F,$8D,$8C,$8C
    31 61F0 41 55 D7 7D 55 96 +             .byte $41,$55,$D7,$7D,$55,$96,$69,$55
    32 61F8 41 55 D7 7D 55 96 +             .byte $41,$55,$D7,$7D,$55,$96,$69,$55
    33 6200 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
    34 6208 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
    35 6210 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
    36 6218 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
    37 6220 AB 2A 06 20 24 90 +             .byte $AB,$2A,$06,$20,$24,$90,$90,$00
    38 6228 FF 99 66 55 00 00 +             .byte $FF,$99,$66,$55,$00,$00,$00,$00
    39 6230 FF 99 55 55 00 00 +             .byte $FF,$99,$55,$55,$00,$00,$00,$00
    40 6238 D5 54 50 04 24 09 +             .byte $D5,$54,$50,$04,$24,$09,$09,$00
    41 6240 0B 0B 0B 0B 0B 00 +             .byte $0B,$0B,$0B,$0B,$0B,$00,$02,$02
    42 6248 BC BC BC BC FC 00 +             .byte $BC,$BC,$BC,$BC,$FC,$00,$C0,$F0
    43 6250 0B 0B 0B 0B 0B 00 +             .byte $0B,$0B,$0B,$0B,$0B,$00,$00,$02
    44 6258 BC BC BC BC FC 00 +             .byte $BC,$BC,$BC,$BC,$FC,$00,$B0,$B0
    45 6260 3B 3B 3B 0B 00 0B +             .byte $3B,$3B,$3B,$0B,$00,$0B,$0B,$00
    46 6268 FE FE FE FE FC 00 +             .byte $FE,$FE,$FE,$FE,$FC,$00,$2C,$2C
    47 6270 3B 3B 3B 0B 0B 00 +             .byte $3B,$3B,$3B,$0B,$0B,$00,$0B,$00
    48 6278 FE FE FE FE FC 00 +             .byte $FE,$FE,$FE,$FE,$FC,$00,$2C,$2C
    49 6280 00 03 03 00 00 00 +             .byte $00,$03,$03,$00,$00,$00,$00,$00
    50 6288 00 00 00 00 00 C0 +             .byte $00,$00,$00,$00,$00,$C0,$C0,$00
    51 6290 03 03 00 00 00 00 +             .byte $03,$03,$00,$00,$00,$00,$00,$00
    52 6298 03 03 00 00 00 00 +             .byte $03,$03,$00,$00,$00,$00,$00,$00
    53 62A0 06 16 12 02 00 01 +             .byte $06,$16,$12,$02,$00,$01,$05,$00
    54 62A8 A4 A5 A1 A0 84 14 +             .byte $A4,$A5,$A1,$A0,$84,$14,$10,$00
    55 62B0 05 01 02 01 01 04 +             .byte $05,$01,$02,$01,$01,$04,$15,$00
    56 62B8 54 50 A0 50 51 45 +             .byte $54,$50,$A0,$50,$51,$45,$04,$00
    57 62C0 00 04 00 00 00 00 +             .byte $00,$04,$00,$00,$00,$00,$00,$00
    58 62C8 00 10 00 00 00 00 +             .byte $00,$10,$00,$00,$00,$00,$00,$00
    59 62D0 35 35 3F 0F 00 00 +             .byte $35,$35,$3F,$0F,$00,$00,$00,$00
    60 62D8 D7 D7 FF 3C 00 00 +             .byte $D7,$D7,$FF,$3C,$00,$00,$00,$00
    61 62E0 32 32 F2 F2 D0 4F +             .byte $32,$32,$F2,$F2,$D0,$4F,$3F,$34
    62 62E8 8C 8C 8F 8F 07 F1 +             .byte $8C,$8C,$8F,$8F,$07,$F1,$FC,$1C
    63 62F0 55 D7 7D 55 96 69 +             .byte $55,$D7,$7D,$55,$96,$69,$55,$14
    64 62F8 55 D7 7D 55 96 69 +             .byte $55,$D7,$7D,$55,$96,$69,$55,$14
    65 6300 55 55 55 15 C0 FC +             .byte $55,$55,$55,$15,$C0,$FC,$FC,$30
    66 6308 54 54 54 53 0F AF +             .byte $54,$54,$54,$53,$0F,$AF,$BF,$FF
    67 6310 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
    68 6318 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
    69 6320 08 02 00 0A 09 0B +             .byte $08,$02,$00,$0A,$09,$0B,$C2,$FA
    70 6328 00 3C 80 FC DC FC +             .byte $00,$3C,$80,$FC,$DC,$FC,$B0,$FC
    71 6330 00 0A 00 0A 09 3B +             .byte $00,$0A,$00,$0A,$09,$3B,$32,$3A
    72 6338 0C 30 80 FC DC FC +             .byte $0C,$30,$80,$FC,$DC,$FC,$B0,$FC
    73 6340 00 03 00 0A 0B 0B +             .byte $00,$03,$00,$0A,$0B,$0B,$02,$0B
    74 6348 00 30 80 FC 74 FC +             .byte $00,$30,$80,$FC,$74,$FC,$B0,$FC
    75 6350 00 03 00 0A 07 0B +             .byte $00,$03,$00,$0A,$07,$0B,$02,$0A
    76 6358 00 30 80 FC 7C FC +             .byte $00,$30,$80,$FC,$7C,$FC,$B0,$FC
    77 6360 00 0A 00 0A 09 0B +             .byte $00,$0A,$00,$0A,$09,$0B,$02,$0A
    78 6368 00 3C 80 FC DC FC +             .byte $00,$3C,$80,$FC,$DC,$FC,$B0,$FC
    79 6370 00 0A 00 0A 0B 0B +             .byte $00,$0A,$00,$0A,$0B,$0B,$02,$0A
    80 6378 00 3C 80 FC FC FC +             .byte $00,$3C,$80,$FC,$FC,$FC,$B0,$FC
    81 6380 00 00 00 00 00 03 +             .byte $00,$00,$00,$00,$00,$03,$03,$00
    82 6388 00 C0 C0 00 00 00 +             .byte $00,$C0,$C0,$00,$00,$00,$00,$00
    83 6390 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$03,$03
    84 6398 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$03,$03
    85 63A0 00 05 00 05 15 17 +             .byte $00,$05,$00,$05,$15,$17,$05,$00
    86 63A8 00 14 00 54 55 75 +             .byte $00,$14,$00,$54,$55,$75,$54,$80
    87 63B0 04 11 05 06 06 05 +             .byte $04,$11,$05,$06,$06,$05,$01,$00
    88 63B8 04 51 54 64 64 54 +             .byte $04,$51,$54,$64,$64,$54,$50,$80
    89 63C0 00 00 00 00 0C 0C +             .byte $00,$00,$00,$00,$0C,$0C,$01,$05
    90 63C8 00 00 00 00 30 30 +             .byte $00,$00,$00,$00,$30,$30,$40,$50
    91 63D0 00 00 00 0F 3F 35 +             .byte $00,$00,$00,$0F,$3F,$35,$35,$35
    92 63D8 00 00 00 3C FF D7 +             .byte $00,$00,$00,$3C,$FF,$D7,$D7,$D7
    93 63E0 3C 1F C7 F0 F1 71 +             .byte $3C,$1F,$C7,$F0,$F1,$71,$31,$31
    94 63E8 3C F4 D3 0F 4F 4D +             .byte $3C,$F4,$D3,$0F,$4F,$4D,$4C,$4C
    95 63F0 41 55 96 69 55 D7 +             .byte $41,$55,$96,$69,$55,$D7,$7D,$55
    96 63F8 41 55 96 69 55 D7 +             .byte $41,$55,$96,$69,$55,$D7,$7D,$55
    97 6400 CC 00 AF BF FF FF +             .byte $CC,$00,$AF,$BF,$FF,$FF,$FF,$FC
    98 6408 FC 00 FC FC FC FC +             .byte $FC,$00,$FC,$FC,$FC,$FC,$30,$CC
    99 6410 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
   100 6418 00 00 00 00 00 00 +             .byte $00,$00,$00,$00,$00,$00,$00,$00
   101 6420 3B 0B 0B 0B 0B 00 +             .byte $3B,$0B,$0B,$0B,$0B,$00,$0B,$0B
   102 6428 FE FE FE FE FC 00 +             .byte $FE,$FE,$FE,$FE,$FC,$00,$2C,$2C
   103 6430 3B 0B 0B 0B 0B 00 +             .byte $3B,$0B,$0B,$0B,$0B,$00,$0B,$0B
   104 6438 FE FE FE FE FC 00 +             .byte $FE,$FE,$FE,$FE,$FC,$00,$2C,$2C
   105 6440 0A 0A 0A 0A 0B 00 +             .byte $0A,$0A,$0A,$0A,$0B,$00,$0A,$0A
   106 6448 FC FC FC FC FC 00 +             .byte $FC,$FC,$FC,$FC,$FC,$00,$20,$EC
   107 6450 0B 0B 0B 0B 0B 00 +             .byte $0B,$0B,$0B,$0B,$0B,$00,$03,$0B
   108 6458 EC EC EC EC FC 00 +             .byte $EC,$EC,$EC,$EC,$FC,$00,$2C,$AC
   109 6460 3B 3B 3B 3B 0B 00 +             .byte $3B,$3B,$3B,$3B,$0B,$00,$0B,$0B
   110 6468 FE FE FE FC C0 2C +             .byte $FE,$FE,$FE,$FC,$C0,$2C,$2C,$00
   111 6470 3B 3B 3B 3B 0B 00 +             .byte $3B,$3B,$3B,$3B,$0B,$00,$0B,$0B
   112 6478 FE FE FE FC FC 00 +             .byte $FE,$FE,$FE,$FC,$FC,$00,$2C,$00
   113 6480 00 00 00 00 00 03 +             .byte $00,$00,$00,$00,$00,$03,$03,$00
   114 6488 00 C0 C0 00 00 00 +             .byte $00,$C0,$C0,$00,$00,$00,$00,$00
   115 6490 30 30 00 00 00 00 +             .byte $30,$30,$00,$00,$00,$00,$00,$00
   116 6498 30 30 00 00 00 00 +             .byte $30,$30,$00,$00,$00,$00,$00,$00
   117 64A0 06 16 12 02 04 05 +             .byte $06,$16,$12,$02,$04,$05,$01,$00
   118 64A8 A4 A5 A1 A0 80 10 +             .byte $A4,$A5,$A1,$A0,$80,$10,$14,$00
   119 64B0 05 15 12 01 11 14 +             .byte $05,$15,$12,$01,$11,$14,$04,$00
   120 64B8 54 55 A1 50 50 44 +             .byte $54,$55,$A1,$50,$50,$44,$15,$00
   121 64C0 15 14 11 10 00 00 +             .byte $15,$14,$11,$10,$00,$00,$00,$00
   122 64C8 54 14 44 04 00 00 +             .byte $54,$14,$44,$04,$00,$00,$00,$00
   123 64D0 3D 3F 3F 0F 00 00 +             .byte $3D,$3F,$3F,$0F,$00,$00,$00,$00
   124 64D8 DF FF FF 3C 00 00 +             .byte $DF,$FF,$FF,$3C,$00,$00,$00,$00
   125 64E0 31 31 F1 F1 D0 4F +             .byte $31,$31,$F1,$F1,$D0,$4F,$3F,$34
   126 64E8 4C 4C 4F 4F 07 F1 +             .byte $4C,$4C,$4F,$4F,$07,$F1,$FC,$1C
   127 64F0 55 96 69 55 D7 7D +             .byte $55,$96,$69,$55,$D7,$7D,$55,$14
   128 64F8 55 96 69 55 D7 7D +             .byte $55,$96,$69,$55,$D7,$7D,$55,$14
   295 				;        ins 'raw/s.fnt', +6
   296 6500			FONT:
   297 				;       icl 'inc/font.asm'
   298 6500 AA BF BF BF BF BF +         ins 'raw/f.fnt', +6
   299 				;IFNT:
   300 				;        ins 'raw/robbo5200.fnt'
   301 				;        ins 'raw/i.fnt', +6
   302 				;INFORFNT:
   303 				;        ins 'raw/infor.fnt', +6
   304 6900			ifnt_pl:
   305 6900 5D 53 4D 6B 13 41 +         ins 'raw/ifnt.def'
   306 6B4E			ifnt_hu:
   307 6B4E 5D 53 CF 6B 13 41 +         ins 'raw/ifnt-hu.def'
   308 6D9A			ifnt_de:
   309 6D9A 5D 53 3D 6B 1B 41 +         ins 'raw/ifnt-de.def'
   310
   311 6FE6			IFNT_PTRS:
   312 6FE6 00 69		        .word ifnt_pl
   313 6FE8 4E 6B		        .word ifnt_hu
   314 6FEA 00 69		        .word ifnt_pl
   315 6FEC 9A 6D		        .word ifnt_de
   316 				        
   317 6FEE			lang_pl:
   318 6FEE 8D 54 DB 6E 1B 37 +         ins 'raw/lang-pl.def'
   319 7390			lang_hu:
   320 7390 8D 55 4B 72 DC 36 +         ins 'raw/lang-hu.def'
   321 7758			lang_en:
   322 7758 8D 55 4D 6F 1B 37 +         ins 'raw/lang-en.def'
   323 7AB1			lang_de:
   324 7AB1 8D 54 CD 6E DB 46 +         ins 'raw/lang-de.def'
   325
   326 7E74			LANG_PTRS:
   327 7E74 EE 6F		        .word lang_pl
   328 7E76 90 73		        .word lang_hu
   329 7E78 58 77		        .word lang_en
   330 7E7A B1 7A		        .word lang_de        
   331 7E7C			cave001:
   332 7E7C 5D 50 3B 0E C2 30 +         ins 'caves/def-caves/cave-001.def'
   333 7F2A			cave002:
   334 7F2A 5D 51 4B 0E 02 31 +         ins 'caves/def-caves/cave-002.def'
   335 7FD5			cave003:
   336 7FD5 5D 91 3D 0E C2 30 +         ins 'caves/def-caves/cave-003.def'
   337 8081			cave004:
   338 8081 85 90 39 0E 02 31 +         ins 'caves/def-caves/cave-004.def'
   339 8122			cave005:
   340 8122 75 50 DB 0D C3 30 +         ins 'caves/def-caves/cave-005.def'
   341 81B4			cave006:
   342 81B4 C5 4E CB 0D 42 31 +         ins 'caves/def-caves/cave-006.def'
   343 824A			cave007:
   344 824A 6D 51 BB 0D 02 31 +         ins 'caves/def-caves/cave-007.def'
   345 82EF			cave008:
   346 82EF 6D 50 31 0E C2 30 +         ins 'caves/def-caves/cave-008.def'
   347 8396			cave009:
   348 8396 7D 90 3B 0E 83 40 +         ins 'caves/def-caves/cave-009.def'
   349 8427			cave010:
   350 8427 5D 51 DB 11 C3 20 +         ins 'caves/def-caves/cave-010.def'
   351 84D1			cave011:
   352 84D1 5D 51 31 12 02 31 +         ins 'caves/def-caves/cave-011.def'
   353 8584			cave012:
   354 8584 65 50 49 0E C2 30 +         ins 'caves/def-caves/cave-012.def'
   355 8636			cave013:
   356 8636 5D 51 BB 0E 02 31 +         ins 'caves/def-caves/cave-013.def'
   357 86FE			cave014:
   358 86FE 65 51 39 12 C2 30 +         ins 'caves/def-caves/cave-014.def'
   359 87A3			cave015:
   360 87A3 5D 4F 49 0E C2 40 +         ins 'caves/def-caves/cave-015.def'
   361 8866			cave016:
   362 8866 65 51 41 0E 02 31 +         ins 'caves/def-caves/cave-016.def'
   363 8920			cave017:
   364 8920 5D 90 B1 0D C2 50 +         ins 'caves/def-caves/cave-017.def'
   365 89E9			cave018:
   366 89E9 65 51 C1 0D C3 20 +         ins 'caves/def-caves/cave-018.def'
   367 8A88			cave019:
   368 8A88 5B B0 00 0D 28 00 +         ins 'caves/def-caves/cave-019.def'
   369 8B0E			cave020:
   370 8B0E 5D 51 CB 15 02 41 +         ins 'caves/def-caves/cave-020.def'
   371 8BB4			cave021:
   372 8BB4 5B B0 00 0D 68 29 +         ins 'caves/def-caves/cave-021.def'
   373 8C3C			cave022:
   374 8C3C 65 91 3D 12 02 31 +         ins 'caves/def-caves/cave-022.def'
   375 8CEE			cave023:
   376 8CEE 6D 51 B9 11 80 30 +         ins 'caves/def-caves/cave-023.def'
   377 8D71			cave024:
   378 8D71 5D 50 C1 11 C3 30 +         ins 'caves/def-caves/cave-024.def'
   379 8E12			cave025:
   380 8E12 6D 90 41 0E C2 30 +         ins 'caves/def-caves/cave-025.def'
   381 8EB7			cave026:
   382 8EB7 75 51 39 12 83 30 +         ins 'caves/def-caves/cave-026.def'
   383 8F4A			cave027:
   384 8F4A 7D 51 31 0E C2 30 +         ins 'caves/def-caves/cave-027.def'
   385 9011			cave028:
   386 9011 6D 90 CB 0D 02 31 +         ins 'caves/def-caves/cave-028.def'
   387 90AB			cave029:
   388 90AB 6D 91 3D 0E C2 30 +         ins 'caves/def-caves/cave-029.def'
   389 914E			cave030:
   390 914E 65 91 31 0E C2 30 +         ins 'caves/def-caves/cave-030.def'
   391 91F3			cave031:
   392 91F3 5D 91 3B 0E C2 40 +         ins 'caves/def-caves/cave-031.def'
   393 92AE			cave032:
   394 92AE 6D 90 CD 0D C3 20 +         ins 'caves/def-caves/cave-032.def'
   395 933A			cave033:
   396 933A 65 90 3D 0E C2 30 +         ins 'caves/def-caves/cave-033.def'
   397 93DE			cave034:
   398 93DE 6D 91 2D 12 85 30 +         ins 'caves/def-caves/cave-034.def'
   399 946B			cave035:
   400 946B 65 8F 31 0E C2 30 +         ins 'caves/def-caves/cave-035.def'
   401 950E			cave036:
   402 950E 8D 50 C9 0D C2 30 +         ins 'caves/def-caves/cave-036.def'
   403 95A1			cave037:
   404 95A1 5D 91 CB 11 C3 30 +         ins 'caves/def-caves/cave-037.def'
   405 9644			cave038:
   406 9644 75 91 3B 0E 84 30 +         ins 'caves/def-caves/cave-038.def'
   407 96D0			cave039:
   408 96D0 6D 51 31 0E C2 30 +         ins 'caves/def-caves/cave-039.def'
   409 977A			cave040:
   410 977A 65 90 31 12 02 31 +         ins 'caves/def-caves/cave-040.def'
   411 981D			cave041:
   412 981D 5B B0 00 0D 28 A0 +         ins 'caves/def-caves/cave-041.def'
   413 98AE			cave042:
   414 98AE 8D 90 3D 0E 80 20 +         ins 'caves/def-caves/cave-042.def'
   415 9932			cave043:
   416 9932 6D 50 31 0E C2 40 +         ins 'caves/def-caves/cave-043.def'
   417 99E1			cave044:
   418 99E1 65 90 BB 11 C2 30 +         ins 'caves/def-caves/cave-044.def'
   419 9A85			cave045:
   420 9A85 7D 91 3D 0E 83 30 +         ins 'caves/def-caves/cave-045.def'
   421 9B25			cave046:
   422 9B25 AD 91 3D 0E 83 30 +         ins 'caves/def-caves/cave-046.def'
   423 9BB4			cave047:
   424 9BB4 5B B0 00 0D 28 A0 +         ins 'caves/def-caves/cave-047.def'
   425 9C46			cave048:
   426 9C46 8D 4F B9 0D C3 40 +         ins 'caves/def-caves/cave-048.def'
   427 9CDB			cave049:
   428 9CDB 6D 51 3B 0E C2 30 +         ins 'caves/def-caves/cave-049.def'
   429 9D72			cave050:
   430 9D72 85 50 3B 0E C2 30 +         ins 'caves/def-caves/cave-050.def'
   431 9E0D			cave051:
   432 9E0D 5B B0 00 0D 38 2A +         ins 'caves/def-caves/cave-051.def'
   433 9E86			cave052:
   434 9E86 5D 91 B1 0D 02 31 +         ins 'caves/def-caves/cave-052.def'
   435 9F3E			cave053:
   436 9F3E 5B B0 00 0D A8 28 +         ins 'caves/def-caves/cave-053.def'
   437 9FCA			cave054:
   438 9FCA 7D 91 3B 0E 02 31 +         ins 'caves/def-caves/cave-054.def'
   439 A069			cave055:
   440 A069 85 90 CB 0D C2 30 +         ins 'caves/def-caves/cave-055.def'
   441 A111			cave056:
   442 A111 95 50 3B 0E C2 30 +         ins 'caves/def-caves/cave-056.def'
   443 				        
   444 A1C4			CAVESPTRS:
   445 A1C4 7C 7E 2A 7F D5 7F +         .word cave001, cave002, cave003, cave004, cave005, cave006, cave007, cave008
   446 A1D4 96 83 27 84 D1 84 +         .word cave009, cave010, cave011, cave012, cave013, cave014, cave015, cave016
   447 A1E4 20 89 E9 89 88 8A +         .word cave017, cave018, cave019, cave020, cave021, cave022, cave023, cave024
   448 A1F4 12 8E B7 8E 4A 8F +         .word cave025, cave026, cave027, cave028, cave029, cave030, cave031, cave032
   449 A204 3A 93 DE 93 6B 94 +         .word cave033, cave034, cave035, cave036, cave037, cave038, cave039, cave040
   450 A214 1D 98 AE 98 32 99 +         .word cave041, cave042, cave043, cave044, cave045, cave046, cave047, cave048
   451 A224 DB 9C 72 9D 0D 9E +         .word cave049, cave050, cave051, cave052, cave053, cave054, cave055, cave056                           
   452
   453 A234			        org $bc00
   454 3A00			inflate_rom .LOCAL, $3a00
   455 				;inflate	= $3b00
   456 = 00F0			inflate_zp	= $f0
   457 = 3D00			inflate_data	= $3d00
   458
   459 3A00			        icl 'inc/inflate.asm'
Source: inflate.asm
     1 				; inflate - uncompress data stored in the DEFLATE format
     2 				; by Piotr Fusik <fox@scene.pl>
     3 				; Last modified: 2007-06-17
     4
     5 				; Compile with xasm (http://xasm.atari.org/), mads (http://mads.atari8.info) for example:
     6 				; xasm inflate.asm /l /d:inflate=$b700 /d:inflate_data=$b900 /d:inflate_zp=$f0
     7 				; mads inflate.asm /l /d:inflate=$b700 /d:inflate_data=$b900 /d:inflate_zp=$f0
     8 				; inflate is 509 bytes of code and initialized data
     9 				; inflate_data is 764 bytes of uninitialized data
    10 				; inflate_zp is 10 bytes on page zero
    11
    12 				;inflate	= $b700
    13 				;inflate_zp	= $f0
    14 				;inflate_data	= $b900
    15
    16 				; Pointer to compressed data
    17 = 00F0			inputPointer                    equ	inflate_zp    ; 2 bytes
    18
    19 				; Pointer to uncompressed data
    20 = 00F2			outputPointer                   equ	inflate_zp+2  ; 2 bytes
    21
    22 				; Local variables
    23
    24 = 00F4			getBit_buffer                   equ	inflate_zp+4  ; 1 byte
    25
    26 = 00F5			getBits_base                    equ	inflate_zp+5  ; 1 byte
    27 = 00F5			inflateStoredBlock_pageCounter  equ	inflate_zp+5  ; 1 byte
    28
    29 = 00F6			inflateCodes_sourcePointer      equ	inflate_zp+6  ; 2 bytes
    30 = 00F6			inflateDynamicBlock_lengthIndex equ	inflate_zp+6  ; 1 byte
    31 = 00F7			inflateDynamicBlock_lastLength	equ	inflate_zp+7  ; 1 byte
    32 = 00F7			inflateDynamicBlock_tempCodes   equ	inflate_zp+7  ; 1 byte
    33
    34 = 00F8			inflateCodes_lengthMinus2       equ	inflate_zp+8  ; 1 byte
    35 = 00F8			inflateDynamicBlock_allCodes    equ	inflate_zp+8  ; 1 byte
    36
    37 = 00F9			inflateCodes_primaryCodes       equ	inflate_zp+9  ; 1 byte
    38
    39
    40 				; Argument values for getBits
    41 = 0081			GET_1_BIT                       equ	$81
    42 = 0082			GET_2_BITS                      equ	$82
    43 = 0084			GET_3_BITS                      equ	$84
    44 = 0088			GET_4_BITS                      equ	$88
    45 = 0090			GET_5_BITS                      equ	$90
    46 = 00A0			GET_6_BITS                      equ	$a0
    47 = 00C0			GET_7_BITS                      equ	$c0
    48
    49 				; Maximum length of a Huffman code
    50 = 000F			MAX_CODE_LENGTH                 equ	15
    51
    52 				; Huffman trees
    53 = 0010			TREE_SIZE                       equ	MAX_CODE_LENGTH+1
    54 = 0000			PRIMARY_TREE                    equ	0
    55 = 0010			DISTANCE_TREE                   equ	TREE_SIZE
    56
    57 				; Alphabet
    58 = 0020			LENGTH_SYMBOLS                  equ	1+29+2
    59 = 001E			DISTANCE_SYMBOLS                equ	30
    60 = 003E			CONTROL_SYMBOLS                 equ	LENGTH_SYMBOLS+DISTANCE_SYMBOLS
    61 = 013E			TOTAL_SYMBOLS                   equ	256+CONTROL_SYMBOLS
    62
    63
    64 				; Uncompress DEFLATE stream starting from the address stored in inputPointer
    65 				; to the memory starting from the address stored in outputPointer
    66
    67 3A00			inflate
    68
    69 3A00 A0 00 84 F4			mvy	#0	getBit_buffer
    70 3A04			inflate_blockLoop
    71 				; Get a bit of EOF and two bits of block type
    72 				;	ldy	#0
    73 3A04 84 F5			sty	getBits_base
    74 3A06 A9 84			lda	#GET_3_BITS
    75 3A08 20 A3 3B			jsr	getBits
    76 3A0B 4A				lsr	@
    77 3A0C 08				php
    78 3A0D AA				tax
    79 3A0E D0 1F			bne	inflateCompressedBlock
    80
    81 				; Copy uncompressed block
    82 				;	ldy	#0
    83 3A10 84 F4			sty	getBit_buffer
    84 3A12 20 AC 3B			jsr	getWord
    85 3A15 20 AC 3B			jsr	getWord
    86 3A18 85 F5			sta	inflateStoredBlock_pageCounter
    87 				;	jmp	inflateStoredBlock_firstByte
    88 3A1A B0 08			bcs	inflateStoredBlock_firstByte
    89 3A1C			inflateStoredBlock_copyByte
    90 3A1C 20 B0 3B			jsr	getByte
    91 3A1F			inflateStoreByte
    92 3A1F 20 D2 3B			jsr	storeByte
    93 3A22 90 75			bcc	inflateCodes_loop
    94 3A24			inflateStoredBlock_firstByte
    95 3A24 E8				inx
    96 3A25 D0 F5			bne	inflateStoredBlock_copyByte
    97 3A27 E6 F5			inc	inflateStoredBlock_pageCounter
    98 3A29 D0 F1			bne	inflateStoredBlock_copyByte
    99
   100 3A2B			inflate_nextBlock
   101 3A2B 28				plp
   102 3A2C 90 D6			bcc	inflate_blockLoop
   103 3A2E 60				rts
   104
   105 3A2F			inflateCompressedBlock
   106
   107 				; Decompress a block with fixed Huffman trees:
   108 				; :144 dta 8
   109 				; :112 dta 9
   110 				; :24  dta 7
   111 				; :6   dta 8
   112 				; :2   dta 8 ; codes with no meaning
   113 				; :30  dta 5+DISTANCE_TREE
   114 				;	ldy	#0
   115 3A2F			inflateFixedBlock_setCodeLengths
   116 3A2F A9 04			lda	#4
   117 3A31 C0 90			cpy	#144
   118 3A33 2A				rol	@
   119 3A34 99 00 3D			sta	literalSymbolCodeLength,y
   120 3A37 C0 3E			cpy	#CONTROL_SYMBOLS
   121 3A39 B0 0D			bcs	inflateFixedBlock_noControlSymbol
   122 3A3B A9 15			lda	#5+DISTANCE_TREE
   123 3A3D C0 20			cpy	#LENGTH_SYMBOLS
   124 3A3F B0 04			bcs	inflateFixedBlock_setControlCodeLength
   125 3A41 C0 18			cpy	#24
   126 3A43 69 F2			adc	#2-DISTANCE_TREE
   127 3A45			inflateFixedBlock_setControlCodeLength
   128 3A45 99 00 3E			sta	controlSymbolCodeLength,y
   129 3A48			inflateFixedBlock_noControlSymbol
   130 3A48 C8				iny
   131 3A49 D0 E4			bne	inflateFixedBlock_setCodeLengths
   132 3A4B A9 20 85 F9			mva	#LENGTH_SYMBOLS	inflateCodes_primaryCodes
   133
   134 3A4F CA				dex
   135 3A50 F0 44			beq	inflateCodes
   136
   137 				; Decompress a block reading Huffman trees first
   138
   139 				; Build the tree for temporary codes
   140 3A52 20 F5 3A			jsr	buildTempHuffmanTree
   141
   142 				; Use temporary codes to get lengths of literal/length and distance codes
   143 3A55 A2 00			ldx	#0
   144 				;	sec
   145 3A57			inflateDynamicBlock_decodeLength
   146 3A57 08				php
   147 3A58 86 F6			stx	inflateDynamicBlock_lengthIndex
   148 				; Fetch a temporary code
   149 3A5A 20 73 3B			jsr	fetchPrimaryCode
   150 				; Temporary code 0..15: put this length
   151 3A5D AA				tax
   152 3A5E 10 14			bpl	inflateDynamicBlock_verbatimLength
   153 				; Temporary code 16: repeat last length 3 + getBits(2) times
   154 				; Temporary code 17: put zero length 3 + getBits(3) times
   155 				; Temporary code 18: put zero length 11 + getBits(7) times
   156 3A60 20 A3 3B			jsr	getBits
   157 				;	sec
   158 3A63 69 01			adc	#1
   159 3A65 E0 C0			cpx	#GET_7_BITS
   160 3A67 90 02 69 07			scc:adc	#7
   161 3A6B A8				tay
   162 3A6C A9 00			lda	#0
   163 3A6E E0 84			cpx	#GET_3_BITS
   164 3A70 B0 02 A5 F7			scs:lda	inflateDynamicBlock_lastLength
   165 3A74			inflateDynamicBlock_verbatimLength
   166 3A74 C8				iny
   167 3A75 A6 F6			ldx	inflateDynamicBlock_lengthIndex
   168 3A77 28				plp
   169 3A78			inflateDynamicBlock_storeLength
   170 3A78 90 0D			bcc	inflateDynamicBlock_controlSymbolCodeLength
   171 3A7A 9D 00 3D E8			sta	literalSymbolCodeLength,x+
   172 3A7E E0 01			cpx	#1
   173 3A80			inflateDynamicBlock_storeNext
   174 3A80 88				dey
   175 3A81 D0 F5			bne	inflateDynamicBlock_storeLength
   176 3A83 85 F7			sta	inflateDynamicBlock_lastLength
   177 				;	jmp	inflateDynamicBlock_decodeLength
   178 3A85 F0 D0			beq	inflateDynamicBlock_decodeLength
   179 3A87			inflateDynamicBlock_controlSymbolCodeLength
   180 3A87 E4 F9			cpx	inflateCodes_primaryCodes
   181 3A89 90 02 09 10			scc:ora	#DISTANCE_TREE
   182 3A8D 9D 00 3E E8			sta	controlSymbolCodeLength,x+
   183 3A91 E4 F8			cpx	inflateDynamicBlock_allCodes
   184 3A93 90 EB			bcc	inflateDynamicBlock_storeNext
   185 3A95 88				dey
   186 				;	ldy	#0
   187 				;	jmp	inflateCodes
   188
   189 				; Decompress a block
   190 3A96			inflateCodes
   191 3A96 20 24 3B			jsr	buildHuffmanTree
   192 3A99			inflateCodes_loop
   193 3A99 20 73 3B			jsr	fetchPrimaryCode
   194 3A9C 90 81			bcc	inflateStoreByte
   195 3A9E AA				tax
   196 3A9F F0 8A			beq	inflate_nextBlock
   197 				; Copy sequence from look-behind buffer
   198 				;	ldy	#0
   199 3AA1 84 F5			sty	getBits_base
   200 3AA3 C9 09			cmp	#9
   201 3AA5 90 14			bcc	inflateCodes_setSequenceLength
   202 3AA7 98				tya
   203 				;	lda	#0
   204 3AA8 E0 1D			cpx	#1+28
   205 3AAA B0 0F			bcs	inflateCodes_setSequenceLength
   206 3AAC CA				dex
   207 3AAD 8A				txa
   208 3AAE 4A				lsr	@
   209 3AAF 66 F5			ror	getBits_base
   210 3AB1 E6 F5			inc	getBits_base
   211 3AB3 4A				lsr	@
   212 3AB4 26 F5			rol	getBits_base
   213 3AB6 20 99 3B			jsr	getAMinus1BitsMax8
   214 				;	sec
   215 3AB9 69 00			adc	#0
   216 3ABB			inflateCodes_setSequenceLength
   217 3ABB 85 F8			sta	inflateCodes_lengthMinus2
   218 3ABD A2 10			ldx	#DISTANCE_TREE
   219 3ABF 20 75 3B			jsr	fetchCode
   220 				;	sec
   221 3AC2 E5 F9			sbc	inflateCodes_primaryCodes
   222 3AC4 AA				tax
   223 3AC5 C9 04			cmp	#4
   224 3AC7 90 06			bcc	inflateCodes_setOffsetLowByte
   225 3AC9 E6 F5			inc	getBits_base
   226 3ACB 4A				lsr	@
   227 3ACC 20 99 3B			jsr	getAMinus1BitsMax8
   228 3ACF			inflateCodes_setOffsetLowByte
   229 3ACF 49 FF			eor	#$ff
   230 3AD1 85 F6			sta	inflateCodes_sourcePointer
   231 3AD3 A5 F5			lda	getBits_base
   232 3AD5 E0 0A			cpx	#10
   233 3AD7 90 07			bcc	inflateCodes_setOffsetHighByte
   234 3AD9 BD D3 3B			lda	getNPlus1Bits_mask-10,x
   235 3ADC 20 A3 3B			jsr	getBits
   236 3ADF 18				clc
   237 3AE0			inflateCodes_setOffsetHighByte
   238 3AE0 49 FF			eor	#$ff
   239 				;	clc
   240 3AE2 65 F3			adc	outputPointer+1
   241 3AE4 85 F7			sta	inflateCodes_sourcePointer+1
   242 3AE6 20 CC 3B			jsr	copyByte
   243 3AE9 20 CC 3B			jsr	copyByte
   244 3AEC			inflateCodes_copyByte
   245 3AEC 20 CC 3B			jsr	copyByte
   246 3AEF C6 F8			dec	inflateCodes_lengthMinus2
   247 3AF1 D0 F9			bne	inflateCodes_copyByte
   248 				;	jmp	inflateCodes_loop
   249 3AF3 F0 A4			beq	inflateCodes_loop
   250
   251 3AF5			buildTempHuffmanTree
   252 				;	ldy	#0
   253 3AF5 98				tya
   254 3AF6			inflateDynamicBlock_clearCodeLengths
   255 3AF6 99 00 3D			sta	literalSymbolCodeLength,y
   256 3AF9 99 3E 3D			sta	literalSymbolCodeLength+TOTAL_SYMBOLS-256,y
   257 3AFC C8				iny
   258 3AFD D0 F7			bne	inflateDynamicBlock_clearCodeLengths
   259 				; numberOfPrimaryCodes = 257 + getBits(5)
   260 				; numberOfDistanceCodes = 1 + getBits(5)
   261 				; numberOfTemporaryCodes = 4 + getBits(4)
   262 3AFF A2 03			ldx	#3
   263 3B01			inflateDynamicBlock_getHeader
   264 3B01 BD F6 3B			lda	inflateDynamicBlock_headerBits-1,x
   265 3B04 20 A3 3B			jsr	getBits
   266 				;	sec
   267 3B07 7D F9 3B			adc	inflateDynamicBlock_headerBase-1,x
   268 3B0A 95 F6			sta	inflateDynamicBlock_tempCodes-1,x
   269 3B0C 8D FB 3B			sta	inflateDynamicBlock_headerBase+1
   270 3B0F CA				dex
   271 3B10 D0 EF			bne	inflateDynamicBlock_getHeader
   272
   273 				; Get lengths of temporary codes in the order stored in tempCodeLengthOrder
   274 				;	ldx	#0
   275 3B12			inflateDynamicBlock_getTempCodeLengths
   276 3B12 A9 84			lda	#GET_3_BITS
   277 3B14 20 A3 3B			jsr	getBits
   278 3B17 BC E4 3B			ldy	tempCodeLengthOrder,x
   279 3B1A 99 00 3D			sta	literalSymbolCodeLength,y
   280 3B1D A0 00			ldy	#0
   281 3B1F E8				inx
   282 3B20 E4 F7			cpx	inflateDynamicBlock_tempCodes
   283 3B22 90 EE			bcc	inflateDynamicBlock_getTempCodeLengths
   284
   285 				; Build Huffman trees basing on code lengths (in bits)
   286 				; stored in the *SymbolCodeLength arrays
   287 3B24			buildHuffmanTree
   288 				; Clear nBitCode_totalCount, nBitCode_literalCount, nBitCode_controlCount
   289 3B24 98				tya
   290 				;	lda	#0
   291 3B25 99 3E 3E C8 D0 FA		sta:rne	nBitCode_clearFrom,y+
   292 				; Count number of codes of each length
   293 				;	ldy	#0
   294 3B2B			buildHuffmanTree_countCodeLengths
   295 3B2B BE 00 3D			ldx	literalSymbolCodeLength,y
   296 3B2E FE 5E 3E			inc	nBitCode_literalCount,x
   297 3B31 FE 3E 3E			inc	nBitCode_totalCount,x
   298 3B34 C0 3E			cpy	#CONTROL_SYMBOLS
   299 3B36 B0 09			bcs	buildHuffmanTree_noControlSymbol
   300 3B38 BE 00 3E			ldx	controlSymbolCodeLength,y
   301 3B3B FE 6E 3E			inc	nBitCode_controlCount,x
   302 3B3E FE 3E 3E			inc	nBitCode_totalCount,x
   303 3B41			buildHuffmanTree_noControlSymbol
   304 3B41 C8				iny
   305 3B42 D0 E7			bne	buildHuffmanTree_countCodeLengths
   306 				; Calculate offsets of symbols sorted by code length
   307 				;	lda	#0
   308 3B44 A2 D0			ldx	#-3*TREE_SIZE
   309 3B46			buildHuffmanTree_calculateOffsets
   310 3B46 9D BE 3D			sta	nBitCode_literalOffset+3*TREE_SIZE-$100,x
   311 3B49 18 7D 8E 3D			add	nBitCode_literalCount+3*TREE_SIZE-$100,x
   312 3B4D E8				inx
   313 3B4E D0 F6			bne	buildHuffmanTree_calculateOffsets
   314 				; Put symbols in their place in the sorted array
   315 				;	ldy	#0
   316 3B50			buildHuffmanTree_assignCode
   317 3B50 98				tya
   318 3B51 BE 00 3D			ldx	literalSymbolCodeLength,y
   319 3B54 BC 8E 3E FE 8E 3E		ldy:inc	nBitCode_literalOffset,x
   320 3B5A 99 BE 3E			sta	codeToLiteralSymbol,y
   321 3B5D A8				tay
   322 3B5E C0 3E			cpy	#CONTROL_SYMBOLS
   323 3B60 B0 0D			bcs	buildHuffmanTree_noControlSymbol2
   324 3B62 BE 00 3E			ldx	controlSymbolCodeLength,y
   325 3B65 BC 9E 3E FE 9E 3E		ldy:inc	nBitCode_controlOffset,x
   326 3B6B 99 BE 3F			sta	codeToControlSymbol,y
   327 3B6E A8				tay
   328 3B6F			buildHuffmanTree_noControlSymbol2
   329 3B6F C8				iny
   330 3B70 D0 DE			bne	buildHuffmanTree_assignCode
   331 3B72 60				rts
   332
   333 				; Read Huffman code using the primary tree
   334 3B73			fetchPrimaryCode
   335 3B73 A2 00			ldx	#PRIMARY_TREE
   336 				; Read a code from input basing on the tree specified in X,
   337 				; return low byte of this code in A,
   338 				; return C flag reset for literal code, set for length code
   339 3B75			fetchCode
   340 				;	ldy	#0
   341 3B75 98				tya
   342 3B76			fetchCode_nextBit
   343 3B76 20 B9 3B			jsr	getBit
   344 3B79 2A				rol	@
   345 3B7A E8				inx
   346 3B7B 38 FD 3E 3E			sub	nBitCode_totalCount,x
   347 3B7F B0 F5			bcs	fetchCode_nextBit
   348 				;	clc
   349 3B81 7D 6E 3E			adc	nBitCode_controlCount,x
   350 3B84 B0 09			bcs	fetchCode_control
   351 				;	clc
   352 3B86 7D 8E 3E			adc	nBitCode_literalOffset,x
   353 3B89 AA				tax
   354 3B8A BD BE 3E			lda	codeToLiteralSymbol,x
   355 3B8D 18				clc
   356 3B8E 60				rts
   357 3B8F			fetchCode_control
   358 3B8F 18 7D 9D 3E			add	nBitCode_controlOffset-1,x
   359 3B93 AA				tax
   360 3B94 BD BE 3F			lda	codeToControlSymbol,x
   361 3B97 38				sec
   362 3B98 60				rts
   363
   364 				; Read A minus 1 bits, but no more than 8
   365 3B99			getAMinus1BitsMax8
   366 3B99 26 F5			rol	getBits_base
   367 3B9B AA				tax
   368 3B9C C9 09			cmp	#9
   369 3B9E B0 10			bcs	getByte
   370 3BA0 BD DB 3B			lda	getNPlus1Bits_mask-2,x
   371 3BA3			getBits
   372 3BA3 20 B2 3B			jsr	getBits_loop
   373 3BA6			getBits_normalizeLoop
   374 3BA6 46 F5			lsr	getBits_base
   375 3BA8 6A				ror	@
   376 3BA9 90 FB			bcc	getBits_normalizeLoop
   377 3BAB 60				rts
   378
   379 				; Read 16 bits
   380 3BAC			getWord
   381 3BAC 20 B0 3B			jsr	getByte
   382 3BAF AA				tax
   383 				; Read 8 bits
   384 3BB0			getByte
   385 3BB0 A9 80			lda	#$80
   386 3BB2			getBits_loop
   387 3BB2 20 B9 3B			jsr	getBit
   388 3BB5 6A				ror	@
   389 3BB6 90 FA			bcc	getBits_loop
   390 3BB8 60				rts
   391
   392 				; Read one bit, return in the C flag
   393 3BB9			getBit
   394 3BB9 46 F4			lsr	getBit_buffer
   395 3BBB D0 0E			bne	getBit_return
   396 3BBD 48				pha
   397 				;	ldy	#0
   398 3BBE B1 F0			lda	(inputPointer),y
   399 3BC0 E6 F0 D0 02 E6 F1		inw	inputPointer
   400 3BC6 38				sec
   401 3BC7 6A				ror	@
   402 3BC8 85 F4			sta	getBit_buffer
   403 3BCA 68				pla
   404 3BCB			getBit_return
   405 3BCB 60				rts
   406
   407 				; Copy a previously written byte
   408 3BCC			copyByte
   409 3BCC A4 F2			ldy	outputPointer
   410 3BCE B1 F6			lda	(inflateCodes_sourcePointer),y
   411 3BD0 A0 00			ldy	#0
   412 				; Write a byte
   413 3BD2			storeByte
   414 3BD2 91 F2			sta	(outputPointer),y
   415 3BD4 E6 F2			inc	outputPointer
   416 3BD6 D0 04			bne	storeByte_return
   417 3BD8 E6 F3			inc	outputPointer+1
   418 3BDA E6 F7			inc	inflateCodes_sourcePointer+1
   419 3BDC			storeByte_return
   420 3BDC 60				rts
   421
   422 3BDD			getNPlus1Bits_mask
   423 3BDD 81 82 84 88 90 A0 + 	dta	GET_1_BIT,GET_2_BITS,GET_3_BITS,GET_4_BITS,GET_5_BITS,GET_6_BITS,GET_7_BITS
   424
   425 3BE4			tempCodeLengthOrder
   426 3BE4 82 84 C0 00 08 07 + 	dta	GET_2_BITS,GET_3_BITS,GET_7_BITS,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15
   427
   428 3BF7 88 90 90		inflateDynamicBlock_headerBits	dta	GET_4_BITS,GET_5_BITS,GET_5_BITS
   429 3BFA 03 00 00		inflateDynamicBlock_headerBase	dta	3,0,0  ; second byte is modified at runtime!
   430
   431
   432 				; Data for building trees
   433
   434 = 3D00			literalSymbolCodeLength		equ inflate_data
   435 = 3E00			controlSymbolCodeLength		equ literalSymbolCodeLength+256
   436
   437 				; Huffman trees
   438
   439 = 3E3E			nBitCode_clearFrom		equ controlSymbolCodeLength+CONTROL_SYMBOLS
   440 = 3E3E			nBitCode_totalCount		equ nBitCode_clearFrom
   441 = 3E5E			nBitCode_literalCount		equ nBitCode_totalCount+2*TREE_SIZE
   442 = 3E6E			nBitCode_controlCount		equ nBitCode_literalCount+TREE_SIZE
   443 = 3E8E			nBitCode_literalOffset		equ nBitCode_controlCount+2*TREE_SIZE
   444 = 3E9E			nBitCode_controlOffset		equ nBitCode_literalOffset+TREE_SIZE
   445 = 3EBE			codeToLiteralSymbol		equ nBitCode_controlOffset+2*TREE_SIZE
   446 = 3FBE			codeToControlSymbol		equ codeToLiteralSymbol+256
   447 = 3FFC			inflate_data_end		equ codeToControlSymbol+CONTROL_SYMBOLS
   460 3BFD 20 00 00		CALL:   jsr $0000
   461 3C00 4C 65 4A		        jmp GAME.CHCC
   462 3C03 4C 00 00		JMP1:   jmp $0000
   463 3C06 4C 00 00		SJMP:   jmp $0000
   464 				.ENDL
   465 = 0209			inflate_size = *-$bc00
   466
   467 				;* moddified IMMEDIATE VBI
   468 = 0019			JOY0    = $19
   469
   470 = 0020			RTCLOCK   = $20
   471 = 0220			CDTMR1  = $0220
   472 = 0222			CDTMR2  = $0222
   473 = 0224			CDTMR3  = $0224
   474 = 0228			CDTMR4  = $0228
   475 = 022A			CDTMR5  = $022a
   476 = 022C			CDTMR6  = $022c
   477 = 022E			CDTMR7  = $022e
   478
   479 BE09			modIMIRQ:
   480 BE09 48			        pha
   481 BE0A 8A			        txa
   482 BE0B 48			        pha
   483 BE0C 98			        tya
   484 BE0D 48			        pha
   485 				        
   486 BE0E E6 02		        inc RTCLOKL
   487 BE10 D0 04		        bne nxtclk
   488 BE12 E6 04		        inc ATRACT
   489 BE14 E6 01		        inc RTCLOKH
   490 BE16			nxtclk:
   491 BE16			cdtimersproc:        
   492 BE16 AD 20 02		        lda CDTMR1
   493 BE19 0D 21 02		        ora CDTMR1+1
   494 BE1C F0 1C		        beq clkend1
   495 BE1E AD 20 02		        lda CDTMR1
   496 BE21 49 FF		        eor #$ff
   497 BE23 A8			        tay
   498 BE24 AD 21 02		        lda CDTMR1+1
   499 BE27 49 FF		        eor #$ff
   500 BE29 AA			        tax
   501 BE2A E8			        inx
   502 BE2B D0 01		        bne nohigh1
   503 BE2D C8			        iny
   504 BE2E			nohigh1:
   505 BE2E 8A			        txa
   506 BE2F 49 FF		        eor #$ff
   507 BE31 8D 21 02		        sta CDTMR1+1
   508 BE34 98			        tya
   509 BE35 49 FF		        eor #$ff
   510 BE37 8D 20 02		        sta CDTMR1
   511 BE3A			clkend1:
   512
   513 BE3A AD 22 02		        lda CDTMR2
   514 BE3D 0D 23 02		        ora CDTMR2+1
   515 BE40 F0 1C		        beq clkend2
   516 BE42 AD 22 02		        lda CDTMR2
   517 BE45 49 FF		        eor #$ff
   518 BE47 A8			        tay
   519 BE48 AD 23 02		        lda CDTMR2+1
   520 BE4B 49 FF		        eor #$ff
   521 BE4D AA			        tax
   522 BE4E E8			        inx
   523 BE4F D0 01		        bne nohigh2
   524 BE51 C8			        iny
   525 BE52			nohigh2:
   526 BE52 8A			        txa
   527 BE53 49 FF		        eor #$ff
   528 BE55 8D 23 02		        sta CDTMR2+1
   529 BE58 98			        tya
   530 BE59 49 FF		        eor #$ff
   531 BE5B 8D 22 02		        sta CDTMR2
   532 BE5E			clkend2:
   533 BE5E			mi_fcc5:        
   534 BE5E A5 03		        lda CODFLG
   535 BE60 F0 03		        beq mi_fcc9 
   536 BE62 4C B2 FC		        jmp $fcb2 ; BIOS exit from NMI
   537 BE65			mi_fcc9:
   538 BE65 A5 06		        lda SDLSTH
   539 BE67 8D 03 D4		        sta DLISTH
   540 BE6A A5 05		        lda SDLSTL
   541 BE6C 8D 02 D4		        sta DLISTL
   542 BE6F A5 07		        lda SDMCTL
   543 BE71 8D 00 D4		        sta DMACTL
   544 BE74 AD F6 02		        lda SCHBASE
   545 BE77 8D 09 D4		        sta CHBASE
   546 BE7A A4 04		        ldy ATRACT
   547 BE7C 10 04		        bpl mi_fce0
   548 BE7E A0 80		        ldy #$80
   549 BE80 84 04		        sty ATRACT
   550 BE82			mi_fce0:        
   551 BE82 A2 08		        ldx #$08
   552 BE84			mi_fce2:        
   553 BE84 B5 08		        lda PCOLR0,x
   554 BE86 C0 80		        cpy #$80
   555 BE88 90 04		        bcc mi_fcec
   556 BE8A 45 01		        eor RTCLOKH
   557 BE8C 29 F6		        and #$f6
   558 BE8E			mi_fcec:
   559 BE8E 9D 12 C0		        sta COLPM0,x
   560 BE91 CA			        dex
   561 BE92 10 F0		        bpl mi_fce2
   562 				        
   563 BE94 A2 07		        ldx #$07
   564 BE96			mi_fcf4:        
   565 BE96 BD 00 E8		        lda PPOT0,x
   566 BE99 95 11		        sta POT0,x
   567 BE9B CA			        dex
   568 BE9C 10 F8		        bpl mi_fcf4
   569 BE9E 8D 0B E8		        sta POTGO
   570 				        
   571 				;        lda TITLE_HLP
   572 				;        beq cdtimersproc
   573 				        
   574 BEA1 20 AF BE		        jsr POT2JOY
   575 BEA4 20 A6 59		        jsr GAME.CVBL
   576
   577 BEA7 A9 00		        lda #0
   578 BEA9 8D 9D 02		        sta DLI_HLP
   579 				               
   580 BEAC 6C 04 02		        jmp (VVBLKD)
   581 				        
   582 BEAF			POT2JOY:
   583 				;        lda RTCLOKL
   584 				;        and #$3
   585 				;        beq p2jgo
   586 				;        rts
   587 BEAF 18			p2jgo:  clc
   588 BEB0 A9 0F		        lda #$0f
   589 BEB2 A6 11		        ldx POT0   ; $00 left / $e4 right
   590 BEB4 E0 39		        cpx #$39
   591 BEB6 B0 05		        bcs nolft
   592 BEB8 29 0B		        and #$0b
   593 BEBA 4C C3 BE		        jmp norght
   594 BEBD			nolft:  
   595 BEBD E0 AB		        cpx #171 ;#144
   596 BEBF 90 02		        bcc norght
   597 BEC1 29 07		        and #$07
   598 				        
   599 BEC3 18			norght: clc
   600 BEC4 A6 12		        ldx POT1   ; $00 up   / $e4 down
   601 BEC6 E0 39		        cpx #$39; #$72
   602 BEC8 B0 05		        bcs noup
   603 BECA 29 0E		        and #$0e
   604 BECC 4C D5 BE		        jmp nodwn
   605 BECF			noup:   
   606 BECF E0 AB		        cpx #171 ;#144
   607 BED1 90 02		        bcc nodwn
   608 BED3 29 0D		        and #$0d
   609 BED5 85 19		nodwn:  sta JOY0
   610 BED7 60			        rts                
   611 				        
   612 				;************** Cart reset vector **************************
   613
   614 BED8			        org     $bfe7
   615 BFE7			.array signature [23] .byte = $00
   616  [0000] 00		[0] = $00                 ; $15 - PAL compatible / $00 - NTSC only
   617  [0001] 00 00 00 00 00 + [1] = "     ROBBO 5200"   ; Title
   618  [0015] 10 FF		[21] = $10, $ff 	          ; $00FF = Don't display Atari logo
   619 				                          ; $xxFF = Show new splash with 2000+$xx year   
   620 				.enda
   621 BFFE D9 40		        .word   START     ; Start code vector 
